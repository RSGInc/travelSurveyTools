<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="travelSurveyTools">
<title>Getting Started â€¢ travelSurveyTools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="travelSurveyTools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">travelSurveyTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/a01_getting_started.html">Getting Started</a>
    <a class="dropdown-item" href="../articles/a02_geographic_summaries.html">Creating user-specified geographic summaries</a>
    <a class="dropdown-item" href="../articles/a03_trip_rates.html">Creating summaries of trip rates</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/RSGInc/travelSurveyTools/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/RSGInc/travelSurveyTools/blob/HEAD/vignettes/a01_getting_started.Rmd" class="external-link"><code>vignettes/a01_getting_started.Rmd</code></a></small>
      <div class="d-none name"><code>a01_getting_started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="about-travelsurveytools">About TravelSurveyTools<a class="anchor" aria-label="anchor" href="#about-travelsurveytools"></a>
</h2>
<p>The <code>travelSurveyTools</code> package provides tools for R users
to aid use of data from household travel surveys. Some possible uses
include creating custom cross tabs, labeling data, and calculating trip
rates.</p>
</div>
<div class="section level2">
<h2 id="data-assumptions">Data Assumptions<a class="anchor" aria-label="anchor" href="#data-assumptions"></a>
</h2>
<p><code>travelSurveyTools</code> assumes the the data have the
structure shown below.</p>
<div class="section level3">
<h3 id="hts_data">hts_data<a class="anchor" aria-label="anchor" href="#hts_data"></a>
</h3>
<p>hts_data is a list of five core tables:</p>
<div class="section level4">
<h4 id="hh">hh<a class="anchor" aria-label="anchor" href="#hh"></a>
</h4>
<p>Household dataset</p>
<ul>
<li>hh_id: household ID</li>
<li>survey variables asked on a household level</li>
<li>hh_weight: household weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="person">person<a class="anchor" aria-label="anchor" href="#person"></a>
</h4>
<p>Person dataset</p>
<ul>
<li>hh_id: household ID</li>
<li>person_id: person ID</li>
<li>survey variables asked on a person level</li>
<li>person_weight: person weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="day">day<a class="anchor" aria-label="anchor" href="#day"></a>
</h4>
<p>Day dataset</p>
<ul>
<li>hh_id: household ID</li>
<li>person_id: person ID</li>
<li>day_id: day ID</li>
<li>survey variable asked on a day level</li>
<li>day_weight: day weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="trip">trip<a class="anchor" aria-label="anchor" href="#trip"></a>
</h4>
<p>Trip dataset</p>
<ul>
<li>hh_id: household ID</li>
<li>person_id: person ID</li>
<li>day_id: day ID</li>
<li>trip_id: trip ID</li>
<li>survey variables asked on a trip level</li>
<li>trip_weight: trip weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="vehicle">vehicle<a class="anchor" aria-label="anchor" href="#vehicle"></a>
</h4>
<p>Vehicle dataset</p>
<ul>
<li>hh_id: household ID</li>
<li>vehicle_id: vehicle ID</li>
<li>survey responses asked on a vehicle level</li>
<li>hh_weight: household weight</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="codebook">Codebook<a class="anchor" aria-label="anchor" href="#codebook"></a>
</h3>
<p>In addition to data from the household travel survey. The codebook is
also required. The codebook is assumed to be in two parts:</p>
<div class="section level4">
<h4 id="variable_list">variable_list<a class="anchor" aria-label="anchor" href="#variable_list"></a>
</h4>
<p>A dataset containing information about all variables existing in the
hh, person, day, trip, and vehicle tables. The variables are as
follows:</p>
<ul>
<li>variable: Name of the variable</li>
<li>is_checkbox: The variable is a multiple response categorical
variable question (multiple or mrcv variable)</li>
<li>hh: The variable exists in the hh table</li>
<li>person: The variable exists in the person table</li>
<li>day: The variable exists in the day table</li>
<li>trip: The variable exists in the trip table</li>
<li>vehicle: The variable exists in the vehicle table</li>
<li>location: The variable exists in the location table</li>
<li>data_type: Data type of the variable</li>
<li>description: A description of the variable</li>
<li>logic: Conditions where the variable should have a value</li>
<li>shared_name: the shared name of a multiple response categorical
variable variable or the variable name for non-multiple response
categorical variable variables</li>
</ul>
</div>
<div class="section level4">
<h4 id="value_labels">value_labels<a class="anchor" aria-label="anchor" href="#value_labels"></a>
</h4>
<p>A dataset containing the values for all variables found in
variable_list The variables are as follows:</p>
<ul>
<li>variable: Name of the variable</li>
<li>value: The numeric value of the variable</li>
<li>label: What the numeric value of the variable represents</li>
<li>label_value: value concatenated with the label (e.g., 11 85 or
older)</li>
<li>val_order: order for each variable label to appear in</li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="using-travelsurveytools">Using travelSurveyTools<a class="anchor" aria-label="anchor" href="#using-travelsurveytools"></a>
</h2>
<div class="section level3">
<h3 id="prepping-the-data">Prepping the Data<a class="anchor" aria-label="anchor" href="#prepping-the-data"></a>
</h3>
<p>In order to create summaries of our data we first need to prepare our
data. We can do this by using <code>hts_prep_variable</code>. This will
return a categorical (cat) and numeric (num) (if applicable) prepped
data table that can be used to create summaries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RSGInc/travelSurveyTools" class="external-link">travelSurveyTools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"test_data"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"variable_list"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"value_labels"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_list</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_variable.html">hts_prep_variable</a></span><span class="op">(</span></span>
<span>  summarize_var <span class="op">=</span> <span class="st">"speed_mph"</span>,</span>
<span>  variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>  data <span class="op">=</span> <span class="va">test_data</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in hts_remove_outliers(var_dt, numvar = summarize_var, threshold =</span></span>
<span><span class="co">## threshold): 378 outliers were removed based on the threshold of 0.975.</span></span></code></pre>
<p>Numeric variables will be automatically binned in
<code>hts_prep_variable</code> to create categorical summaries. Here we
can make a categorical summary of a numeric variable using
<code>hts_summary</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span></span>
<span>  prepped_dt <span class="op">=</span> <span class="va">speed_list</span><span class="op">$</span><span class="va">cat</span>,</span>
<span>  summarize_var <span class="op">=</span> <span class="st">"speed_mph"</span>,</span>
<span>  summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  summarize_vartype <span class="op">=</span> <span class="st">"categorical"</span>,</span>
<span>  weighted <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     speed_mph count       prop</span></span>
<span><span class="co">## 1:  1 or less   635 0.04313273</span></span>
<span><span class="co">## 2:       1-10  7289 0.49510936</span></span>
<span><span class="co">## 3:      10-19  3618 0.24575465</span></span>
<span><span class="co">## 4:      19-28  1819 0.12355658</span></span>
<span><span class="co">## 5:      28-37   726 0.04931395</span></span>
<span><span class="co">## 6:      37-44   285 0.01935878</span></span>
<span><span class="co">## 7: 44 or more   350 0.02377394</span></span></code></pre>
<p>Additionally, for numeric variables we can create numeric
summaries.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_num_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span></span>
<span>  prepped_dt <span class="op">=</span> <span class="va">speed_list</span><span class="op">$</span><span class="va">num</span>,</span>
<span>  summarize_var <span class="op">=</span> <span class="st">"speed_mph"</span>,</span>
<span>  summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  summarize_vartype <span class="op">=</span> <span class="st">"numeric"</span>,</span>
<span>  weighted <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_num_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##    count min      max     mean   median</span></span>
<span><span class="co">## 1: 14722   0 112.5371 12.27017 8.914392</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="using-weighted-data">Using Weighted Data<a class="anchor" aria-label="anchor" href="#using-weighted-data"></a>
</h3>
<p>Additionally, we can use weighted data by setting
<code>weighted = TRUE</code> and specifying the name of the weight to be
used (<code>wtname</code>).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span></span>
<span>  prepped_dt <span class="op">=</span> <span class="va">speed_list</span><span class="op">$</span><span class="va">cat</span>,</span>
<span>  summarize_var <span class="op">=</span> <span class="st">"speed_mph"</span>,</span>
<span>  summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  summarize_vartype <span class="op">=</span> <span class="st">"categorical"</span>,</span>
<span>  weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  wtname <span class="op">=</span> <span class="st">"trip_weight"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     speed_mph count       prop</span></span>
<span><span class="co">## 1:  1 or less   635 0.04313273</span></span>
<span><span class="co">## 2:       1-10  7289 0.49510936</span></span>
<span><span class="co">## 3:      10-19  3618 0.24575465</span></span>
<span><span class="co">## 4:      19-28  1819 0.12355658</span></span>
<span><span class="co">## 5:      28-37   726 0.04931395</span></span>
<span><span class="co">## 6:      37-44   285 0.01935878</span></span>
<span><span class="co">## 7: 44 or more   350 0.02377394</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     speed_mph count       prop     est</span></span>
<span><span class="co">## 1:  1 or less   635 0.04225006  314952</span></span>
<span><span class="co">## 2:       1-10  7289 0.49882701 3718493</span></span>
<span><span class="co">## 3:      10-19  3618 0.24538136 1829189</span></span>
<span><span class="co">## 4:      19-28  1819 0.12194475  909034</span></span>
<span><span class="co">## 5:      28-37   726 0.04891599  364643</span></span>
<span><span class="co">## 6:      37-44   285 0.02049065  152747</span></span>
<span><span class="co">## 7: 44 or more   350 0.02219016  165416</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="calculating-standard-errors">Calculating Standard Errors<a class="anchor" aria-label="anchor" href="#calculating-standard-errors"></a>
</h3>
<p>Additionally, by specifying <code>se = TRUE</code> we can calculate
standard errors.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span></span>
<span>  prepped_dt <span class="op">=</span> <span class="va">speed_list</span><span class="op">$</span><span class="va">cat</span>,</span>
<span>  summarize_var <span class="op">=</span> <span class="st">"speed_mph"</span>,</span>
<span>  summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  summarize_vartype <span class="op">=</span> <span class="st">"categorical"</span>,</span>
<span>  weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  wtname <span class="op">=</span> <span class="st">"trip_weight"</span>,</span>
<span>  se <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     speed_mph count       prop</span></span>
<span><span class="co">## 1:  1 or less   635 0.04313273</span></span>
<span><span class="co">## 2:       1-10  7289 0.49510936</span></span>
<span><span class="co">## 3:      10-19  3618 0.24575465</span></span>
<span><span class="co">## 4:      19-28  1819 0.12355658</span></span>
<span><span class="co">## 5:      28-37   726 0.04931395</span></span>
<span><span class="co">## 6:      37-44   285 0.01935878</span></span>
<span><span class="co">## 7: 44 or more   350 0.02377394</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     speed_mph count       prop     prop_se     est   est_se</span></span>
<span><span class="co">## 1:  1 or less   635 0.04225006 0.001886624  314952 14128.27</span></span>
<span><span class="co">## 2:       1-10  7289 0.49882701 0.004730868 3718493 39396.65</span></span>
<span><span class="co">## 3:      10-19  3618 0.24538136 0.004073123 1829189 31541.65</span></span>
<span><span class="co">## 4:      19-28  1819 0.12194475 0.003087738  909034 23382.12</span></span>
<span><span class="co">## 5:      28-37   726 0.04891599 0.002026164  364643 15186.92</span></span>
<span><span class="co">## 6:      37-44   285 0.02049065 0.001361407  152747 10179.97</span></span>
<span><span class="co">## 7: 44 or more   350 0.02219016 0.001373240  165416 10258.47</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="summarizing-two-variables">Summarizing Two Variables<a class="anchor" aria-label="anchor" href="#summarizing-two-variables"></a>
</h3>
<p>If we want to summarize a variable by another variable (e.g., mode
type by a personâ€™s race, mode_type by a personâ€™s ethnicity, age by study
year) we can use the <code>summarize_by</code> argument.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mode_type_list</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_variable.html">hts_prep_variable</a></span><span class="op">(</span></span>
<span>  summarize_var <span class="op">=</span> <span class="st">"mode_type"</span>,</span>
<span>  summarize_by <span class="op">=</span> <span class="st">"race"</span>,</span>
<span>  variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>  data <span class="op">=</span> <span class="va">test_data</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span></span>
<span>  prepped_dt <span class="op">=</span> <span class="va">mode_type_list</span><span class="op">$</span><span class="va">cat</span>,</span>
<span>  summarize_var <span class="op">=</span> <span class="st">"mode_type"</span>,</span>
<span>  summarize_by <span class="op">=</span> <span class="st">"race"</span>,</span>
<span>  summarize_vartype <span class="op">=</span> <span class="st">"categorical"</span>,</span>
<span>  weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  wtname <span class="op">=</span> <span class="st">"trip_weight"</span>,</span>
<span>  se <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##  1:                 African American or Black         1    22 0.2222222222</span></span>
<span><span class="co">##  2:                 African American or Black         2     3 0.0303030303</span></span>
<span><span class="co">##  3:                 African American or Black         8    68 0.6868686869</span></span>
<span><span class="co">##  4:                 African American or Black        13     6 0.0606060606</span></span>
<span><span class="co">##  5:          American Indian or Alaska Native         1    23 0.2555555556</span></span>
<span><span class="co">##  6:          American Indian or Alaska Native         2     3 0.0333333333</span></span>
<span><span class="co">##  7:          American Indian or Alaska Native         5     1 0.0111111111</span></span>
<span><span class="co">##  8:          American Indian or Alaska Native         6     1 0.0111111111</span></span>
<span><span class="co">##  9:          American Indian or Alaska Native         8    57 0.6333333333</span></span>
<span><span class="co">## 10:          American Indian or Alaska Native        10     2 0.0222222222</span></span>
<span><span class="co">## 11:          American Indian or Alaska Native        11     1 0.0111111111</span></span>
<span><span class="co">## 12:          American Indian or Alaska Native        13     2 0.0222222222</span></span>
<span><span class="co">## 13:                                     Asian         1    46 0.2705882353</span></span>
<span><span class="co">## 14:                                     Asian         2     4 0.0235294118</span></span>
<span><span class="co">## 15:                                     Asian         6     1 0.0058823529</span></span>
<span><span class="co">## 16:                                     Asian         7     1 0.0058823529</span></span>
<span><span class="co">## 17:                                     Asian         8   104 0.6117647059</span></span>
<span><span class="co">## 18:                                     Asian        10     3 0.0176470588</span></span>
<span><span class="co">## 19:                                     Asian        11     1 0.0058823529</span></span>
<span><span class="co">## 20:                                     Asian        13    10 0.0588235294</span></span>
<span><span class="co">## 21: Native Hawaiian or other Pacific Islander         1    43 0.2544378698</span></span>
<span><span class="co">## 22: Native Hawaiian or other Pacific Islander         2     7 0.0414201183</span></span>
<span><span class="co">## 23: Native Hawaiian or other Pacific Islander         6     2 0.0118343195</span></span>
<span><span class="co">## 24: Native Hawaiian or other Pacific Islander         7     1 0.0059171598</span></span>
<span><span class="co">## 25: Native Hawaiian or other Pacific Islander         8   106 0.6272189349</span></span>
<span><span class="co">## 26: Native Hawaiian or other Pacific Islander        11     1 0.0059171598</span></span>
<span><span class="co">## 27: Native Hawaiian or other Pacific Islander        13     9 0.0532544379</span></span>
<span><span class="co">## 28:                                     White         1    45 0.2941176471</span></span>
<span><span class="co">## 29:                                     White         2     4 0.0261437908</span></span>
<span><span class="co">## 30:                                     White         4     1 0.0065359477</span></span>
<span><span class="co">## 31:                                     White         6     2 0.0130718954</span></span>
<span><span class="co">## 32:                                     White         8    90 0.5882352941</span></span>
<span><span class="co">## 33:                                     White        13    11 0.0718954248</span></span>
<span><span class="co">## 34:                               Two or more         1  2058 0.2920391656</span></span>
<span><span class="co">## 35:                               Two or more         2   148 0.0210018448</span></span>
<span><span class="co">## 36:                               Two or more         3     3 0.0004257131</span></span>
<span><span class="co">## 37:                               Two or more         4    20 0.0028380871</span></span>
<span><span class="co">## 38:                               Two or more         5     4 0.0005676174</span></span>
<span><span class="co">## 39:                               Two or more         6    36 0.0051085568</span></span>
<span><span class="co">## 40:                               Two or more         7    40 0.0056761743</span></span>
<span><span class="co">## 41:                               Two or more         8  4299 0.6100468284</span></span>
<span><span class="co">## 42:                               Two or more        10    36 0.0051085568</span></span>
<span><span class="co">## 43:                               Two or more        11    28 0.0039733220</span></span>
<span><span class="co">## 44:                               Two or more        12     6 0.0008514261</span></span>
<span><span class="co">## 45:                               Two or more        13   355 0.0503760465</span></span>
<span><span class="co">## 46:                               Two or more        14    14 0.0019866610</span></span>
<span><span class="co">## 47:                                Other race         1    28 0.3146067416</span></span>
<span><span class="co">## 48:                                Other race         6     1 0.0112359551</span></span>
<span><span class="co">## 49:                                Other race         8    53 0.5955056180</span></span>
<span><span class="co">## 50:                                Other race        10     2 0.0224719101</span></span>
<span><span class="co">## 51:                                Other race        13     5 0.0561797753</span></span>
<span><span class="co">## 52:                      Prefer not to answer         1  2176 0.2918846412</span></span>
<span><span class="co">## 53:                      Prefer not to answer         2   183 0.0245472837</span></span>
<span><span class="co">## 54:                      Prefer not to answer         3     9 0.0012072435</span></span>
<span><span class="co">## 55:                      Prefer not to answer         4    22 0.0029510396</span></span>
<span><span class="co">## 56:                      Prefer not to answer         5     3 0.0004024145</span></span>
<span><span class="co">## 57:                      Prefer not to answer         6    43 0.0057679410</span></span>
<span><span class="co">## 58:                      Prefer not to answer         7    43 0.0057679410</span></span>
<span><span class="co">## 59:                      Prefer not to answer         8  4456 0.5977196512</span></span>
<span><span class="co">## 60:                      Prefer not to answer        10    51 0.0068410463</span></span>
<span><span class="co">## 61:                      Prefer not to answer        11    22 0.0029510396</span></span>
<span><span class="co">## 62:                      Prefer not to answer        12     6 0.0008048290</span></span>
<span><span class="co">## 63:                      Prefer not to answer        13   425 0.0570087190</span></span>
<span><span class="co">## 64:                      Prefer not to answer        14    16 0.0021462106</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##  1:                 African American or Black         1    22 0.2425302553</span></span>
<span><span class="co">##  2:                 African American or Black         2     3 0.0322180413</span></span>
<span><span class="co">##  3:                 African American or Black         8    68 0.6657378216</span></span>
<span><span class="co">##  4:                 African American or Black        13     6 0.0595138818</span></span>
<span><span class="co">##  5:          American Indian or Alaska Native         1    23 0.2377237162</span></span>
<span><span class="co">##  6:          American Indian or Alaska Native         2     3 0.0464969871</span></span>
<span><span class="co">##  7:          American Indian or Alaska Native         5     1 0.0064529184</span></span>
<span><span class="co">##  8:          American Indian or Alaska Native         6     1 0.0122088317</span></span>
<span><span class="co">##  9:          American Indian or Alaska Native         8    57 0.6401879665</span></span>
<span><span class="co">## 10:          American Indian or Alaska Native        10     2 0.0240129508</span></span>
<span><span class="co">## 11:          American Indian or Alaska Native        11     1 0.0215621908</span></span>
<span><span class="co">## 12:          American Indian or Alaska Native        13     2 0.0113544383</span></span>
<span><span class="co">## 13:                                     Asian         1    46 0.2677774299</span></span>
<span><span class="co">## 14:                                     Asian         2     4 0.0178672881</span></span>
<span><span class="co">## 15:                                     Asian         6     1 0.0057161409</span></span>
<span><span class="co">## 16:                                     Asian         7     1 0.0007536494</span></span>
<span><span class="co">## 17:                                     Asian         8   104 0.6057138219</span></span>
<span><span class="co">## 18:                                     Asian        10     3 0.0213688592</span></span>
<span><span class="co">## 19:                                     Asian        11     1 0.0104699294</span></span>
<span><span class="co">## 20:                                     Asian        13    10 0.0703328811</span></span>
<span><span class="co">## 21: Native Hawaiian or other Pacific Islander         1    43 0.2519546682</span></span>
<span><span class="co">## 22: Native Hawaiian or other Pacific Islander         2     7 0.0575492058</span></span>
<span><span class="co">## 23: Native Hawaiian or other Pacific Islander         6     2 0.0097055320</span></span>
<span><span class="co">## 24: Native Hawaiian or other Pacific Islander         7     1 0.0047996981</span></span>
<span><span class="co">## 25: Native Hawaiian or other Pacific Islander         8   106 0.6093847660</span></span>
<span><span class="co">## 26: Native Hawaiian or other Pacific Islander        11     1 0.0097998750</span></span>
<span><span class="co">## 27: Native Hawaiian or other Pacific Islander        13     9 0.0568062549</span></span>
<span><span class="co">## 28:                                     White         1    45 0.2736028717</span></span>
<span><span class="co">## 29:                                     White         2     4 0.0297990108</span></span>
<span><span class="co">## 30:                                     White         4     1 0.0128238502</span></span>
<span><span class="co">## 31:                                     White         6     2 0.0193727822</span></span>
<span><span class="co">## 32:                                     White         8    90 0.5994327912</span></span>
<span><span class="co">## 33:                                     White        13    11 0.0649686939</span></span>
<span><span class="co">## 34:                               Two or more         1  2058 0.2915903665</span></span>
<span><span class="co">## 35:                               Two or more         2   148 0.0193177986</span></span>
<span><span class="co">## 36:                               Two or more         3     3 0.0002755179</span></span>
<span><span class="co">## 37:                               Two or more         4    20 0.0034360184</span></span>
<span><span class="co">## 38:                               Two or more         5     4 0.0009396083</span></span>
<span><span class="co">## 39:                               Two or more         6    36 0.0053118852</span></span>
<span><span class="co">## 40:                               Two or more         7    40 0.0052803416</span></span>
<span><span class="co">## 41:                               Two or more         8  4299 0.6102537891</span></span>
<span><span class="co">## 42:                               Two or more        10    36 0.0057560078</span></span>
<span><span class="co">## 43:                               Two or more        11    28 0.0039066600</span></span>
<span><span class="co">## 44:                               Two or more        12     6 0.0008086884</span></span>
<span><span class="co">## 45:                               Two or more        13   355 0.0509043799</span></span>
<span><span class="co">## 46:                               Two or more        14    14 0.0022189382</span></span>
<span><span class="co">## 47:                                Other race         1    28 0.3300569182</span></span>
<span><span class="co">## 48:                                Other race         6     1 0.0121151165</span></span>
<span><span class="co">## 49:                                Other race         8    53 0.5754451734</span></span>
<span><span class="co">## 50:                                Other race        10     2 0.0096463758</span></span>
<span><span class="co">## 51:                                Other race        13     5 0.0727364162</span></span>
<span><span class="co">## 52:                      Prefer not to answer         1  2176 0.2901116906</span></span>
<span><span class="co">## 53:                      Prefer not to answer         2   183 0.0250127937</span></span>
<span><span class="co">## 54:                      Prefer not to answer         3     9 0.0008927077</span></span>
<span><span class="co">## 55:                      Prefer not to answer         4    22 0.0023674661</span></span>
<span><span class="co">## 56:                      Prefer not to answer         5     3 0.0004499353</span></span>
<span><span class="co">## 57:                      Prefer not to answer         6    43 0.0059550102</span></span>
<span><span class="co">## 58:                      Prefer not to answer         7    43 0.0054772192</span></span>
<span><span class="co">## 59:                      Prefer not to answer         8  4456 0.5990344431</span></span>
<span><span class="co">## 60:                      Prefer not to answer        10    51 0.0066169138</span></span>
<span><span class="co">## 61:                      Prefer not to answer        11    22 0.0030776528</span></span>
<span><span class="co">## 62:                      Prefer not to answer        12     6 0.0008958912</span></span>
<span><span class="co">## 63:                      Prefer not to answer        13   425 0.0587054120</span></span>
<span><span class="co">## 64:                      Prefer not to answer        14    16 0.0014028643</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##          prop_se     est     est_se</span></span>
<span><span class="co">##  1: 0.0488793701   11924  2760.2835</span></span>
<span><span class="co">##  2: 0.0192747891    1584   961.7070</span></span>
<span><span class="co">##  3: 0.0538431192   32731  4557.6808</span></span>
<span><span class="co">##  4: 0.0278595569    2926  1415.2034</span></span>
<span><span class="co">##  5: 0.0489623011   10573  2431.3038</span></span>
<span><span class="co">##  6: 0.0265355469    2068  1210.9162</span></span>
<span><span class="co">##  7: 0.0064587476     287   287.0000</span></span>
<span><span class="co">##  8: 0.0121494434     543   543.0000</span></span>
<span><span class="co">##  9: 0.0568590617   28473  4415.2742</span></span>
<span><span class="co">## 10: 0.0171042374    1068   768.2942</span></span>
<span><span class="co">## 11: 0.0212536599     959   959.0000</span></span>
<span><span class="co">## 12: 0.0089016245     505   395.6596</span></span>
<span><span class="co">## 13: 0.0390288610   23095  3939.9840</span></span>
<span><span class="co">## 14: 0.0108784324    1541   945.4068</span></span>
<span><span class="co">## 15: 0.0057056370     493   493.0000</span></span>
<span><span class="co">## 16: 0.0007560023      65    65.0000</span></span>
<span><span class="co">## 17: 0.0430582623   52241  5824.9319</span></span>
<span><span class="co">## 18: 0.0128200078    1843  1117.8535</span></span>
<span><span class="co">## 19: 0.0104007037     903   903.0000</span></span>
<span><span class="co">## 20: 0.0233047946    6066  2090.2978</span></span>
<span><span class="co">## 21: 0.0388570716   21365  3803.6897</span></span>
<span><span class="co">## 22: 0.0228735703    4880  2008.4349</span></span>
<span><span class="co">## 23: 0.0071925215     823   611.3568</span></span>
<span><span class="co">## 24: 0.0047960813     407   407.0000</span></span>
<span><span class="co">## 25: 0.0440034185   51674  5845.4095</span></span>
<span><span class="co">## 26: 0.0097433256     831   831.0000</span></span>
<span><span class="co">## 27: 0.0217247910    4817  1901.8419</span></span>
<span><span class="co">## 28: 0.0409308580   19970  3464.8052</span></span>
<span><span class="co">## 29: 0.0159829589    2175  1184.4750</span></span>
<span><span class="co">## 30: 0.0127152614     936   936.0000</span></span>
<span><span class="co">## 31: 0.0136901767    1414  1010.1692</span></span>
<span><span class="co">## 32: 0.0457651407   43752  5263.5573</span></span>
<span><span class="co">## 33: 0.0239756794    4742  1814.6243</span></span>
<span><span class="co">## 34: 0.0062024440 1044577 25013.0886</span></span>
<span><span class="co">## 35: 0.0018149697   69203  6536.9674</span></span>
<span><span class="co">## 36: 0.0001992965     987   713.9738</span></span>
<span><span class="co">## 37: 0.0008360485   12309  2998.9750</span></span>
<span><span class="co">## 38: 0.0004717023    3366  1690.5458</span></span>
<span><span class="co">## 39: 0.0009889333   19029  3548.7518</span></span>
<span><span class="co">## 40: 0.0009940850   18916  3567.4116</span></span>
<span><span class="co">## 41: 0.0066548054 2186139 33829.8317</span></span>
<span><span class="co">## 42: 0.0010634803   20620  3817.7647</span></span>
<span><span class="co">## 43: 0.0008631699   13995  3096.3278</span></span>
<span><span class="co">## 44: 0.0003923923    2897  1406.0707</span></span>
<span><span class="co">## 45: 0.0030039411  182357 10947.9882</span></span>
<span><span class="co">## 46: 0.0006557321    7949  2350.8972</span></span>
<span><span class="co">## 47: 0.0573116049   14439  3049.7214</span></span>
<span><span class="co">## 48: 0.0120592582     530   530.0000</span></span>
<span><span class="co">## 49: 0.0604560934   25174  4056.9946</span></span>
<span><span class="co">## 50: 0.0088957777     422   389.4846</span></span>
<span><span class="co">## 51: 0.0338891184    3182  1547.2956</span></span>
<span><span class="co">## 52: 0.0060416540 1093556 25527.6793</span></span>
<span><span class="co">## 53: 0.0020680881   94284  7856.6878</span></span>
<span><span class="co">## 54: 0.0003637299    3365  1371.2763</span></span>
<span><span class="co">## 55: 0.0005670664    8924  2138.0610</span></span>
<span><span class="co">## 56: 0.0003045156    1696  1148.0627</span></span>
<span><span class="co">## 57: 0.0010522269   22447  3974.6248</span></span>
<span><span class="co">## 58: 0.0009766971   20646  3687.7976</span></span>
<span><span class="co">## 59: 0.0065250441 2258019 34349.4918</span></span>
<span><span class="co">## 60: 0.0010559060   24942  3987.6756</span></span>
<span><span class="co">## 61: 0.0007423448   11601  2801.0127</span></span>
<span><span class="co">## 62: 0.0004094685    3377  1543.9496</span></span>
<span><span class="co">## 63: 0.0031475192  221286 12101.0995</span></span>
<span><span class="co">## 64: 0.0004001287    5288  1508.1227</span></span>
<span><span class="co">##          prop_se     est     est_se</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">age_study_year_list</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_variable.html">hts_prep_variable</a></span><span class="op">(</span></span>
<span>    summarize_var <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>    summarize_by <span class="op">=</span> <span class="st">"study_year"</span>,</span>
<span>    variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>    data <span class="op">=</span> <span class="va">test_data</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="va">mode_by_race_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span></span>
<span>    prepped_dt <span class="op">=</span> <span class="va">age_study_year_list</span><span class="op">$</span><span class="va">cat</span>,</span>
<span>    summarize_var <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>    summarize_by <span class="op">=</span> <span class="st">"study_year"</span>,</span>
<span>    summarize_vartype <span class="op">=</span> <span class="st">"categorical"</span>,</span>
<span>    weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    wtname <span class="op">=</span> <span class="st">"trip_weight"</span>,</span>
<span>    se <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>If we want to summarize a multiple response categorical variable
(mrcv or multiple), we can set <code>summarize_vartype</code> to
checkbox.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">race_list</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_variable.html">hts_prep_variable</a></span><span class="op">(</span></span>
<span>  summarize_var <span class="op">=</span> <span class="st">"race"</span>,</span>
<span>  summarize_by <span class="op">=</span> <span class="st">"mode_type"</span>,</span>
<span>  variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>  data <span class="op">=</span> <span class="va">test_data</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span></span>
<span>  prepped_dt <span class="op">=</span> <span class="va">race_list</span><span class="op">$</span><span class="va">cat</span>,</span>
<span>  summarize_var <span class="op">=</span> <span class="st">"race"</span>,</span>
<span>  summarize_by <span class="op">=</span> <span class="st">"mode_type"</span>,</span>
<span>  summarize_vartype <span class="op">=</span> <span class="st">"checkbox"</span>,</span>
<span>  weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  wtname <span class="op">=</span> <span class="st">"trip_weight"</span>,</span>
<span>  se <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     mode_type                                      race count       prop</span></span>
<span><span class="co">##  1:         1                 African American or Black  1173 0.26072461</span></span>
<span><span class="co">##  2:         1          American Indian or Alaska Native  1149 0.25539009</span></span>
<span><span class="co">##  3:         1                                     Asian  1095 0.24338742</span></span>
<span><span class="co">##  4:         1 Native Hawaiian or other Pacific Islander  1145 0.25450100</span></span>
<span><span class="co">##  5:         1                                     White  1188 0.26405868</span></span>
<span><span class="co">##  6:         1                                Other race  1150 0.25561236</span></span>
<span><span class="co">##  7:         1                      Prefer not to answer  2176 0.48366304</span></span>
<span><span class="co">##  8:         2                 African American or Black    79 0.22005571</span></span>
<span><span class="co">##  9:         2          American Indian or Alaska Native    78 0.21727019</span></span>
<span><span class="co">## 10:         2                                     Asian    68 0.18941504</span></span>
<span><span class="co">## 11:         2 Native Hawaiian or other Pacific Islander    94 0.26183844</span></span>
<span><span class="co">## 12:         2                                     White    87 0.24233983</span></span>
<span><span class="co">## 13:         2                                Other race    85 0.23676880</span></span>
<span><span class="co">## 14:         2                      Prefer not to answer   183 0.50974930</span></span>
<span><span class="co">## 15:         3          American Indian or Alaska Native     2 0.16666667</span></span>
<span><span class="co">## 16:         3                                     Asian     1 0.08333333</span></span>
<span><span class="co">## 17:         3 Native Hawaiian or other Pacific Islander     1 0.08333333</span></span>
<span><span class="co">## 18:         3                                     White     2 0.16666667</span></span>
<span><span class="co">## 19:         3                                Other race     1 0.08333333</span></span>
<span><span class="co">## 20:         3                      Prefer not to answer     9 0.75000000</span></span>
<span><span class="co">## 21:         4                 African American or Black     9 0.20454545</span></span>
<span><span class="co">## 22:         4          American Indian or Alaska Native    11 0.25000000</span></span>
<span><span class="co">## 23:         4                                     Asian    11 0.25000000</span></span>
<span><span class="co">## 24:         4 Native Hawaiian or other Pacific Islander     9 0.20454545</span></span>
<span><span class="co">## 25:         4                                     White    10 0.22727273</span></span>
<span><span class="co">## 26:         4                                Other race    10 0.22727273</span></span>
<span><span class="co">## 27:         4                      Prefer not to answer    22 0.50000000</span></span>
<span><span class="co">## 28:         5                 African American or Black     2 0.25000000</span></span>
<span><span class="co">## 29:         5          American Indian or Alaska Native     2 0.25000000</span></span>
<span><span class="co">## 30:         5                                     Asian     2 0.25000000</span></span>
<span><span class="co">## 31:         5 Native Hawaiian or other Pacific Islander     3 0.37500000</span></span>
<span><span class="co">## 32:         5                                     White     1 0.12500000</span></span>
<span><span class="co">## 33:         5                                Other race     2 0.25000000</span></span>
<span><span class="co">## 34:         5                      Prefer not to answer     3 0.37500000</span></span>
<span><span class="co">## 35:         6                 African American or Black    24 0.27586207</span></span>
<span><span class="co">## 36:         6          American Indian or Alaska Native    21 0.24137931</span></span>
<span><span class="co">## 37:         6                                     Asian    17 0.19540230</span></span>
<span><span class="co">## 38:         6 Native Hawaiian or other Pacific Islander    18 0.20689655</span></span>
<span><span class="co">## 39:         6                                     White    16 0.18390805</span></span>
<span><span class="co">## 40:         6                                Other race    27 0.31034483</span></span>
<span><span class="co">## 41:         6                      Prefer not to answer    43 0.49425287</span></span>
<span><span class="co">## 42:         7                 African American or Black    21 0.24418605</span></span>
<span><span class="co">## 43:         7          American Indian or Alaska Native    21 0.24418605</span></span>
<span><span class="co">## 44:         7                                     Asian    15 0.17441860</span></span>
<span><span class="co">## 45:         7 Native Hawaiian or other Pacific Islander    24 0.27906977</span></span>
<span><span class="co">## 46:         7                                     White    20 0.23255814</span></span>
<span><span class="co">## 47:         7                                Other race    21 0.24418605</span></span>
<span><span class="co">## 48:         7                      Prefer not to answer    43 0.50000000</span></span>
<span><span class="co">## 49:         8                 African American or Black  2422 0.25956489</span></span>
<span><span class="co">## 50:         8          American Indian or Alaska Native  2341 0.25088415</span></span>
<span><span class="co">## 51:         8                                     Asian  2333 0.25002679</span></span>
<span><span class="co">## 52:         8 Native Hawaiian or other Pacific Islander  2457 0.26331583</span></span>
<span><span class="co">## 53:         8                                     White  2503 0.26824563</span></span>
<span><span class="co">## 54:         8                                Other race  2375 0.25452792</span></span>
<span><span class="co">## 55:         8                      Prefer not to answer  4456 0.47754796</span></span>
<span><span class="co">## 56:        10                 African American or Black    19 0.19587629</span></span>
<span><span class="co">## 57:        10          American Indian or Alaska Native    26 0.26804124</span></span>
<span><span class="co">## 58:        10                                     Asian    24 0.24742268</span></span>
<span><span class="co">## 59:        10 Native Hawaiian or other Pacific Islander    20 0.20618557</span></span>
<span><span class="co">## 60:        10                                     White    17 0.17525773</span></span>
<span><span class="co">## 61:        10                                Other race    21 0.21649485</span></span>
<span><span class="co">## 62:        10                      Prefer not to answer    51 0.52577320</span></span>
<span><span class="co">## 63:        11                 African American or Black    18 0.33962264</span></span>
<span><span class="co">## 64:        11          American Indian or Alaska Native    14 0.26415094</span></span>
<span><span class="co">## 65:        11                                     Asian    18 0.33962264</span></span>
<span><span class="co">## 66:        11 Native Hawaiian or other Pacific Islander    16 0.30188679</span></span>
<span><span class="co">## 67:        11                                     White    15 0.28301887</span></span>
<span><span class="co">## 68:        11                                Other race    16 0.30188679</span></span>
<span><span class="co">## 69:        11                      Prefer not to answer    22 0.41509434</span></span>
<span><span class="co">## 70:        12                 African American or Black     4 0.33333333</span></span>
<span><span class="co">## 71:        12          American Indian or Alaska Native     3 0.25000000</span></span>
<span><span class="co">## 72:        12                                     Asian     1 0.08333333</span></span>
<span><span class="co">## 73:        12 Native Hawaiian or other Pacific Islander     4 0.33333333</span></span>
<span><span class="co">## 74:        12                                     White     5 0.41666667</span></span>
<span><span class="co">## 75:        12                                Other race     2 0.16666667</span></span>
<span><span class="co">## 76:        12                      Prefer not to answer     6 0.50000000</span></span>
<span><span class="co">## 77:        13                 African American or Black   206 0.24700240</span></span>
<span><span class="co">## 78:        13          American Indian or Alaska Native   189 0.22661871</span></span>
<span><span class="co">## 79:        13                                     Asian   184 0.22062350</span></span>
<span><span class="co">## 80:        13 Native Hawaiian or other Pacific Islander   210 0.25179856</span></span>
<span><span class="co">## 81:        13                                     White   220 0.26378897</span></span>
<span><span class="co">## 82:        13                                Other race   196 0.23501199</span></span>
<span><span class="co">## 83:        13                      Prefer not to answer   425 0.50959233</span></span>
<span><span class="co">## 84:        14                 African American or Black     5 0.16129032</span></span>
<span><span class="co">## 85:        14          American Indian or Alaska Native     8 0.25806452</span></span>
<span><span class="co">## 86:        14                                     Asian     8 0.25806452</span></span>
<span><span class="co">## 87:        14 Native Hawaiian or other Pacific Islander     7 0.22580645</span></span>
<span><span class="co">## 88:        14                                     White     5 0.16129032</span></span>
<span><span class="co">## 89:        14                                Other race     6 0.19354839</span></span>
<span><span class="co">## 90:        14                      Prefer not to answer    16 0.51612903</span></span>
<span><span class="co">##     mode_type                                      race count       prop</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     mode_type                                      race count       prop</span></span>
<span><span class="co">##  1:         1                 African American or Black  1173 0.26371389</span></span>
<span><span class="co">##  2:         1          American Indian or Alaska Native  1149 0.26062794</span></span>
<span><span class="co">##  3:         1                                     Asian  1095 0.25433099</span></span>
<span><span class="co">##  4:         1 Native Hawaiian or other Pacific Islander  1145 0.25516511</span></span>
<span><span class="co">##  5:         1                                     White  1188 0.26543213</span></span>
<span><span class="co">##  6:         1                                Other race  1150 0.25876904</span></span>
<span><span class="co">##  7:         1                      Prefer not to answer  2176 0.48830386</span></span>
<span><span class="co">##  8:         2                 African American or Black    79 0.19397957</span></span>
<span><span class="co">##  9:         2          American Indian or Alaska Native    78 0.21172220</span></span>
<span><span class="co">## 10:         2                                     Asian    68 0.17892850</span></span>
<span><span class="co">## 11:         2 Native Hawaiian or other Pacific Islander    94 0.25340427</span></span>
<span><span class="co">## 12:         2                                     White    87 0.22521979</span></span>
<span><span class="co">## 13:         2                                Other race    85 0.21375366</span></span>
<span><span class="co">## 14:         2                      Prefer not to answer   183 0.53651236</span></span>
<span><span class="co">## 15:         3          American Indian or Alaska Native     2 0.07054228</span></span>
<span><span class="co">## 16:         3                                     Asian     1 0.15625000</span></span>
<span><span class="co">## 17:         3 Native Hawaiian or other Pacific Islander     1 0.03791360</span></span>
<span><span class="co">## 18:         3                                     White     2 0.18887868</span></span>
<span><span class="co">## 19:         3                                Other race     1 0.03791360</span></span>
<span><span class="co">## 20:         3                      Prefer not to answer     9 0.77320772</span></span>
<span><span class="co">## 21:         4                 African American or Black     9 0.28639091</span></span>
<span><span class="co">## 22:         4          American Indian or Alaska Native    11 0.26956561</span></span>
<span><span class="co">## 23:         4                                     Asian    11 0.29396906</span></span>
<span><span class="co">## 24:         4 Native Hawaiian or other Pacific Islander     9 0.24547792</span></span>
<span><span class="co">## 25:         4                                     White    10 0.32080834</span></span>
<span><span class="co">## 26:         4                                Other race    10 0.27299382</span></span>
<span><span class="co">## 27:         4                      Prefer not to answer    22 0.40254409</span></span>
<span><span class="co">## 28:         5                 African American or Black     2 0.33090297</span></span>
<span><span class="co">## 29:         5          American Indian or Alaska Native     2 0.18508132</span></span>
<span><span class="co">## 30:         5                                     Asian     2 0.32978127</span></span>
<span><span class="co">## 31:         5 Native Hawaiian or other Pacific Islander     3 0.46120770</span></span>
<span><span class="co">## 32:         5                                     White     1 0.16806880</span></span>
<span><span class="co">## 33:         5                                Other race     2 0.33501589</span></span>
<span><span class="co">## 34:         5                      Prefer not to answer     3 0.31706861</span></span>
<span><span class="co">## 35:         6                 African American or Black    24 0.29466198</span></span>
<span><span class="co">## 36:         6          American Indian or Alaska Native    21 0.22747852</span></span>
<span><span class="co">## 37:         6                                     Asian    17 0.19717750</span></span>
<span><span class="co">## 38:         6 Native Hawaiian or other Pacific Islander    18 0.19435058</span></span>
<span><span class="co">## 39:         6                                     White    16 0.19828176</span></span>
<span><span class="co">## 40:         6                                Other race    27 0.33450385</span></span>
<span><span class="co">## 41:         6                      Prefer not to answer    43 0.49574858</span></span>
<span><span class="co">## 42:         7                 African American or Black    21 0.26624869</span></span>
<span><span class="co">## 43:         7          American Indian or Alaska Native    21 0.23157816</span></span>
<span><span class="co">## 44:         7                                     Asian    15 0.20025478</span></span>
<span><span class="co">## 45:         7 Native Hawaiian or other Pacific Islander    24 0.26315132</span></span>
<span><span class="co">## 46:         7                                     White    20 0.26202728</span></span>
<span><span class="co">## 47:         7                                Other race    21 0.28235999</span></span>
<span><span class="co">## 48:         7                      Prefer not to answer    43 0.51571165</span></span>
<span><span class="co">## 49:         8                 African American or Black  2422 0.26321795</span></span>
<span><span class="co">## 50:         8          American Indian or Alaska Native  2341 0.25013558</span></span>
<span><span class="co">## 51:         8                                     Asian  2333 0.25196235</span></span>
<span><span class="co">## 52:         8 Native Hawaiian or other Pacific Islander  2457 0.26776841</span></span>
<span><span class="co">## 53:         8                                     White  2503 0.27305121</span></span>
<span><span class="co">## 54:         8                                Other race  2375 0.25516272</span></span>
<span><span class="co">## 55:         8                      Prefer not to answer  4456 0.48266802</span></span>
<span><span class="co">## 56:        10                 African American or Black    19 0.23781573</span></span>
<span><span class="co">## 57:        10          American Indian or Alaska Native    26 0.28499847</span></span>
<span><span class="co">## 58:        10                                     Asian    24 0.31129972</span></span>
<span><span class="co">## 59:        10 Native Hawaiian or other Pacific Islander    20 0.23196646</span></span>
<span><span class="co">## 60:        10                                     White    17 0.18989672</span></span>
<span><span class="co">## 61:        10                                Other race    21 0.26256263</span></span>
<span><span class="co">## 62:        10                      Prefer not to answer    51 0.51011351</span></span>
<span><span class="co">## 63:        11                 African American or Black    18 0.31075683</span></span>
<span><span class="co">## 64:        11          American Indian or Alaska Native    14 0.25281912</span></span>
<span><span class="co">## 65:        11                                     Asian    18 0.37686026</span></span>
<span><span class="co">## 66:        11 Native Hawaiian or other Pacific Islander    16 0.29131465</span></span>
<span><span class="co">## 67:        11                                     White    15 0.22994804</span></span>
<span><span class="co">## 68:        11                                Other race    16 0.29364771</span></span>
<span><span class="co">## 69:        11                      Prefer not to answer    22 0.41008873</span></span>
<span><span class="co">## 70:        12                 African American or Black     4 0.30108384</span></span>
<span><span class="co">## 71:        12          American Indian or Alaska Native     3 0.29693975</span></span>
<span><span class="co">## 72:        12                                     Asian     1 0.06391457</span></span>
<span><span class="co">## 73:        12 Native Hawaiian or other Pacific Islander     4 0.33854001</span></span>
<span><span class="co">## 74:        12                                     White     5 0.30554670</span></span>
<span><span class="co">## 75:        12                                Other race     2 0.12320689</span></span>
<span><span class="co">## 76:        12                      Prefer not to answer     6 0.53825311</span></span>
<span><span class="co">## 77:        13                 African American or Black   206 0.26177265</span></span>
<span><span class="co">## 78:        13          American Indian or Alaska Native   189 0.22290264</span></span>
<span><span class="co">## 79:        13                                     Asian   184 0.22623925</span></span>
<span><span class="co">## 80:        13 Native Hawaiian or other Pacific Islander   210 0.25100439</span></span>
<span><span class="co">## 81:        13                                     White   220 0.25915925</span></span>
<span><span class="co">## 82:        13                                Other race   196 0.24087949</span></span>
<span><span class="co">## 83:        13                      Prefer not to answer   425 0.51959585</span></span>
<span><span class="co">## 84:        14                 African American or Black     5 0.21787414</span></span>
<span><span class="co">## 85:        14          American Indian or Alaska Native     8 0.32953086</span></span>
<span><span class="co">## 86:        14                                     Asian     8 0.34955050</span></span>
<span><span class="co">## 87:        14 Native Hawaiian or other Pacific Islander     7 0.25783788</span></span>
<span><span class="co">## 88:        14                                     White     5 0.25043439</span></span>
<span><span class="co">## 89:        14                                Other race     6 0.25542041</span></span>
<span><span class="co">## 90:        14                      Prefer not to answer    16 0.39948629</span></span>
<span><span class="co">##     mode_type                                      race count       prop</span></span>
<span><span class="co">##         prop_se     est     est_se wtd_group_n</span></span>
<span><span class="co">##  1: 0.007521060  590587 19751.7986     2239499</span></span>
<span><span class="co">##  2: 0.007495255  583676 19648.7332     2239499</span></span>
<span><span class="co">##  3: 0.007466454  569574 19535.6370     2239499</span></span>
<span><span class="co">##  4: 0.007414976  571442 19331.1747     2239499</span></span>
<span><span class="co">##  5: 0.007526441  594435 19772.6450     2239499</span></span>
<span><span class="co">##  6: 0.007461661  579513 19514.5648     2239499</span></span>
<span><span class="co">##  7: 0.008563971 1093556 26811.8530     2239499</span></span>
<span><span class="co">##  8: 0.022599934   34089  4414.1432      175735</span></span>
<span><span class="co">##  9: 0.024164798   37207  4823.3924      175735</span></span>
<span><span class="co">## 10: 0.022551372   31444  4410.9500      175735</span></span>
<span><span class="co">## 11: 0.026088794   44532  5374.6399      175735</span></span>
<span><span class="co">## 12: 0.024342203   39579  4866.3344      175735</span></span>
<span><span class="co">## 13: 0.023920166   37564  4755.1810      175735</span></span>
<span><span class="co">## 14: 0.030021051   94284  7888.2174      175735</span></span>
<span><span class="co">## 15: 0.052699591     307   217.6892        4352</span></span>
<span><span class="co">## 16: 0.140949165     680   680.0000        4352</span></span>
<span><span class="co">## 17: 0.038857534     165   165.0000        4352</span></span>
<span><span class="co">## 18: 0.142679479     822   694.6670        4352</span></span>
<span><span class="co">## 19: 0.038857534     165   165.0000        4352</span></span>
<span><span class="co">## 20: 0.145603070    3365  1371.4699        4352</span></span>
<span><span class="co">## 21: 0.080437905    6349  2240.6010       22169</span></span>
<span><span class="co">## 22: 0.076052484    5976  2049.5226       22169</span></span>
<span><span class="co">## 23: 0.077637475    6517  2123.5988       22169</span></span>
<span><span class="co">## 24: 0.075599347    5442  2022.4376       22169</span></span>
<span><span class="co">## 25: 0.082213793    7112  2351.4577       22169</span></span>
<span><span class="co">## 26: 0.077765448    6052  2120.6468       22169</span></span>
<span><span class="co">## 27: 0.079192007    8924  2139.0479       22169</span></span>
<span><span class="co">## 28: 0.186600411    1770  1251.7298        5349</span></span>
<span><span class="co">## 29: 0.133384954     990   759.3249        5349</span></span>
<span><span class="co">## 30: 0.186290950    1764  1247.4276        5349</span></span>
<span><span class="co">## 31: 0.192933642    2467  1431.8735        5349</span></span>
<span><span class="co">## 32: 0.151516165     899   899.0000        5349</span></span>
<span><span class="co">## 33: 0.187681926    1792  1267.1366        5349</span></span>
<span><span class="co">## 34: 0.178382865    1696  1148.1009        5349</span></span>
<span><span class="co">## 35: 0.055114087   13342  2984.7356       45279</span></span>
<span><span class="co">## 36: 0.049043617   10300  2506.0621       45279</span></span>
<span><span class="co">## 37: 0.048517999    8928  2474.9189       45279</span></span>
<span><span class="co">## 38: 0.046308723    8800  2326.6173       45279</span></span>
<span><span class="co">## 39: 0.049260333    8978  2524.8655       45279</span></span>
<span><span class="co">## 40: 0.057426192   15146  3218.0346       45279</span></span>
<span><span class="co">## 41: 0.060813165   22447  3978.0761       45279</span></span>
<span><span class="co">## 42: 0.056861230   10659  2706.3282       40034</span></span>
<span><span class="co">## 43: 0.053446701    9271  2467.7153       40034</span></span>
<span><span class="co">## 44: 0.051527293    8017  2345.8605       40034</span></span>
<span><span class="co">## 45: 0.056127613   10535  2652.5818       40034</span></span>
<span><span class="co">## 46: 0.055797849   10490  2628.6720       40034</span></span>
<span><span class="co">## 47: 0.058773581   11304  2854.9687       40034</span></span>
<span><span class="co">## 48: 0.063825811   20646  3690.9426       40034</span></span>
<span><span class="co">## 49: 0.005203138 1231387 28332.1942     4678203</span></span>
<span><span class="co">## 50: 0.005116724 1170185 27637.5572     4678203</span></span>
<span><span class="co">## 51: 0.005134471 1178731 27779.5760     4678203</span></span>
<span><span class="co">## 52: 0.005248280 1252675 28712.6809     4678203</span></span>
<span><span class="co">## 53: 0.005278611 1277389 28969.5310     4678203</span></span>
<span><span class="co">## 54: 0.005139851 1193703 27816.7752     4678203</span></span>
<span><span class="co">## 55: 0.005936967 2258019 38295.4940     4678203</span></span>
<span><span class="co">## 56: 0.051116600   11628  2965.5116       48895</span></span>
<span><span class="co">## 57: 0.051754394   13935  3038.6851       48895</span></span>
<span><span class="co">## 58: 0.054519915   15221  3324.7134       48895</span></span>
<span><span class="co">## 59: 0.049258980   11342  2814.1460       48895</span></span>
<span><span class="co">## 60: 0.045780759    9285  2543.1649       48895</span></span>
<span><span class="co">## 61: 0.052387775   12838  3088.3310       48895</span></span>
<span><span class="co">## 62: 0.057635458   24942  3991.9477       48895</span></span>
<span><span class="co">## 63: 0.072982647    8791  2487.8448       28289</span></span>
<span><span class="co">## 64: 0.068914514    7152  2262.1340       28289</span></span>
<span><span class="co">## 65: 0.076902249   10661  2784.2457       28289</span></span>
<span><span class="co">## 66: 0.070817274    8241  2360.7733       28289</span></span>
<span><span class="co">## 67: 0.063881177    6505  2024.8278       28289</span></span>
<span><span class="co">## 68: 0.071296301    8307  2387.9966       28289</span></span>
<span><span class="co">## 69: 0.077086742   11601  2802.2847       28289</span></span>
<span><span class="co">## 70: 0.142535861    1889  1008.0910        6274</span></span>
<span><span class="co">## 71: 0.154063036    1863  1163.4025        6274</span></span>
<span><span class="co">## 72: 0.063368644     401   401.0000        6274</span></span>
<span><span class="co">## 73: 0.156085712    2124  1192.3160        6274</span></span>
<span><span class="co">## 74: 0.142806765    1917  1008.4793        6274</span></span>
<span><span class="co">## 75: 0.111008499     773   745.5257        6274</span></span>
<span><span class="co">## 76: 0.165739202    3377  1544.1139        6274</span></span>
<span><span class="co">## 77: 0.017327203  111484  8690.1437      425881</span></span>
<span><span class="co">## 78: 0.016211618   94930  7891.0872      425881</span></span>
<span><span class="co">## 79: 0.016475113   96351  8071.0462      425881</span></span>
<span><span class="co">## 80: 0.017035182  106898  8469.7402      425881</span></span>
<span><span class="co">## 81: 0.017218169  110371  8606.6809      425881</span></span>
<span><span class="co">## 82: 0.016808579  102586  8305.0090      425881</span></span>
<span><span class="co">## 83: 0.019747128  221286 12214.0113      425881</span></span>
<span><span class="co">## 84: 0.089745276    2884  1418.4716       13237</span></span>
<span><span class="co">## 85: 0.099541462    4362  1704.0613       13237</span></span>
<span><span class="co">## 86: 0.102184473    4627  1800.9467       13237</span></span>
<span><span class="co">## 87: 0.093495068    3413  1514.9622       13237</span></span>
<span><span class="co">## 88: 0.095464165    3315  1556.3302       13237</span></span>
<span><span class="co">## 89: 0.095448565    3381  1558.7443       13237</span></span>
<span><span class="co">## 90: 0.095344414    5288  1508.6015       13237</span></span>
<span><span class="co">##         prop_se     est     est_se wtd_group_n</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
<p><code>summarize_by</code> can be used with an unlimited amount of
variables. To use more than one <code>summarize_by</code> variable pass
a vector to the argument.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mode_type_race_ethnicity_list</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_variable.html">hts_prep_variable</a></span><span class="op">(</span></span>
<span>  summarize_var <span class="op">=</span> <span class="st">"mode_type"</span>,</span>
<span>  summarize_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"race"</span>, <span class="st">"ethnicity"</span><span class="op">)</span>,</span>
<span>  variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"hh"</span> <span class="op">=</span> <span class="va">hh</span>,</span>
<span>    <span class="st">"person"</span> <span class="op">=</span> <span class="va">person</span>,</span>
<span>    <span class="st">"day"</span> <span class="op">=</span> <span class="va">day</span>,</span>
<span>    <span class="st">"trip"</span> <span class="op">=</span> <span class="va">trip</span>,</span>
<span>    <span class="st">"vehicle"</span> <span class="op">=</span> <span class="va">vehicle</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_ethnicity_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span></span>
<span>  prepped_dt <span class="op">=</span> <span class="va">mode_type_race_ethnicity_list</span><span class="op">$</span><span class="va">cat</span>,</span>
<span>  summarize_var <span class="op">=</span> <span class="st">"mode_type"</span>,</span>
<span>  summarize_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"race"</span>, <span class="st">"ethnicity"</span><span class="op">)</span>,</span>
<span>  wtname <span class="op">=</span> <span class="st">"trip_weight"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mode_by_race_ethnicity_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                                 race                                  ethnicity</span></span>
<span><span class="co">##  1:        African American or Black                                      Cuban</span></span>
<span><span class="co">##  2:        African American or Black                                      Cuban</span></span>
<span><span class="co">##  3:        African American or Black                                Two or more</span></span>
<span><span class="co">##  4:        African American or Black                                Two or more</span></span>
<span><span class="co">##  5:        African American or Black                                Two or more</span></span>
<span><span class="co">##  6:        African American or Black                       Prefer not to answer</span></span>
<span><span class="co">##  7:        African American or Black                       Prefer not to answer</span></span>
<span><span class="co">##  8:        African American or Black                       Prefer not to answer</span></span>
<span><span class="co">##  9:        African American or Black                       Prefer not to answer</span></span>
<span><span class="co">## 10: American Indian or Alaska Native Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##     mode_type count       prop   est</span></span>
<span><span class="co">##  1:         8    20 0.85193115  9948</span></span>
<span><span class="co">##  2:         1     4 0.14806885  1729</span></span>
<span><span class="co">##  3:         8    19 0.61909727  8312</span></span>
<span><span class="co">##  4:         1     6 0.28318189  3802</span></span>
<span><span class="co">##  5:        13     2 0.09772084  1312</span></span>
<span><span class="co">##  6:         8    29 0.60140470 14471</span></span>
<span><span class="co">##  7:         1    12 0.26568864  6393</span></span>
<span><span class="co">##  8:        13     4 0.06707672  1614</span></span>
<span><span class="co">##  9:         2     3 0.06582994  1584</span></span>
<span><span class="co">## 10:         1     4 0.18561680  1768</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="calculating-trip-rates">Calculating trip rates<a class="anchor" aria-label="anchor" href="#calculating-trip-rates"></a>
</h3>
<p><code>hts_summary</code> can also be used to calculate trip
rates.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">employment_triprate_list</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_triprate.html">hts_prep_triprate</a></span><span class="op">(</span></span>
<span>  summarize_by <span class="op">=</span> <span class="st">"employment"</span>,</span>
<span>  variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>  trip_name <span class="op">=</span> <span class="st">"trip"</span>,</span>
<span>  day_name <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>  hts_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"hh"</span> <span class="op">=</span> <span class="va">hh</span>,</span>
<span>    <span class="st">"person"</span> <span class="op">=</span> <span class="va">person</span>,</span>
<span>    <span class="st">"day"</span> <span class="op">=</span> <span class="va">day</span>,</span>
<span>    <span class="st">"trip"</span> <span class="op">=</span> <span class="va">trip</span>,</span>
<span>    <span class="st">"vehicle"</span> <span class="op">=</span> <span class="va">vehicle</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">trip_rate_by_employment_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span></span>
<span>  prepped_dt <span class="op">=</span> <span class="va">employment_triprate_list</span><span class="op">$</span><span class="va">num</span>,</span>
<span>  summarize_var <span class="op">=</span> <span class="st">"num_trips_wtd"</span>,</span>
<span>  summarize_by <span class="op">=</span> <span class="st">"employment"</span>,</span>
<span>  summarize_vartype <span class="op">=</span> <span class="st">"numeric"</span>,</span>
<span>  weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  wtname <span class="op">=</span> <span class="st">"day_weight"</span>,</span>
<span>  se <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    employment count       min       max     mean    mean_se   median</span></span>
<span><span class="co">## 1:          1  1798 0.0000000 391.81818 3.810070 0.07239468 2.745520</span></span>
<span><span class="co">## 2:          2   298 0.0000000 130.57143 4.064631 0.18903924 3.023569</span></span>
<span><span class="co">## 3:          3   246 0.0000000 186.50000 3.685040 0.18526271 2.721311</span></span>
<span><span class="co">## 4:          5   982 0.0000000 246.71429 3.855805 0.10134559 2.697699</span></span>
<span><span class="co">## 5:          6   182 0.0000000 163.23529 4.033846 0.23908385 2.775264</span></span>
<span><span class="co">## 6:          7    28 0.2647059 165.04545 3.851056 0.66241644 2.773455</span></span>
<span><span class="co">## 7:          8    30 0.7719101  26.95098 4.065571 0.58654865 3.592087</span></span>
<span><span class="co">## 8:        995   561 0.0000000 299.10000 4.031359 0.13624559 2.922734</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="labeling-values">Labeling Values<a class="anchor" aria-label="anchor" href="#labeling-values"></a>
</h3>
<p>To label values we can use <code>factorize_column</code>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span><span class="op">$</span><span class="va">employment</span> <span class="op">=</span> <span class="fu"><a href="../reference/factorize_column.html">factorize_column</a></span><span class="op">(</span></span>
<span>  <span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span><span class="op">$</span><span class="va">employment</span>,</span>
<span>  <span class="st">"employment"</span>,</span>
<span>  <span class="va">value_labels</span>,</span>
<span>  variable_colname <span class="op">=</span> <span class="st">"variable"</span>,</span>
<span>  value_colname <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>  value_label_colname <span class="op">=</span> <span class="st">"label"</span>,</span>
<span>  value_order_colname <span class="op">=</span> <span class="st">"val_order"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                                             employment</span></span>
<span><span class="co">## 1:                                           Employed full-time (35+ hours/week, paid)</span></span>
<span><span class="co">## 2:                                 Employed part-time (fewer than 35 hours/week, paid)</span></span>
<span><span class="co">## 3:                                                                       Self-employed</span></span>
<span><span class="co">## 4: Not employed and not looking for work (e.g., retired, stay-at-home parent, student)</span></span>
<span><span class="co">## 5:                                                     Unemployed and looking for work</span></span>
<span><span class="co">## 6:                                                          Unpaid volunteer or intern</span></span>
<span><span class="co">## 7:               Employed, but not currently working (e.g., on leave, furloughed 100%)</span></span>
<span><span class="co">## 8:                                                                    Missing Response</span></span>
<span><span class="co">##    count       min       max     mean    mean_se   median</span></span>
<span><span class="co">## 1:  1798 0.0000000 391.81818 3.810070 0.07239468 2.745520</span></span>
<span><span class="co">## 2:   298 0.0000000 130.57143 4.064631 0.18903924 3.023569</span></span>
<span><span class="co">## 3:   246 0.0000000 186.50000 3.685040 0.18526271 2.721311</span></span>
<span><span class="co">## 4:   982 0.0000000 246.71429 3.855805 0.10134559 2.697699</span></span>
<span><span class="co">## 5:   182 0.0000000 163.23529 4.033846 0.23908385 2.775264</span></span>
<span><span class="co">## 6:    28 0.2647059 165.04545 3.851056 0.66241644 2.773455</span></span>
<span><span class="co">## 7:    30 0.7719101  26.95098 4.065571 0.58654865 3.592087</span></span>
<span><span class="co">## 8:   561 0.0000000 299.10000 4.031359 0.13624559 2.922734</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="creating-visuals-using-hts_summary-output">Creating Visuals using hts_summary output<a class="anchor" aria-label="anchor" href="#creating-visuals-using-hts_summary-output"></a>
</h3>
<p><code>hts_summary</code> creates outputs that can easily be used to
create visuals.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: package 'ggplot2' was built under R version 4.3.2</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>  <span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>,</span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mean</span>, y <span class="op">=</span> <span class="va">employment</span>, label <span class="op">=</span> <span class="va">count</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_errorbar</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      xmin <span class="op">=</span> <span class="op">(</span><span class="va">mean</span> <span class="op">-</span> <span class="va">mean_se</span><span class="op">)</span>,</span>
<span>      xmax <span class="op">=</span> <span class="op">(</span><span class="va">mean</span> <span class="op">+</span> <span class="va">mean_se</span><span class="op">)</span>,</span>
<span>      width <span class="op">=</span> <span class="fl">.2</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Mean Trip Rate"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Employment"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span></span>
<span>    labels <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="va">x</span>, width <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span>
<span>    limits <span class="op">=</span> <span class="va">rev</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="a01_getting_started_files/figure-html/ggplot_example-1.png" width="768"></p>
</div>
<div class="section level3">
<h3 id="summarizing-a-new-variable">Summarizing a new variable<a class="anchor" aria-label="anchor" href="#summarizing-a-new-variable"></a>
</h3>
<p>To summarize a new variable with <code>hts_summary</code> it must
first be added to the <code>variable_list</code> and
<code>value_labels</code>. In this example we are creating a new
variable called <code>hh_size</code> that we want to summarize.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_data</span><span class="op">$</span><span class="va">hh</span><span class="op">[</span>, <span class="va">hh_size</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">num_people</span> <span class="op">&lt;</span> <span class="fl">4</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">variable_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>  <span class="va">variable_list</span>,</span>
<span>  <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"hh_size"</span>,</span>
<span>    is_checkbox <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    hh <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    person <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    day <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    trip <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    vehicle <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Household size"</span>,</span>
<span>    data_type <span class="op">=</span> <span class="st">"integer/categorical"</span>,</span>
<span>    shared_name <span class="op">=</span> <span class="st">"hh_size"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">value_labels</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>  <span class="va">value_labels</span>,</span>
<span>  <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"hh_size"</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>    value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>    label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Small household"</span>, <span class="st">"Large household"</span><span class="op">)</span>,</span>
<span>    val_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">214</span><span class="op">:</span><span class="fl">215</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">hh_size_list</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_variable.html">hts_prep_variable</a></span><span class="op">(</span></span>
<span>  summarize_var <span class="op">=</span> <span class="st">"hh_size"</span>,</span>
<span>  variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>  data <span class="op">=</span> <span class="va">test_data</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">hh_size_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span></span>
<span>  prepped_dt <span class="op">=</span> <span class="va">hh_size_list</span><span class="op">$</span><span class="va">cat</span>,</span>
<span>  summarize_var <span class="op">=</span> <span class="st">"hh_size"</span>,</span>
<span>  summarize_vartype <span class="op">=</span> <span class="st">"categorical"</span>,</span>
<span>  weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  wtname <span class="op">=</span> <span class="st">"hh_weight"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/factorize_df.html">factorize_df</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">hh_size_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="va">value_labels</span>, value_label_colname <span class="op">=</span> <span class="st">"label"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##            hh_size count      prop    est</span></span>
<span><span class="co">## 1: Small household   842 0.8400047 436054</span></span>
<span><span class="co">## 2: Large household   158 0.1599953  83055</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by RSG Inc., Ashley Asmus, Erika Redding, Jacob Moore, James Clark, Matt Landis.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
