<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="travelSurveyTools">
<title>Getting Started • travelSurveyTools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="travelSurveyTools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">travelSurveyTools</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/geographic_summaries.html">Creating user-specified geographic summaries</a>
    <a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a>
    <a class="dropdown-item" href="../articles/trip_rates.html">Creating summaries of trip rates</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/RSGInc/travelSurveyTools/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/RSGInc/travelSurveyTools/blob/HEAD/vignettes/getting_started.Rmd" class="external-link"><code>vignettes/getting_started.Rmd</code></a></small>
      <div class="d-none name"><code>getting_started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="about-travelsurveytools">About TravelSurveyTools<a class="anchor" aria-label="anchor" href="#about-travelsurveytools"></a>
</h2>
<p>The <code>travelSurveyTools</code> package provides tools for R users
to aid use of data from household travel surveys. Some possible uses
include creating custom cross tabs, labeling data, and calculating trip
rates.</p>
</div>
<div class="section level2">
<h2 id="data-assumptions">Data Assumptions<a class="anchor" aria-label="anchor" href="#data-assumptions"></a>
</h2>
<p><code>travelSurveyTools</code> assumes the the data have the
structure shown below. If this does not reflect the structure of your
data</p>
<div class="section level3">
<h3 id="hts_data">hts_data<a class="anchor" aria-label="anchor" href="#hts_data"></a>
</h3>
<p>hts_data is a list of five core tables:</p>
<div class="section level4">
<h4 id="hh">hh<a class="anchor" aria-label="anchor" href="#hh"></a>
</h4>
<p>Household dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>survey variables asked on a household level</li>
<li>hh_weight: household weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="person">person<a class="anchor" aria-label="anchor" href="#person"></a>
</h4>
<p>Person dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>person_id: 10 digit person ID</li>
<li>survey variables asked on a person level</li>
<li>person_weight: person weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="day">day<a class="anchor" aria-label="anchor" href="#day"></a>
</h4>
<p>Day dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>person_id: 10 digit person ID</li>
<li>day_id: 12 digit day ID</li>
<li>survey variable asked on a day level</li>
<li>day_weight: day weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="trip">trip<a class="anchor" aria-label="anchor" href="#trip"></a>
</h4>
<p>Trip dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>person_id: 10 digit person ID</li>
<li>day_id: 12 digit day ID</li>
<li>trip_id: 13 digit trip ID</li>
<li>survey variables asked on a trip level</li>
<li>trip_weight: trip weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="vehicle">vehicle<a class="anchor" aria-label="anchor" href="#vehicle"></a>
</h4>
<p>Vehicle dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>vehicle_id: 10 digit vehicle ID</li>
<li>survey responses asked on a vehicle level</li>
<li>hh_weight: household weight</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="codebook">Codebook<a class="anchor" aria-label="anchor" href="#codebook"></a>
</h3>
<p>In addition to data from the household travel survey. The codebook is
also required. The codebook is assumed to be in two parts:</p>
<div class="section level4">
<h4 id="variable_list">variable_list<a class="anchor" aria-label="anchor" href="#variable_list"></a>
</h4>
<p>A dataset containing information about all variables existing in the
hh, person, day, trip, and vehicle tables. The variables are as
follows:</p>
<ul>
<li>variable: Name of the variable</li>
<li>is_checkbox: The variable is a ‘Select all that Apply’ question</li>
<li>hh: The variable exists in the hh table</li>
<li>person: The variable exists in the person table</li>
<li>day: The variable exists in the day table</li>
<li>trip: The variable exists in the trip table</li>
<li>vehicle: The variable exists in the vehicle table</li>
<li>location: The variable exists in the location table</li>
<li>data_type: Data type of the variable</li>
<li>description: A description of the variable</li>
<li>logic: Conditions where the variable should have a value</li>
<li>shared_name: the shared name of checkbox variable or the variable
name for non-checkbox variables</li>
</ul>
</div>
<div class="section level4">
<h4 id="value_labels">value_labels<a class="anchor" aria-label="anchor" href="#value_labels"></a>
</h4>
<p>A dataset containing the values for all variables found in
variable_list The variables are as follows:</p>
<ul>
<li>variable: Name of the variable</li>
<li>value: The numeric value of the variable</li>
<li>label: What the numeric value of the variable represents</li>
<li>label_value: value concatenated with the label (e.g., 11 85 or
older)</li>
<li>val_order: order for each variable label to appear in</li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="using-travelsurveytools">Using travelSurveyTools<a class="anchor" aria-label="anchor" href="#using-travelsurveytools"></a>
</h2>
<div class="section level3">
<h3 id="prepping-the-data">Prepping the Data<a class="anchor" aria-label="anchor" href="#prepping-the-data"></a>
</h3>
<p>In order to create summaries of our data we first need to prepare our
data. We can do this by using <code>hts_prep_data</code>. This will
return a categorical (cat) and numeric (num) (if applicable) prepped
data table that can be used to create summaries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RSGInc/travelSurveyTools" class="external-link">travelSurveyTools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: package 'data.table' was built under R version 4.3.2</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://gdfe.co/srvyr/" class="external-link">srvyr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: package 'srvyr' was built under R version 4.3.2</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"test_data"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"variable_list"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"value_labels"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="va">test_data</span><span class="op">)</span></span></code></pre></div>
<p>Numeric variables will be automatically binned in
<code>hts_prep_data</code> to create categorical summaries. Here we can
make a categorical summary of a numeric variable using
<code>hts_summary</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">## Key: &lt;speed_mph&gt;</span></span>
<span><span class="co">##     speed_mph count       prop</span></span>
<span><span class="co">##        &lt;fctr&gt; &lt;int&gt;      &lt;num&gt;</span></span>
<span><span class="co">## 1:  1 or less   720 0.04902962</span></span>
<span><span class="co">## 2:        1-9  6825 0.46475996</span></span>
<span><span class="co">## 3:       9-17  3494 0.23792986</span></span>
<span><span class="co">## 4:      17-25  1995 0.13585291</span></span>
<span><span class="co">## 5:      25-33   868 0.05910793</span></span>
<span><span class="co">## 6:      33-41   414 0.02819203</span></span>
<span><span class="co">## 7: 41 or more   369 0.02512768</span></span></code></pre>
<p>Additionally, for numeric variables we can create numeric
summaries.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_num_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">num</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'numeric'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_num_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##    count   min      max     mean  median</span></span>
<span><span class="co">##    &lt;int&gt; &lt;num&gt;    &lt;num&gt;    &lt;num&gt;   &lt;num&gt;</span></span>
<span><span class="co">## 1: 14685     0 112.9918 11.83172 8.63421</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="using-weighted-data">Using Weighted Data<a class="anchor" aria-label="anchor" href="#using-weighted-data"></a>
</h3>
<p>Additionally, we can use weighted data by setting
<code>weighted = TRUE</code> and specifying the name of the weight to be
used (<code>wtname</code>).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                wtname <span class="op">=</span> <span class="st">'trip_weight'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">## Key: &lt;speed_mph&gt;</span></span>
<span><span class="co">##     speed_mph count       prop</span></span>
<span><span class="co">##        &lt;fctr&gt; &lt;int&gt;      &lt;num&gt;</span></span>
<span><span class="co">## 1:  1 or less   720 0.04902962</span></span>
<span><span class="co">## 2:        1-9  6825 0.46475996</span></span>
<span><span class="co">## 3:       9-17  3494 0.23792986</span></span>
<span><span class="co">## 4:      17-25  1995 0.13585291</span></span>
<span><span class="co">## 5:      25-33   868 0.05910793</span></span>
<span><span class="co">## 6:      33-41   414 0.02819203</span></span>
<span><span class="co">## 7: 41 or more   369 0.02512768</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     speed_mph count       prop     est</span></span>
<span><span class="co">##        &lt;fctr&gt; &lt;int&gt;      &lt;num&gt;   &lt;int&gt;</span></span>
<span><span class="co">## 1:  1 or less   720 0.05017047  370818</span></span>
<span><span class="co">## 2:        1-9  6825 0.46380595 3428064</span></span>
<span><span class="co">## 3:       9-17  3494 0.23966211 1771381</span></span>
<span><span class="co">## 4:      17-25  1995 0.13432492  992817</span></span>
<span><span class="co">## 5:      25-33   868 0.05766713  426227</span></span>
<span><span class="co">## 6:      33-41   414 0.02801374  207054</span></span>
<span><span class="co">## 7: 41 or more   369 0.02635567  194799</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="calculating-standard-errors">Calculating Standard Errors<a class="anchor" aria-label="anchor" href="#calculating-standard-errors"></a>
</h3>
<p>Additionally, by specifying <code>se = TRUE</code> we can calculate
standard errors.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">## Key: &lt;speed_mph&gt;</span></span>
<span><span class="co">##     speed_mph count       prop</span></span>
<span><span class="co">##        &lt;fctr&gt; &lt;int&gt;      &lt;num&gt;</span></span>
<span><span class="co">## 1:  1 or less   720 0.04902962</span></span>
<span><span class="co">## 2:        1-9  6825 0.46475996</span></span>
<span><span class="co">## 3:       9-17  3494 0.23792986</span></span>
<span><span class="co">## 4:      17-25  1995 0.13585291</span></span>
<span><span class="co">## 5:      25-33   868 0.05910793</span></span>
<span><span class="co">## 6:      33-41   414 0.02819203</span></span>
<span><span class="co">## 7: 41 or more   369 0.02512768</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     speed_mph count       prop     prop_se     est   est_se</span></span>
<span><span class="co">##        &lt;fctr&gt; &lt;int&gt;      &lt;num&gt;       &lt;num&gt;   &lt;num&gt;    &lt;num&gt;</span></span>
<span><span class="co">## 1:  1 or less   720 0.05017047 0.002079083  370818 15469.78</span></span>
<span><span class="co">## 2:        1-9  6825 0.46380595 0.004737688 3428064 38508.63</span></span>
<span><span class="co">## 3:       9-17  3494 0.23966211 0.004069031 1771381 31295.73</span></span>
<span><span class="co">## 4:      17-25  1995 0.13432492 0.003228756  992817 24287.87</span></span>
<span><span class="co">## 5:      25-33   868 0.05766713 0.002192303  426227 16305.76</span></span>
<span><span class="co">## 6:      33-41   414 0.02801374 0.001560836  207054 11574.44</span></span>
<span><span class="co">## 7: 41 or more   369 0.02635567 0.001548421  194799 11492.05</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="summarizing-two-variables">Summarizing Two Variables<a class="anchor" aria-label="anchor" href="#summarizing-two-variables"></a>
</h3>
<p>If we want to summarize a variable by another variable (e.g., mode
type by a person’s race, mode_type by a person’s ethnicity, income by
study year) we can use the <code>summarize_by</code> argument.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                   summarize_by <span class="op">=</span> <span class="st">'race'</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="va">test_data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                   summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                                   summarize_by <span class="op">=</span> <span class="st">'race'</span>,</span>
<span>                                   summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                   weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                   wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                   se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">## Key: &lt;race&gt;</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##                                        &lt;fctr&gt;     &lt;int&gt; &lt;int&gt;        &lt;num&gt;</span></span>
<span><span class="co">##  1:                 African American or Black         1   146 0.3753213368</span></span>
<span><span class="co">##  2:                 African American or Black         3     4 0.0102827763</span></span>
<span><span class="co">##  3:                 African American or Black         4     1 0.0025706941</span></span>
<span><span class="co">##  4:                 African American or Black         6     1 0.0025706941</span></span>
<span><span class="co">##  5:                 African American or Black         7     1 0.0025706941</span></span>
<span><span class="co">##  6:                 African American or Black         8   180 0.4627249357</span></span>
<span><span class="co">##  7:                 African American or Black        11     3 0.0077120823</span></span>
<span><span class="co">##  8:                 African American or Black        13    53 0.1362467866</span></span>
<span><span class="co">##  9:          American Indian or Alaska Native         1     7 0.1521739130</span></span>
<span><span class="co">## 10:          American Indian or Alaska Native         8    36 0.7826086957</span></span>
<span><span class="co">## 11:          American Indian or Alaska Native        13     3 0.0652173913</span></span>
<span><span class="co">## 12:                                     Asian         1   689 0.3123300091</span></span>
<span><span class="co">## 13:                                     Asian         2    32 0.0145058930</span></span>
<span><span class="co">## 14:                                     Asian         4     2 0.0009066183</span></span>
<span><span class="co">## 15:                                     Asian         5     2 0.0009066183</span></span>
<span><span class="co">## 16:                                     Asian         6    12 0.0054397099</span></span>
<span><span class="co">## 17:                                     Asian         7    41 0.0185856754</span></span>
<span><span class="co">## 18:                                     Asian         8  1249 0.5661831369</span></span>
<span><span class="co">## 19:                                     Asian        11    30 0.0135992747</span></span>
<span><span class="co">## 20:                                     Asian        12     1 0.0004533092</span></span>
<span><span class="co">## 21:                                     Asian        13   141 0.0639165911</span></span>
<span><span class="co">## 22:                                     Asian        14     7 0.0031731641</span></span>
<span><span class="co">## 23: Native Hawaiian or other Pacific Islander         1    29 0.4531250000</span></span>
<span><span class="co">## 24: Native Hawaiian or other Pacific Islander         6     1 0.0156250000</span></span>
<span><span class="co">## 25: Native Hawaiian or other Pacific Islander         8    34 0.5312500000</span></span>
<span><span class="co">## 26:                                     White         1  2934 0.3034753827</span></span>
<span><span class="co">## 27:                                     White         2   242 0.0250310302</span></span>
<span><span class="co">## 28:                                     White         3     3 0.0003103020</span></span>
<span><span class="co">## 29:                                     White         4    26 0.0026892842</span></span>
<span><span class="co">## 30:                                     White         5     3 0.0003103020</span></span>
<span><span class="co">## 31:                                     White         6    36 0.0037236243</span></span>
<span><span class="co">## 32:                                     White         7    59 0.0061026065</span></span>
<span><span class="co">## 33:                                     White         8  5765 0.5962970625</span></span>
<span><span class="co">## 34:                                     White        10    14 0.0014480761</span></span>
<span><span class="co">## 35:                                     White        11    37 0.0038270583</span></span>
<span><span class="co">## 36:                                     White        12     8 0.0008274721</span></span>
<span><span class="co">## 37:                                     White        13   516 0.0533719487</span></span>
<span><span class="co">## 38:                                     White        14    25 0.0025858502</span></span>
<span><span class="co">## 39:                               Two or more         1   243 0.4111675127</span></span>
<span><span class="co">## 40:                               Two or more         2    10 0.0169204738</span></span>
<span><span class="co">## 41:                               Two or more         6     6 0.0101522843</span></span>
<span><span class="co">## 42:                               Two or more         8   270 0.4568527919</span></span>
<span><span class="co">## 43:                               Two or more        11     2 0.0033840948</span></span>
<span><span class="co">## 44:                               Two or more        13    60 0.1015228426</span></span>
<span><span class="co">## 45:                                Other race         1    51 0.2931034483</span></span>
<span><span class="co">## 46:                                Other race         5     1 0.0057471264</span></span>
<span><span class="co">## 47:                                Other race         6     1 0.0057471264</span></span>
<span><span class="co">## 48:                                Other race         8   104 0.5977011494</span></span>
<span><span class="co">## 49:                                Other race        11     3 0.0172413793</span></span>
<span><span class="co">## 50:                                Other race        13    13 0.0747126437</span></span>
<span><span class="co">## 51:                                Other race        14     1 0.0057471264</span></span>
<span><span class="co">## 52:                      Prefer not to answer         1   358 0.3455598456</span></span>
<span><span class="co">## 53:                      Prefer not to answer         2    39 0.0376447876</span></span>
<span><span class="co">## 54:                      Prefer not to answer         3     3 0.0028957529</span></span>
<span><span class="co">## 55:                      Prefer not to answer         4     5 0.0048262548</span></span>
<span><span class="co">## 56:                      Prefer not to answer         5     1 0.0009652510</span></span>
<span><span class="co">## 57:                      Prefer not to answer         6     6 0.0057915058</span></span>
<span><span class="co">## 58:                      Prefer not to answer         7     2 0.0019305019</span></span>
<span><span class="co">## 59:                      Prefer not to answer         8   548 0.5289575290</span></span>
<span><span class="co">## 60:                      Prefer not to answer        11     4 0.0038610039</span></span>
<span><span class="co">## 61:                      Prefer not to answer        13    69 0.0666023166</span></span>
<span><span class="co">## 62:                      Prefer not to answer        14     1 0.0009652510</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##                                        &lt;fctr&gt;     &lt;int&gt; &lt;int&gt;        &lt;num&gt;</span></span>
<span><span class="co">##  1:                 African American or Black         1   146 0.3905712667</span></span>
<span><span class="co">##  2:                 African American or Black         3     4 0.0126026621</span></span>
<span><span class="co">##  3:                 African American or Black         4     1 0.0023516203</span></span>
<span><span class="co">##  4:                 African American or Black         6     1 0.0043795768</span></span>
<span><span class="co">##  5:                 African American or Black         7     1 0.0023566776</span></span>
<span><span class="co">##  6:                 African American or Black         8   180 0.4284500546</span></span>
<span><span class="co">##  7:                 African American or Black        11     3 0.0044149775</span></span>
<span><span class="co">##  8:                 African American or Black        13    53 0.1548731642</span></span>
<span><span class="co">##  9:          American Indian or Alaska Native         1     7 0.1450820029</span></span>
<span><span class="co">## 10:          American Indian or Alaska Native         8    36 0.7467699134</span></span>
<span><span class="co">## 11:          American Indian or Alaska Native        13     3 0.1081480837</span></span>
<span><span class="co">## 12:                                     Asian         1   689 0.3051702848</span></span>
<span><span class="co">## 13:                                     Asian         2    32 0.0166409377</span></span>
<span><span class="co">## 14:                                     Asian         4     2 0.0007410683</span></span>
<span><span class="co">## 15:                                     Asian         5     2 0.0009939142</span></span>
<span><span class="co">## 16:                                     Asian         6    12 0.0064949215</span></span>
<span><span class="co">## 17:                                     Asian         7    41 0.0190691777</span></span>
<span><span class="co">## 18:                                     Asian         8  1249 0.5658590003</span></span>
<span><span class="co">## 19:                                     Asian        11    30 0.0161453597</span></span>
<span><span class="co">## 20:                                     Asian        12     1 0.0002583625</span></span>
<span><span class="co">## 21:                                     Asian        13   141 0.0651487332</span></span>
<span><span class="co">## 22:                                     Asian        14     7 0.0034782401</span></span>
<span><span class="co">## 23: Native Hawaiian or other Pacific Islander         1    29 0.4204865855</span></span>
<span><span class="co">## 24: Native Hawaiian or other Pacific Islander         6     1 0.0239513996</span></span>
<span><span class="co">## 25: Native Hawaiian or other Pacific Islander         8    34 0.5555620149</span></span>
<span><span class="co">## 26:                                     White         1  2934 0.3041972747</span></span>
<span><span class="co">## 27:                                     White         2   242 0.0243721513</span></span>
<span><span class="co">## 28:                                     White         3     3 0.0002999808</span></span>
<span><span class="co">## 29:                                     White         4    26 0.0023771364</span></span>
<span><span class="co">## 30:                                     White         5     3 0.0003299170</span></span>
<span><span class="co">## 31:                                     White         6    36 0.0037343793</span></span>
<span><span class="co">## 32:                                     White         7    59 0.0062000853</span></span>
<span><span class="co">## 33:                                     White         8  5765 0.5978921238</span></span>
<span><span class="co">## 34:                                     White        10    14 0.0020777749</span></span>
<span><span class="co">## 35:                                     White        11    37 0.0035603367</span></span>
<span><span class="co">## 36:                                     White        12     8 0.0007298226</span></span>
<span><span class="co">## 37:                                     White        13   516 0.0518479582</span></span>
<span><span class="co">## 38:                                     White        14    25 0.0023810590</span></span>
<span><span class="co">## 39:                               Two or more         1   243 0.4165906782</span></span>
<span><span class="co">## 40:                               Two or more         2    10 0.0142847408</span></span>
<span><span class="co">## 41:                               Two or more         6     6 0.0099882853</span></span>
<span><span class="co">## 42:                               Two or more         8   270 0.4517833211</span></span>
<span><span class="co">## 43:                               Two or more        11     2 0.0033521438</span></span>
<span><span class="co">## 44:                               Two or more        13    60 0.1040008307</span></span>
<span><span class="co">## 45:                                Other race         1    51 0.2979641649</span></span>
<span><span class="co">## 46:                                Other race         5     1 0.0100404948</span></span>
<span><span class="co">## 47:                                Other race         6     1 0.0073445387</span></span>
<span><span class="co">## 48:                                Other race         8   104 0.5797193099</span></span>
<span><span class="co">## 49:                                Other race        11     3 0.0183946303</span></span>
<span><span class="co">## 50:                                Other race        13    13 0.0852055250</span></span>
<span><span class="co">## 51:                                Other race        14     1 0.0013313363</span></span>
<span><span class="co">## 52:                      Prefer not to answer         1   358 0.3525751627</span></span>
<span><span class="co">## 53:                      Prefer not to answer         2    39 0.0415813644</span></span>
<span><span class="co">## 54:                      Prefer not to answer         3     3 0.0038718201</span></span>
<span><span class="co">## 55:                      Prefer not to answer         4     5 0.0039204752</span></span>
<span><span class="co">## 56:                      Prefer not to answer         5     1 0.0004790652</span></span>
<span><span class="co">## 57:                      Prefer not to answer         6     6 0.0046241022</span></span>
<span><span class="co">## 58:                      Prefer not to answer         7     2 0.0011302945</span></span>
<span><span class="co">## 59:                      Prefer not to answer         8   548 0.5225422644</span></span>
<span><span class="co">## 60:                      Prefer not to answer        11     4 0.0023429284</span></span>
<span><span class="co">## 61:                      Prefer not to answer        13    69 0.0657105323</span></span>
<span><span class="co">## 62:                      Prefer not to answer        14     1 0.0012219906</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##          prop_se     est     est_se</span></span>
<span><span class="co">##            &lt;num&gt;   &lt;num&gt;      &lt;num&gt;</span></span>
<span><span class="co">##  1: 0.0282906311   77230  7202.7558</span></span>
<span><span class="co">##  2: 0.0066885378    2492  1331.4537</span></span>
<span><span class="co">##  3: 0.0023500849     465   465.0000</span></span>
<span><span class="co">##  4: 0.0043678202     866   866.0000</span></span>
<span><span class="co">##  5: 0.0023551269     466   466.0000</span></span>
<span><span class="co">##  6: 0.0284115856   84720  7290.3594</span></span>
<span><span class="co">##  7: 0.0026365365     873   521.1549</span></span>
<span><span class="co">##  8: 0.0211938329   30624  4566.8926</span></span>
<span><span class="co">##  9: 0.0583277190    3335  1444.1155</span></span>
<span><span class="co">## 10: 0.0758001371   17166  3291.4253</span></span>
<span><span class="co">## 11: 0.0588410966    2486  1452.3590</span></span>
<span><span class="co">## 12: 0.0112751847  331909 14406.1991</span></span>
<span><span class="co">## 13: 0.0031684441   18099  3472.2550</span></span>
<span><span class="co">## 14: 0.0005374246     806   584.5719</span></span>
<span><span class="co">## 15: 0.0007866950    1081   856.0153</span></span>
<span><span class="co">## 16: 0.0020499103    7064  2236.5492</span></span>
<span><span class="co">## 17: 0.0033706757   20740  3697.6048</span></span>
<span><span class="co">## 18: 0.0121719999  615439 19446.9203</span></span>
<span><span class="co">## 19: 0.0031535242   17560  3455.7525</span></span>
<span><span class="co">## 20: 0.0002583829     281   281.0000</span></span>
<span><span class="co">## 21: 0.0060809393   70857  6815.9100</span></span>
<span><span class="co">## 22: 0.0015826609    3783  1724.5385</span></span>
<span><span class="co">## 23: 0.0704335805   14466  3130.6398</span></span>
<span><span class="co">## 24: 0.0236229664     824   824.0000</span></span>
<span><span class="co">## 25: 0.0710921620   19113  3722.8271</span></span>
<span><span class="co">## 26: 0.0054007054 1473423 28836.5035</span></span>
<span><span class="co">## 27: 0.0017956576  118050  8747.8272</span></span>
<span><span class="co">## 28: 0.0002038448    1453   987.4254</span></span>
<span><span class="co">## 29: 0.0005430718   11514  2631.4671</span></span>
<span><span class="co">## 30: 0.0002123764    1598  1028.7568</span></span>
<span><span class="co">## 31: 0.0007110315   18088  3447.0041</span></span>
<span><span class="co">## 32: 0.0009039482   30031  4384.2723</span></span>
<span><span class="co">## 33: 0.0057494999 2895976 36610.7988</span></span>
<span><span class="co">## 34: 0.0005799747   10064  2811.2886</span></span>
<span><span class="co">## 35: 0.0006760499   17245  3276.7898</span></span>
<span><span class="co">## 36: 0.0003057402    3535  1481.0996</span></span>
<span><span class="co">## 37: 0.0025833876  251133 12671.2132</span></span>
<span><span class="co">## 38: 0.0005582162   11533  2705.1327</span></span>
<span><span class="co">## 39: 0.0231395983  128377  9252.3454</span></span>
<span><span class="co">## 40: 0.0057348621    4402  1780.3574</span></span>
<span><span class="co">## 41: 0.0043327331    3078  1340.5366</span></span>
<span><span class="co">## 42: 0.0233781385  139222  9656.1625</span></span>
<span><span class="co">## 43: 0.0023683811    1033   730.6294</span></span>
<span><span class="co">## 44: 0.0146015906   32049  4757.0427</span></span>
<span><span class="co">## 45: 0.0401920453   26857  4365.3044</span></span>
<span><span class="co">## 46: 0.0099774410     905   905.0000</span></span>
<span><span class="co">## 47: 0.0073183153     662   662.0000</span></span>
<span><span class="co">## 48: 0.0429156650   52253  5852.2429</span></span>
<span><span class="co">## 49: 0.0107967923    1658   980.6406</span></span>
<span><span class="co">## 50: 0.0239410741    7680  2253.0918</span></span>
<span><span class="co">## 51: 0.0013345935     120   120.0000</span></span>
<span><span class="co">## 52: 0.0170273904  188407 11212.9544</span></span>
<span><span class="co">## 53: 0.0072538913   22220  3958.7011</span></span>
<span><span class="co">## 54: 0.0022959360    2069  1229.3224</span></span>
<span><span class="co">## 55: 0.0019000907    2095  1016.4577</span></span>
<span><span class="co">## 56: 0.0004791561     256   256.0000</span></span>
<span><span class="co">## 57: 0.0023053628    2471  1234.3289</span></span>
<span><span class="co">## 58: 0.0010238556     604   547.2946</span></span>
<span><span class="co">## 59: 0.0177823597  279233 13535.4928</span></span>
<span><span class="co">## 60: 0.0016165519    1252   864.6572</span></span>
<span><span class="co">## 61: 0.0087882893   35114  4848.2740</span></span>
<span><span class="co">## 62: 0.0012213144     653   653.0000</span></span>
<span><span class="co">##          prop_se     est     est_se</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
<p>If we want to summarize a select all that apply variable, we can set
<code>summarize_vartype</code> to checkbox.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'race'</span>,</span>
<span>                   summarize_by <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="va">test_data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                   summarize_var <span class="op">=</span> <span class="st">'race'</span>,</span>
<span>                                   summarize_by <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                                   summarize_vartype <span class="op">=</span> <span class="st">'checkbox'</span>,</span>
<span>                                   weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                   wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                   se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">## Key: &lt;mode_type&gt;</span></span>
<span><span class="co">##     mode_type                                      race count        prop</span></span>
<span><span class="co">##         &lt;int&gt;                                    &lt;fctr&gt; &lt;int&gt;       &lt;num&gt;</span></span>
<span><span class="co">##  1:         1                 African American or Black   190 0.039840637</span></span>
<span><span class="co">##  2:         1          American Indian or Alaska Native   100 0.020968757</span></span>
<span><span class="co">##  3:         1                                     Asian   808 0.169427553</span></span>
<span><span class="co">##  4:         1 Native Hawaiian or other Pacific Islander    34 0.007129377</span></span>
<span><span class="co">##  5:         1                                     White  3174 0.665548333</span></span>
<span><span class="co">##  6:         1                                Other race   105 0.022017194</span></span>
<span><span class="co">##  7:         1                      Prefer not to answer   358 0.075068148</span></span>
<span><span class="co">##  8:         2                                     Asian    38 0.114114114</span></span>
<span><span class="co">##  9:         2                                     White   252 0.756756757</span></span>
<span><span class="co">## 10:         2                                Other race     4 0.012012012</span></span>
<span><span class="co">## 11:         2                      Prefer not to answer    39 0.117117117</span></span>
<span><span class="co">## 12:         3                 African American or Black     4 0.400000000</span></span>
<span><span class="co">## 13:         3                                     White     3 0.300000000</span></span>
<span><span class="co">## 14:         3                      Prefer not to answer     3 0.300000000</span></span>
<span><span class="co">## 15:         4                 African American or Black     1 0.029411765</span></span>
<span><span class="co">## 16:         4                                     Asian     2 0.058823529</span></span>
<span><span class="co">## 17:         4                                     White    26 0.764705882</span></span>
<span><span class="co">## 18:         4                      Prefer not to answer     5 0.147058824</span></span>
<span><span class="co">## 19:         5                                     Asian     2 0.285714286</span></span>
<span><span class="co">## 20:         5                                     White     3 0.428571429</span></span>
<span><span class="co">## 21:         5                                Other race     1 0.142857143</span></span>
<span><span class="co">## 22:         5                      Prefer not to answer     1 0.142857143</span></span>
<span><span class="co">## 23:         6                 African American or Black     1 0.014492754</span></span>
<span><span class="co">## 24:         6          American Indian or Alaska Native     1 0.014492754</span></span>
<span><span class="co">## 25:         6                                     Asian    15 0.217391304</span></span>
<span><span class="co">## 26:         6 Native Hawaiian or other Pacific Islander     1 0.014492754</span></span>
<span><span class="co">## 27:         6                                     White    42 0.608695652</span></span>
<span><span class="co">## 28:         6                                Other race     3 0.043478261</span></span>
<span><span class="co">## 29:         6                      Prefer not to answer     6 0.086956522</span></span>
<span><span class="co">## 30:         7                 African American or Black     1 0.009708738</span></span>
<span><span class="co">## 31:         7                                     Asian    41 0.398058252</span></span>
<span><span class="co">## 32:         7                                     White    59 0.572815534</span></span>
<span><span class="co">## 33:         7                      Prefer not to answer     2 0.019417476</span></span>
<span><span class="co">## 34:         8                 African American or Black   202 0.023882715</span></span>
<span><span class="co">## 35:         8          American Indian or Alaska Native    92 0.010877276</span></span>
<span><span class="co">## 36:         8                                     Asian  1405 0.166114921</span></span>
<span><span class="co">## 37:         8 Native Hawaiian or other Pacific Islander    76 0.008985576</span></span>
<span><span class="co">## 38:         8                                     White  5991 0.708323481</span></span>
<span><span class="co">## 39:         8                                Other race   144 0.017025301</span></span>
<span><span class="co">## 40:         8                      Prefer not to answer   548 0.064790731</span></span>
<span><span class="co">## 41:        10                                     White    14 1.000000000</span></span>
<span><span class="co">## 42:        11                 African American or Black     5 0.060240964</span></span>
<span><span class="co">## 43:        11          American Indian or Alaska Native     2 0.024096386</span></span>
<span><span class="co">## 44:        11                                     Asian    30 0.361445783</span></span>
<span><span class="co">## 45:        11                                     White    39 0.469879518</span></span>
<span><span class="co">## 46:        11                                Other race     3 0.036144578</span></span>
<span><span class="co">## 47:        11                      Prefer not to answer     4 0.048192771</span></span>
<span><span class="co">## 48:        12                                     Asian     1 0.111111111</span></span>
<span><span class="co">## 49:        12                                     White     8 0.888888889</span></span>
<span><span class="co">## 50:        13                 African American or Black    70 0.074706510</span></span>
<span><span class="co">## 51:        13          American Indian or Alaska Native    40 0.042689434</span></span>
<span><span class="co">## 52:        13                                     Asian   153 0.163287086</span></span>
<span><span class="co">## 53:        13                                     White   576 0.614727855</span></span>
<span><span class="co">## 54:        13                                Other race    29 0.030949840</span></span>
<span><span class="co">## 55:        13                      Prefer not to answer    69 0.073639274</span></span>
<span><span class="co">## 56:        14                                     Asian     7 0.205882353</span></span>
<span><span class="co">## 57:        14                                     White    25 0.735294118</span></span>
<span><span class="co">## 58:        14                                Other race     1 0.029411765</span></span>
<span><span class="co">## 59:        14                      Prefer not to answer     1 0.029411765</span></span>
<span><span class="co">##     mode_type                                      race count        prop</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     mode_type                                      race count        prop</span></span>
<span><span class="co">##         &lt;int&gt;                                    &lt;fctr&gt; &lt;int&gt;       &lt;num&gt;</span></span>
<span><span class="co">##  1:         1                 African American or Black   190 0.040013489</span></span>
<span><span class="co">##  2:         1          American Indian or Alaska Native   100 0.021076910</span></span>
<span><span class="co">##  3:         1                                     Asian   808 0.166476198</span></span>
<span><span class="co">##  4:         1 Native Hawaiian or other Pacific Islander    34 0.006831490</span></span>
<span><span class="co">##  5:         1                                     White  3174 0.666577157</span></span>
<span><span class="co">##  6:         1                                Other race   105 0.020586062</span></span>
<span><span class="co">##  7:         1                      Prefer not to answer   358 0.078438695</span></span>
<span><span class="co">##  8:         2                                     Asian    38 0.126072990</span></span>
<span><span class="co">##  9:         2                                     White   252 0.732486705</span></span>
<span><span class="co">## 10:         2                                Other race     4 0.008524104</span></span>
<span><span class="co">## 11:         2                      Prefer not to answer    39 0.132916201</span></span>
<span><span class="co">## 12:         3                 African American or Black     4 0.414366478</span></span>
<span><span class="co">## 13:         3                                     White     3 0.241602927</span></span>
<span><span class="co">## 14:         3                      Prefer not to answer     3 0.344030595</span></span>
<span><span class="co">## 15:         4                 African American or Black     1 0.031250000</span></span>
<span><span class="co">## 16:         4                                     Asian     2 0.054166667</span></span>
<span><span class="co">## 17:         4                                     White    26 0.773790323</span></span>
<span><span class="co">## 18:         4                      Prefer not to answer     5 0.140793011</span></span>
<span><span class="co">## 19:         5                                     Asian     2 0.281510417</span></span>
<span><span class="co">## 20:         5                                     White     3 0.416145833</span></span>
<span><span class="co">## 21:         5                                Other race     1 0.235677083</span></span>
<span><span class="co">## 22:         5                      Prefer not to answer     1 0.066666667</span></span>
<span><span class="co">## 23:         6                 African American or Black     1 0.023968337</span></span>
<span><span class="co">## 24:         6          American Indian or Alaska Native     1 0.013589438</span></span>
<span><span class="co">## 25:         6                                     Asian    15 0.245800006</span></span>
<span><span class="co">## 26:         6 Native Hawaiian or other Pacific Islander     1 0.022805901</span></span>
<span><span class="co">## 27:         6                                     White    42 0.585812737</span></span>
<span><span class="co">## 28:         6                                Other race     3 0.039633556</span></span>
<span><span class="co">## 29:         6                      Prefer not to answer     6 0.068390025</span></span>
<span><span class="co">## 30:         7                 African American or Black     1 0.008989024</span></span>
<span><span class="co">## 31:         7                                     Asian    41 0.400069443</span></span>
<span><span class="co">## 32:         7                                     White    59 0.579290523</span></span>
<span><span class="co">## 33:         7                      Prefer not to answer     2 0.011651010</span></span>
<span><span class="co">## 34:         8                 African American or Black   202 0.022452608</span></span>
<span><span class="co">## 35:         8          American Indian or Alaska Native    92 0.011322711</span></span>
<span><span class="co">## 36:         8                                     Asian  1405 0.163974235</span></span>
<span><span class="co">## 37:         8 Native Hawaiian or other Pacific Islander    76 0.009421685</span></span>
<span><span class="co">## 38:         8                                     White  5991 0.709942163</span></span>
<span><span class="co">## 39:         8                                Other race   144 0.017067744</span></span>
<span><span class="co">## 40:         8                      Prefer not to answer   548 0.065818854</span></span>
<span><span class="co">## 41:        10                                     White    14 1.000000000</span></span>
<span><span class="co">## 42:        11                 African American or Black     5 0.045721688</span></span>
<span><span class="co">## 43:        11          American Indian or Alaska Native     2 0.024779907</span></span>
<span><span class="co">## 44:        11                                     Asian    30 0.421234438</span></span>
<span><span class="co">## 45:        11                                     White    39 0.438458032</span></span>
<span><span class="co">## 46:        11                                Other race     3 0.039772591</span></span>
<span><span class="co">## 47:        11                      Prefer not to answer     4 0.030033344</span></span>
<span><span class="co">## 48:        12                                     Asian     1 0.073637317</span></span>
<span><span class="co">## 49:        12                                     White     8 0.926362683</span></span>
<span><span class="co">## 50:        13                 African American or Black    70 0.080582483</span></span>
<span><span class="co">## 51:        13          American Indian or Alaska Native    40 0.045759209</span></span>
<span><span class="co">## 52:        13                                     Asian   153 0.162498668</span></span>
<span><span class="co">## 53:        13                                     White   576 0.603323604</span></span>
<span><span class="co">## 54:        13                                Other race    29 0.033025119</span></span>
<span><span class="co">## 55:        13                      Prefer not to answer    69 0.074810917</span></span>
<span><span class="co">## 56:        14                                     Asian     7 0.235129592</span></span>
<span><span class="co">## 57:        14                                     White    25 0.716825160</span></span>
<span><span class="co">## 58:        14                                Other race     1 0.007458512</span></span>
<span><span class="co">## 59:        14                      Prefer not to answer     1 0.040586736</span></span>
<span><span class="co">##     mode_type                                      race count        prop</span></span>
<span><span class="co">##         prop_se     est     est_se</span></span>
<span><span class="co">##           &lt;num&gt;   &lt;num&gt;      &lt;num&gt;</span></span>
<span><span class="co">##  1: 0.003480119   96111  7975.0422</span></span>
<span><span class="co">##  2: 0.002542819   50626  5768.3288</span></span>
<span><span class="co">##  3: 0.006568278  399870 16186.7733</span></span>
<span><span class="co">##  4: 0.001479919   16409  3332.9169</span></span>
<span><span class="co">##  5: 0.007787283 1601095 32330.8859</span></span>
<span><span class="co">##  6: 0.002488825   49447  5643.0323</span></span>
<span><span class="co">##  7: 0.004825536  188407 11307.9346</span></span>
<span><span class="co">##  8: 0.021673410   21076  3786.3301</span></span>
<span><span class="co">##  9: 0.027934367  122452  8973.4484</span></span>
<span><span class="co">## 10: 0.005832891    1425   953.4106</span></span>
<span><span class="co">## 11: 0.022521537   22220  3962.3508</span></span>
<span><span class="co">## 12: 0.169167822    2492  1331.5545</span></span>
<span><span class="co">## 13: 0.144247992    1453   987.4602</span></span>
<span><span class="co">## 14: 0.164240660    2069  1229.3905</span></span>
<span><span class="co">## 15: 0.030872908     465   465.0000</span></span>
<span><span class="co">## 16: 0.038590666     806   584.5878</span></span>
<span><span class="co">## 17: 0.076849954   11514  2632.9105</span></span>
<span><span class="co">## 18: 0.064158837    2095  1016.5575</span></span>
<span><span class="co">## 19: 0.189992252    1081   856.0307</span></span>
<span><span class="co">## 20: 0.208480521    1598  1028.8007</span></span>
<span><span class="co">## 21: 0.198601443     905   905.0000</span></span>
<span><span class="co">## 22: 0.068252522     256   256.0000</span></span>
<span><span class="co">## 23: 0.025775549     866   866.0000</span></span>
<span><span class="co">## 24: 0.014784403     491   491.0000</span></span>
<span><span class="co">## 25: 0.063926195    8881  2490.2346</span></span>
<span><span class="co">## 26: 0.024557643     824   824.0000</span></span>
<span><span class="co">## 27: 0.069091983   21166  3700.9843</span></span>
<span><span class="co">## 28: 0.026555002    1432   893.3361</span></span>
<span><span class="co">## 29: 0.036046741    2471  1234.4411</span></span>
<span><span class="co">## 30: 0.008964261     466   466.0000</span></span>
<span><span class="co">## 31: 0.054902198   20740  3701.0089</span></span>
<span><span class="co">## 32: 0.055185761   30031  4390.3553</span></span>
<span><span class="co">## 33: 0.010514366     604   547.2982</span></span>
<span><span class="co">## 34: 0.001873969   95254  7769.5082</span></span>
<span><span class="co">## 35: 0.001398626   48036  5771.9859</span></span>
<span><span class="co">## 36: 0.004762250  695652 21306.4777</span></span>
<span><span class="co">## 37: 0.001276091   39971  5261.1217</span></span>
<span><span class="co">## 38: 0.005617560 3011892 43812.4684</span></span>
<span><span class="co">## 39: 0.001666708   72409  6895.2034</span></span>
<span><span class="co">## 40: 0.003230268  279233 13708.1607</span></span>
<span><span class="co">## 41: 0.000000000   10064  2812.2928</span></span>
<span><span class="co">## 42: 0.022381920    1906   897.4773</span></span>
<span><span class="co">## 43: 0.018255748    1033   730.6515</span></span>
<span><span class="co">## 44: 0.063430268   17560  3458.3451</span></span>
<span><span class="co">## 45: 0.063068208   18278  3359.7885</span></span>
<span><span class="co">## 46: 0.024280629    1658   980.6957</span></span>
<span><span class="co">## 47: 0.021499876    1252   864.6859</span></span>
<span><span class="co">## 48: 0.073962514     281   281.0000</span></span>
<span><span class="co">## 49: 0.073962514    3535  1481.3100</span></span>
<span><span class="co">## 50: 0.011247084   37823  5066.8771</span></span>
<span><span class="co">## 51: 0.008727320   21478  3852.7941</span></span>
<span><span class="co">## 52: 0.015009542   76272  7108.1562</span></span>
<span><span class="co">## 53: 0.018695102  283182 13670.8385</span></span>
<span><span class="co">## 54: 0.007444624   15501  3261.5427</span></span>
<span><span class="co">## 55: 0.010821499   35114  4855.8112</span></span>
<span><span class="co">## 56: 0.091554896    3783  1724.7373</span></span>
<span><span class="co">## 57: 0.095130908   11533  2706.5373</span></span>
<span><span class="co">## 58: 0.007557031     120   120.0000</span></span>
<span><span class="co">## 59: 0.039773659     653   653.0000</span></span>
<span><span class="co">##         prop_se     est     est_se</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
<p><code>summarize_by</code> can be used with an unlimited amount of
variables. To use more than one <code>summarize_by</code> variable pass
a list to the argument.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                   summarize_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'race'</span>, <span class="st">'ethnicity'</span><span class="op">)</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'hh'</span> <span class="op">=</span> <span class="va">hh</span>,</span>
<span>                               <span class="st">'person'</span> <span class="op">=</span> <span class="va">person</span>,</span>
<span>                               <span class="st">'day'</span> <span class="op">=</span> <span class="va">day</span>,</span>
<span>                               <span class="st">'trip'</span> <span class="op">=</span> <span class="va">trip</span>,</span>
<span>                               <span class="st">'vehicle'</span> <span class="op">=</span> <span class="va">vehicle</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_ethnicity_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                             summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                                             summarize_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'race'</span>, <span class="st">'ethnicity'</span><span class="op">)</span>,</span>
<span>                                             summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                             weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                             wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                             se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mode_by_race_ethnicity_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                          race                                   ethnicity</span></span>
<span><span class="co">##                        &lt;fctr&gt;                                      &lt;fctr&gt;</span></span>
<span><span class="co">##  1: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  2: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  3: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  4: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  5: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  6: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  7: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  8: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  9: African American or Black Another Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">## 10: African American or Black Another Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##     mode_type count        prop     prop_se   est    est_se</span></span>
<span><span class="co">##         &lt;int&gt; &lt;int&gt;       &lt;num&gt;       &lt;num&gt; &lt;num&gt;     &lt;num&gt;</span></span>
<span><span class="co">##  1:         1   143 0.395021634 0.028786577 75777 7152.8334</span></span>
<span><span class="co">##  2:         3     4 0.012990669 0.006892942  2492 1331.4537</span></span>
<span><span class="co">##  3:         4     1 0.002424021 0.002422381   465  465.0000</span></span>
<span><span class="co">##  4:         6     1 0.004514414 0.004501905   866  866.0000</span></span>
<span><span class="co">##  5:         7     1 0.002429234 0.002427578   466  466.0000</span></span>
<span><span class="co">##  6:         8   173 0.418427775 0.028683214 80267 7061.2787</span></span>
<span><span class="co">##  7:        11     3 0.004550904 0.002717711   873  521.1549</span></span>
<span><span class="co">##  8:        13    53 0.159641349 0.021778953 30624 4566.8926</span></span>
<span><span class="co">##  9:         1     2 0.270056497 0.179646281   956  696.6059</span></span>
<span><span class="co">## 10:         8     4 0.729943503 0.179646281  2584 1413.9469</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="calculating-trip-rates">Calculating trip rates<a class="anchor" aria-label="anchor" href="#calculating-trip-rates"></a>
</h3>
<p><code>hts_summary</code> can also be used to calculate trip
rates.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_triprate.html">hts_prep_triprate</a></span><span class="op">(</span>summarize_by <span class="op">=</span> <span class="st">'employment'</span>,</span>
<span>                       variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                       trip_name <span class="op">=</span> <span class="st">'trip'</span>,</span>
<span>                       day_name <span class="op">=</span> <span class="st">'day'</span>,</span>
<span>                       hts_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'hh'</span> <span class="op">=</span> <span class="va">hh</span>,</span>
<span>                                       <span class="st">'person'</span> <span class="op">=</span> <span class="va">person</span>,</span>
<span>                                       <span class="st">'day'</span> <span class="op">=</span> <span class="va">day</span>,</span>
<span>                                       <span class="st">'trip'</span> <span class="op">=</span> <span class="va">trip</span>,</span>
<span>                                       <span class="st">'vehicle'</span> <span class="op">=</span> <span class="va">vehicle</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">trip_rate_by_employment_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">num</span>, </span>
<span>                                              summarize_var <span class="op">=</span> <span class="st">'num_trips_wtd'</span>,</span>
<span>                                              summarize_by <span class="op">=</span> <span class="st">'employment'</span>,</span>
<span>                                              summarize_vartype <span class="op">=</span> <span class="st">'numeric'</span>,</span>
<span>                                              weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                              wtname <span class="op">=</span> <span class="st">'day_weight'</span>,</span>
<span>                                              se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    employment count   min      max     mean    mean_se   median</span></span>
<span><span class="co">##         &lt;int&gt; &lt;int&gt; &lt;num&gt;    &lt;num&gt;    &lt;num&gt;      &lt;num&gt;    &lt;num&gt;</span></span>
<span><span class="co">## 1:          1  1858     0 62.56075 3.770511 0.08744228 2.562929</span></span>
<span><span class="co">## 2:          2   333     0 49.51000 4.518665 0.26799833 3.027821</span></span>
<span><span class="co">## 3:          3   251     0 63.59574 3.750584 0.25813849 2.478788</span></span>
<span><span class="co">## 4:          5  1000     0 59.23973 3.394865 0.12525765 2.021469</span></span>
<span><span class="co">## 5:          6   164     0 45.62069 3.144907 0.26774656 2.197662</span></span>
<span><span class="co">## 6:          7    52     0 32.36364 4.070054 0.56907009 2.720099</span></span>
<span><span class="co">## 7:          8    14     0 21.92248 2.728166 0.92991111 0.904000</span></span>
<span><span class="co">## 8:        995   513     0 58.78947 2.098985 0.10435428 1.272311</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="labeling-values">Labeling Values<a class="anchor" aria-label="anchor" href="#labeling-values"></a>
</h3>
<p>To label values we can use <code>factorize_column</code>.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span><span class="op">$</span><span class="va">employment</span> <span class="op">=</span>  <span class="fu"><a href="../reference/factorize_column.html">factorize_column</a></span><span class="op">(</span></span>
<span>  <span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span><span class="op">$</span><span class="va">employment</span>,</span>
<span>  <span class="st">'employment'</span>,</span>
<span>  <span class="va">value_labels</span>,</span>
<span>  variable_colname <span class="op">=</span> <span class="st">'variable'</span>,</span>
<span>  value_colname <span class="op">=</span> <span class="st">'value'</span>,</span>
<span>  value_label_colname <span class="op">=</span> <span class="st">'label'</span>,</span>
<span>  value_order_colname <span class="op">=</span> <span class="st">'val_order'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                                             employment</span></span>
<span><span class="co">##                                                                                  &lt;ord&gt;</span></span>
<span><span class="co">## 1:                                           Employed full-time (35+ hours/week, paid)</span></span>
<span><span class="co">## 2:                                 Employed part-time (fewer than 35 hours/week, paid)</span></span>
<span><span class="co">## 3:                                                                       Self-employed</span></span>
<span><span class="co">## 4: Not employed and not looking for work (e.g., retired, stay-at-home parent, student)</span></span>
<span><span class="co">## 5:                                                     Unemployed and looking for work</span></span>
<span><span class="co">## 6:                                                          Unpaid volunteer or intern</span></span>
<span><span class="co">## 7:               Employed, but not currently working (e.g., on leave, furloughed 100%)</span></span>
<span><span class="co">## 8:                                                                    Missing Response</span></span>
<span><span class="co">##    count   min      max     mean    mean_se   median</span></span>
<span><span class="co">##    &lt;int&gt; &lt;num&gt;    &lt;num&gt;    &lt;num&gt;      &lt;num&gt;    &lt;num&gt;</span></span>
<span><span class="co">## 1:  1858     0 62.56075 3.770511 0.08744228 2.562929</span></span>
<span><span class="co">## 2:   333     0 49.51000 4.518665 0.26799833 3.027821</span></span>
<span><span class="co">## 3:   251     0 63.59574 3.750584 0.25813849 2.478788</span></span>
<span><span class="co">## 4:  1000     0 59.23973 3.394865 0.12525765 2.021469</span></span>
<span><span class="co">## 5:   164     0 45.62069 3.144907 0.26774656 2.197662</span></span>
<span><span class="co">## 6:    52     0 32.36364 4.070054 0.56907009 2.720099</span></span>
<span><span class="co">## 7:    14     0 21.92248 2.728166 0.92991111 0.904000</span></span>
<span><span class="co">## 8:   513     0 58.78947 2.098985 0.10435428 1.272311</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="creating-visuals-using-hts_summary-output">Creating Visuals using hts_summary output<a class="anchor" aria-label="anchor" href="#creating-visuals-using-hts_summary-output"></a>
</h3>
<p><code>hts_summary</code> creates outputs that can easily be used to
create visuals.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: package 'ggplot2' was built under R version 4.3.2</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>  <span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mean</span>, y <span class="op">=</span> <span class="va">employment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">'identity'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_errorbar</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="op">(</span><span class="va">mean</span> <span class="op">-</span> <span class="va">mean_se</span><span class="op">)</span>, </span>
<span>        xmax <span class="op">=</span> <span class="op">(</span><span class="va">mean</span> <span class="op">+</span> <span class="va">mean_se</span><span class="op">)</span>,</span>
<span>        width <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">'Mean Trip Rate'</span>,</span>
<span>       y <span class="op">=</span> <span class="st">'Employment'</span><span class="op">)</span>  <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="va">x</span>, width <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span>
<span>                   limits <span class="op">=</span> <span class="va">rev</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting_started_files/figure-html/ggplot_example-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="summarizing-a-new-variable">Summarizing a new variable<a class="anchor" aria-label="anchor" href="#summarizing-a-new-variable"></a>
</h3>
<p>To summarize a new variable with <code>hts_summary</code> it must
first be added to the <code>variable_list</code> and
<code>value_labels</code>. In this example we are creating a new
variable called <code>hh_size</code> that we want to summarize.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_data</span><span class="op">$</span><span class="va">hh</span><span class="op">[</span>, <span class="va">hh_size</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">num_people</span> <span class="op">&lt;</span> <span class="fl">4</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">variable_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">variable_list</span>,</span>
<span>                      <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="st">'hh_size'</span>,</span>
<span>                                 is_checkbox <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                 hh <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                 person <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                 day <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                 trip <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                 vehicle <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                 description <span class="op">=</span> <span class="st">'Household size'</span>,</span>
<span>                                 data_type <span class="op">=</span> <span class="st">'integer/categorical'</span>,</span>
<span>                                 shared_name <span class="op">=</span> <span class="st">'hh_size'</span><span class="op">)</span></span>
<span>                      <span class="op">)</span></span>
<span></span>
<span><span class="va">value_labels</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">value_labels</span>,</span>
<span>                     <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'hh_size'</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                                value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>                                label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Small household'</span>, <span class="st">'Large household'</span><span class="op">)</span>,</span>
<span>                                val_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">214</span><span class="op">:</span><span class="fl">215</span><span class="op">)</span><span class="op">)</span></span>
<span>                      <span class="op">)</span></span>
<span></span>
<span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'hh_size'</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="va">test_data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">hh_size_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                              summarize_var <span class="op">=</span> <span class="st">'hh_size'</span>,</span>
<span>                              summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                              weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              wtname <span class="op">=</span> <span class="st">'hh_weight'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/factorize_df.html">factorize_df</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">hh_size_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="va">value_labels</span>, value_label_colname <span class="op">=</span> <span class="st">'label'</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##            hh_size count      prop    est</span></span>
<span><span class="co">##              &lt;ord&gt; &lt;int&gt;     &lt;num&gt;  &lt;int&gt;</span></span>
<span><span class="co">## 1: Small household   881 0.8786678 448161</span></span>
<span><span class="co">## 2: Large household   119 0.1213322  61885</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by RSG Inc., Ashley Asmus, Erika Redding, Jacob Moore, James Clark.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
