<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="travelSurveyTools">
<title>Getting Started • travelSurveyTools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="travelSurveyTools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">travelSurveyTools</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/geographic_summaries.html">Creating user-specified geographic summaries</a>
    <a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/RSGInc/travelSurveyTools/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/RSGInc/travelSurveyTools/blob/HEAD/vignettes/getting_started.Rmd" class="external-link"><code>vignettes/getting_started.Rmd</code></a></small>
      <div class="d-none name"><code>getting_started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="about-travelsurveytools">About TravelSurveyTools<a class="anchor" aria-label="anchor" href="#about-travelsurveytools"></a>
</h2>
<p>The <code>travelSurveyTools</code> package provides tools for R users
to aid use of data from household travel surveys. Some possible uses
include creating custom cross tabs, labeling data, and calculating trip
rates.</p>
</div>
<div class="section level2">
<h2 id="data-assumptions">Data Assumptions<a class="anchor" aria-label="anchor" href="#data-assumptions"></a>
</h2>
<p><code>travelSurveyTools</code> assumes the the data have the
structure shown below. If this does not reflect the structure of your
data</p>
<div class="section level3">
<h3 id="hts_data">hts_data<a class="anchor" aria-label="anchor" href="#hts_data"></a>
</h3>
<p>hts_data is a list of five core tables:</p>
<div class="section level4">
<h4 id="hh">hh<a class="anchor" aria-label="anchor" href="#hh"></a>
</h4>
<p>Household dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>survey variables asked on a household level</li>
<li>hh_weight: household weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="person">person<a class="anchor" aria-label="anchor" href="#person"></a>
</h4>
<p>Person dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>person_id: 10 digit person ID</li>
<li>survey variables asked on a person level</li>
<li>person_weight: person weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="day">day<a class="anchor" aria-label="anchor" href="#day"></a>
</h4>
<p>Day dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>person_id: 10 digit person ID</li>
<li>day_id: 12 digit day ID</li>
<li>survey variable asked on a day level</li>
<li>day_weight: day weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="trip">trip<a class="anchor" aria-label="anchor" href="#trip"></a>
</h4>
<p>Trip dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>person_id: 10 digit person ID</li>
<li>day_id: 12 digit day ID</li>
<li>trip_id: 13 digit trip ID</li>
<li>survey variables asked on a trip level</li>
<li>trip_weight: trip weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="vehicle">vehicle<a class="anchor" aria-label="anchor" href="#vehicle"></a>
</h4>
<p>Vehicle dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>vehicle_id: 10 digit vehicle ID</li>
<li>survey responses asked on a vehicle level</li>
<li>hh_weight: household weight</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="codebook">Codebook<a class="anchor" aria-label="anchor" href="#codebook"></a>
</h3>
<p>In addition to data from the household travel survey. The codebook is
also required. The codebook is assumed to be in two parts:</p>
<div class="section level4">
<h4 id="variable_list">variable_list<a class="anchor" aria-label="anchor" href="#variable_list"></a>
</h4>
<p>A dataset containing information about all variables existing in the
hh, person, day, trip, and vehicle tables. The variables are as
follows:</p>
<ul>
<li>variable: Name of the variable</li>
<li>is_checkbox: The variable is a ‘Select all that Apply’ question</li>
<li>hh: The variable exists in the hh table</li>
<li>person: The variable exists in the person table</li>
<li>day: The variable exists in the day table</li>
<li>trip: The variable exists in the trip table</li>
<li>vehicle: The variable exists in the vehicle table</li>
<li>location: The variable exists in the location table</li>
<li>data_type: Data type of the variable</li>
<li>description: A description of the variable</li>
<li>logic: Conditions where the variable should have a value</li>
<li>shared_name: the shared name of checkbox variable or the variable
name for non-checkbox variables</li>
</ul>
</div>
<div class="section level4">
<h4 id="value_labels">value_labels<a class="anchor" aria-label="anchor" href="#value_labels"></a>
</h4>
<p>A dataset containing the values for all variables found in
variable_list The variables are as follows:</p>
<ul>
<li>variable: Name of the variable</li>
<li>value: The numeric value of the variable</li>
<li>label: What the numeric value of the variable represents</li>
<li>label_value: value concatenated with the label (e.g., 11 85 or
older)</li>
<li>val_order: order for each variable label to appear in</li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="using-travelsurveytools">Using travelSurveyTools<a class="anchor" aria-label="anchor" href="#using-travelsurveytools"></a>
</h2>
<div class="section level3">
<h3 id="prepping-the-data">Prepping the Data<a class="anchor" aria-label="anchor" href="#prepping-the-data"></a>
</h3>
<p>In order to create summaries of our data we first need to prepare our
data. We can do this by using <code>hts_prep_data</code>. This will
return a categorical (cat) and numeric (num) (if applicable) prepped
data table that can be used to create summaries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RSGInc/travelSurveyTools" class="external-link">travelSurveyTools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://gdfe.co/srvyr/" class="external-link">srvyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"test_data"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"variable_list"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"value_labels"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="va">test_data</span><span class="op">)</span></span></code></pre></div>
<p>Numeric variables will be automatically binned in
<code>hts_prep_data</code> to create categorical summaries. Here we can
make a categorical summary of a numeric variable using
<code>hts_summary</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     speed_mph count       prop</span></span>
<span><span class="co">## 1:  1 or less   668 0.04102438</span></span>
<span><span class="co">## 2:       1-10  7935 0.48731806</span></span>
<span><span class="co">## 3:      10-19  3994 0.24528650</span></span>
<span><span class="co">## 4:      19-28  2027 0.12448566</span></span>
<span><span class="co">## 5:      28-37   852 0.05232451</span></span>
<span><span class="co">## 6:      37-45   394 0.02419702</span></span>
<span><span class="co">## 7: 45 or more   413 0.02536388</span></span></code></pre>
<p>Additionally, for numeric variables we can create numeric
summaries.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_num_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">num</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'numeric'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_num_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##    count min      max     mean   median</span></span>
<span><span class="co">## 1: 16283   0 123.3683 12.71216 9.213738</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="using-weighted-data">Using Weighted Data<a class="anchor" aria-label="anchor" href="#using-weighted-data"></a>
</h3>
<p>Additionally, we can use weighted data by setting
<code>weighted = TRUE</code> and specifying the name of the weight to be
used (<code>wtname</code>).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                wtname <span class="op">=</span> <span class="st">'trip_weight'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     speed_mph count       prop</span></span>
<span><span class="co">## 1:  1 or less   668 0.04102438</span></span>
<span><span class="co">## 2:       1-10  7935 0.48731806</span></span>
<span><span class="co">## 3:      10-19  3994 0.24528650</span></span>
<span><span class="co">## 4:      19-28  2027 0.12448566</span></span>
<span><span class="co">## 5:      28-37   852 0.05232451</span></span>
<span><span class="co">## 6:      37-45   394 0.02419702</span></span>
<span><span class="co">## 7: 45 or more   413 0.02536388</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     speed_mph count       prop     est</span></span>
<span><span class="co">## 1:  1 or less   668 0.04149956  340717</span></span>
<span><span class="co">## 2:       1-10  7935 0.48393869 3973202</span></span>
<span><span class="co">## 3:      10-19  3994 0.24742090 2031359</span></span>
<span><span class="co">## 4:      19-28  2027 0.12361892 1014928</span></span>
<span><span class="co">## 5:      28-37   852 0.05391032  442611</span></span>
<span><span class="co">## 6:      37-45   394 0.02359705  193735</span></span>
<span><span class="co">## 7: 45 or more   413 0.02601455  213583</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="calculating-standard-errors">Calculating Standard Errors<a class="anchor" aria-label="anchor" href="#calculating-standard-errors"></a>
</h3>
<p>Additionally, by specifying <code>se = TRUE</code> we can calculate
standard errors.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     speed_mph count       prop</span></span>
<span><span class="co">## 1:  1 or less   668 0.04102438</span></span>
<span><span class="co">## 2:       1-10  7935 0.48731806</span></span>
<span><span class="co">## 3:      10-19  3994 0.24528650</span></span>
<span><span class="co">## 4:      19-28  2027 0.12448566</span></span>
<span><span class="co">## 5:      28-37   852 0.05232451</span></span>
<span><span class="co">## 6:      37-45   394 0.02419702</span></span>
<span><span class="co">## 7: 45 or more   413 0.02536388</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     speed_mph count       prop     prop_se     est   est_se</span></span>
<span><span class="co">## 1:  1 or less   668 0.04149956 0.001798998  340717 14849.96</span></span>
<span><span class="co">## 2:       1-10  7935 0.48393869 0.004495601 3973202 40737.10</span></span>
<span><span class="co">## 3:      10-19  3994 0.24742090 0.003889055 2031359 33219.42</span></span>
<span><span class="co">## 4:      19-28  2027 0.12361892 0.002952873 1014928 24632.37</span></span>
<span><span class="co">## 5:      28-37   852 0.05391032 0.002048576  442611 16948.80</span></span>
<span><span class="co">## 6:      37-45   394 0.02359705 0.001377395  193735 11345.70</span></span>
<span><span class="co">## 7: 45 or more   413 0.02601455 0.001433973  213583 11811.71</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="summarizing-two-variables">Summarizing Two Variables<a class="anchor" aria-label="anchor" href="#summarizing-two-variables"></a>
</h3>
<p>If we want to summarize a variable by another variable (e.g., mode
type by a person’s race, mode_type by a person’s ethnicity, income by
study year) we can use the <code>summarize_by</code> argument.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                   summarize_by <span class="op">=</span> <span class="st">'race'</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="va">test_data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                   summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                                   summarize_by <span class="op">=</span> <span class="st">'race'</span>,</span>
<span>                                   summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                   weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                   wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                   se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##  1:                 African American or Black         1   209 3.965844e-01</span></span>
<span><span class="co">##  2:                 African American or Black         3     2 3.795066e-03</span></span>
<span><span class="co">##  3:                 African American or Black         4     3 5.692600e-03</span></span>
<span><span class="co">##  4:                 African American or Black         6     4 7.590133e-03</span></span>
<span><span class="co">##  5:                 African American or Black         7     3 5.692600e-03</span></span>
<span><span class="co">##  6:                 African American or Black         8   215 4.079696e-01</span></span>
<span><span class="co">##  7:                 African American or Black        11     3 5.692600e-03</span></span>
<span><span class="co">##  8:                 African American or Black        13    88 1.669829e-01</span></span>
<span><span class="co">##  9:          American Indian or Alaska Native         1    16 2.424242e-01</span></span>
<span><span class="co">## 10:          American Indian or Alaska Native         2     6 9.090909e-02</span></span>
<span><span class="co">## 11:          American Indian or Alaska Native         3     1 1.515152e-02</span></span>
<span><span class="co">## 12:          American Indian or Alaska Native         4     3 4.545455e-02</span></span>
<span><span class="co">## 13:          American Indian or Alaska Native         5     1 1.515152e-02</span></span>
<span><span class="co">## 14:          American Indian or Alaska Native         6     1 1.515152e-02</span></span>
<span><span class="co">## 15:          American Indian or Alaska Native         8    33 5.000000e-01</span></span>
<span><span class="co">## 16:          American Indian or Alaska Native        13     5 7.575758e-02</span></span>
<span><span class="co">## 17:                                     Asian         1   600 2.946955e-01</span></span>
<span><span class="co">## 18:                                     Asian         2    23 1.129666e-02</span></span>
<span><span class="co">## 19:                                     Asian         3     1 4.911591e-04</span></span>
<span><span class="co">## 20:                                     Asian         6    18 8.840864e-03</span></span>
<span><span class="co">## 21:                                     Asian         7    34 1.669941e-02</span></span>
<span><span class="co">## 22:                                     Asian         8  1212 5.952849e-01</span></span>
<span><span class="co">## 23:                                     Asian        11    17 8.349705e-03</span></span>
<span><span class="co">## 24:                                     Asian        12     5 2.455796e-03</span></span>
<span><span class="co">## 25:                                     Asian        13   126 6.188605e-02</span></span>
<span><span class="co">## 26: Native Hawaiian or other Pacific Islander         1     8 1.311475e-01</span></span>
<span><span class="co">## 27: Native Hawaiian or other Pacific Islander         7     1 1.639344e-02</span></span>
<span><span class="co">## 28: Native Hawaiian or other Pacific Islander         8    50 8.196721e-01</span></span>
<span><span class="co">## 29: Native Hawaiian or other Pacific Islander        13     2 3.278689e-02</span></span>
<span><span class="co">## 30:                                     White         1  3126 2.874747e-01</span></span>
<span><span class="co">## 31:                                     White         2   280 2.574949e-02</span></span>
<span><span class="co">## 32:                                     White         3     5 4.598124e-04</span></span>
<span><span class="co">## 33:                                     White         4    12 1.103550e-03</span></span>
<span><span class="co">## 34:                                     White         5     1 9.196248e-05</span></span>
<span><span class="co">## 35:                                     White         6    66 6.069524e-03</span></span>
<span><span class="co">## 36:                                     White         7    27 2.482987e-03</span></span>
<span><span class="co">## 37:                                     White         8  6782 6.236895e-01</span></span>
<span><span class="co">## 38:                                     White        10     1 9.196248e-05</span></span>
<span><span class="co">## 39:                                     White        11    15 1.379437e-03</span></span>
<span><span class="co">## 40:                                     White        12     2 1.839250e-04</span></span>
<span><span class="co">## 41:                                     White        13   540 4.965974e-02</span></span>
<span><span class="co">## 42:                                     White        14    17 1.563362e-03</span></span>
<span><span class="co">## 43:                               Two or more         1   268 3.549669e-01</span></span>
<span><span class="co">## 44:                               Two or more         2    27 3.576159e-02</span></span>
<span><span class="co">## 45:                               Two or more         4    12 1.589404e-02</span></span>
<span><span class="co">## 46:                               Two or more         5     1 1.324503e-03</span></span>
<span><span class="co">## 47:                               Two or more         6    10 1.324503e-02</span></span>
<span><span class="co">## 48:                               Two or more         7     2 2.649007e-03</span></span>
<span><span class="co">## 49:                               Two or more         8   386 5.112583e-01</span></span>
<span><span class="co">## 50:                               Two or more        11     2 2.649007e-03</span></span>
<span><span class="co">## 51:                               Two or more        13    44 5.827815e-02</span></span>
<span><span class="co">## 52:                               Two or more        14     3 3.973510e-03</span></span>
<span><span class="co">## 53:                                Other race         1   113 5.824742e-01</span></span>
<span><span class="co">## 54:                                Other race         7     1 5.154639e-03</span></span>
<span><span class="co">## 55:                                Other race         8    43 2.216495e-01</span></span>
<span><span class="co">## 56:                                Other race        13    37 1.907216e-01</span></span>
<span><span class="co">## 57:                      Prefer not to answer         1   303 2.953216e-01</span></span>
<span><span class="co">## 58:                      Prefer not to answer         2    11 1.072125e-02</span></span>
<span><span class="co">## 59:                      Prefer not to answer         4     5 4.873294e-03</span></span>
<span><span class="co">## 60:                      Prefer not to answer         5     1 9.746589e-04</span></span>
<span><span class="co">## 61:                      Prefer not to answer         6    11 1.072125e-02</span></span>
<span><span class="co">## 62:                      Prefer not to answer         7    13 1.267057e-02</span></span>
<span><span class="co">## 63:                      Prefer not to answer         8   610 5.945419e-01</span></span>
<span><span class="co">## 64:                      Prefer not to answer        10     1 9.746589e-04</span></span>
<span><span class="co">## 65:                      Prefer not to answer        11     9 8.771930e-03</span></span>
<span><span class="co">## 66:                      Prefer not to answer        13    58 5.653021e-02</span></span>
<span><span class="co">## 67:                      Prefer not to answer        14     4 3.898635e-03</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##  1:                 African American or Black         1   209 3.946665e-01</span></span>
<span><span class="co">##  2:                 African American or Black         3     2 4.464578e-03</span></span>
<span><span class="co">##  3:                 African American or Black         4     3 4.580824e-03</span></span>
<span><span class="co">##  4:                 African American or Black         6     4 9.761042e-03</span></span>
<span><span class="co">##  5:                 African American or Black         7     3 6.157412e-03</span></span>
<span><span class="co">##  6:                 African American or Black         8   215 3.938746e-01</span></span>
<span><span class="co">##  7:                 African American or Black        11     3 5.296464e-03</span></span>
<span><span class="co">##  8:                 African American or Black        13    88 1.811986e-01</span></span>
<span><span class="co">##  9:          American Indian or Alaska Native         1    16 2.167640e-01</span></span>
<span><span class="co">## 10:          American Indian or Alaska Native         2     6 5.707512e-02</span></span>
<span><span class="co">## 11:          American Indian or Alaska Native         3     1 2.662927e-02</span></span>
<span><span class="co">## 12:          American Indian or Alaska Native         4     3 2.090441e-02</span></span>
<span><span class="co">## 13:          American Indian or Alaska Native         5     1 2.868213e-02</span></span>
<span><span class="co">## 14:          American Indian or Alaska Native         6     1 9.830567e-03</span></span>
<span><span class="co">## 15:          American Indian or Alaska Native         8    33 5.441219e-01</span></span>
<span><span class="co">## 16:          American Indian or Alaska Native        13     5 9.599260e-02</span></span>
<span><span class="co">## 17:                                     Asian         1   600 2.912739e-01</span></span>
<span><span class="co">## 18:                                     Asian         2    23 1.217458e-02</span></span>
<span><span class="co">## 19:                                     Asian         3     1 2.699081e-04</span></span>
<span><span class="co">## 20:                                     Asian         6    18 9.918645e-03</span></span>
<span><span class="co">## 21:                                     Asian         7    34 1.536275e-02</span></span>
<span><span class="co">## 22:                                     Asian         8  1212 5.949273e-01</span></span>
<span><span class="co">## 23:                                     Asian        11    17 8.523162e-03</span></span>
<span><span class="co">## 24:                                     Asian        12     5 1.901799e-03</span></span>
<span><span class="co">## 25:                                     Asian        13   126 6.564797e-02</span></span>
<span><span class="co">## 26: Native Hawaiian or other Pacific Islander         1     8 1.488617e-01</span></span>
<span><span class="co">## 27: Native Hawaiian or other Pacific Islander         7     1 1.700903e-02</span></span>
<span><span class="co">## 28: Native Hawaiian or other Pacific Islander         8    50 8.222557e-01</span></span>
<span><span class="co">## 29: Native Hawaiian or other Pacific Islander        13     2 1.187361e-02</span></span>
<span><span class="co">## 30:                                     White         1  3126 2.871490e-01</span></span>
<span><span class="co">## 31:                                     White         2   280 2.565400e-02</span></span>
<span><span class="co">## 32:                                     White         3     5 2.205304e-04</span></span>
<span><span class="co">## 33:                                     White         4    12 1.117842e-03</span></span>
<span><span class="co">## 34:                                     White         5     1 1.658096e-04</span></span>
<span><span class="co">## 35:                                     White         6    66 5.297853e-03</span></span>
<span><span class="co">## 36:                                     White         7    27 2.342929e-03</span></span>
<span><span class="co">## 37:                                     White         8  6782 6.239571e-01</span></span>
<span><span class="co">## 38:                                     White        10     1 9.260445e-05</span></span>
<span><span class="co">## 39:                                     White        11    15 1.676031e-03</span></span>
<span><span class="co">## 40:                                     White        12     2 2.029611e-04</span></span>
<span><span class="co">## 41:                                     White        13   540 5.053367e-02</span></span>
<span><span class="co">## 42:                                     White        14    17 1.589649e-03</span></span>
<span><span class="co">## 43:                               Two or more         1   268 3.492208e-01</span></span>
<span><span class="co">## 44:                               Two or more         2    27 4.201683e-02</span></span>
<span><span class="co">## 45:                               Two or more         4    12 1.217126e-02</span></span>
<span><span class="co">## 46:                               Two or more         5     1 2.516058e-03</span></span>
<span><span class="co">## 47:                               Two or more         6    10 1.236232e-02</span></span>
<span><span class="co">## 48:                               Two or more         7     2 2.082812e-03</span></span>
<span><span class="co">## 49:                               Two or more         8   386 5.172801e-01</span></span>
<span><span class="co">## 50:                               Two or more        11     2 2.542968e-03</span></span>
<span><span class="co">## 51:                               Two or more        13    44 5.595606e-02</span></span>
<span><span class="co">## 52:                               Two or more        14     3 3.850780e-03</span></span>
<span><span class="co">## 53:                                Other race         1   113 5.530963e-01</span></span>
<span><span class="co">## 54:                                Other race         7     1 1.011257e-02</span></span>
<span><span class="co">## 55:                                Other race         8    43 2.469418e-01</span></span>
<span><span class="co">## 56:                                Other race        13    37 1.898493e-01</span></span>
<span><span class="co">## 57:                      Prefer not to answer         1   303 2.907704e-01</span></span>
<span><span class="co">## 58:                      Prefer not to answer         2    11 1.146677e-02</span></span>
<span><span class="co">## 59:                      Prefer not to answer         4     5 5.028106e-03</span></span>
<span><span class="co">## 60:                      Prefer not to answer         5     1 1.473887e-03</span></span>
<span><span class="co">## 61:                      Prefer not to answer         6    11 9.359569e-03</span></span>
<span><span class="co">## 62:                      Prefer not to answer         7    13 1.295985e-02</span></span>
<span><span class="co">## 63:                      Prefer not to answer         8   610 5.985288e-01</span></span>
<span><span class="co">## 64:                      Prefer not to answer        10     1 1.312681e-03</span></span>
<span><span class="co">## 65:                      Prefer not to answer        11     9 1.063962e-02</span></span>
<span><span class="co">## 66:                      Prefer not to answer        13    58 5.485817e-02</span></span>
<span><span class="co">## 67:                      Prefer not to answer        14     4 3.602196e-03</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##          prop_se     est     est_se</span></span>
<span><span class="co">##  1: 2.429706e-02  108643  8560.3427</span></span>
<span><span class="co">##  2: 3.283191e-03    1229   905.7243</span></span>
<span><span class="co">##  3: 2.686792e-03    1261   740.2864</span></span>
<span><span class="co">##  4: 4.999621e-03    2687  1383.1968</span></span>
<span><span class="co">##  5: 3.860574e-03    1695  1065.8861</span></span>
<span><span class="co">##  6: 2.421706e-02  108425  8479.0803</span></span>
<span><span class="co">##  7: 3.224025e-03    1458   889.1873</span></span>
<span><span class="co">##  8: 1.941503e-02   49880  5916.5940</span></span>
<span><span class="co">##  9: 5.494601e-02    7497  2100.5142</span></span>
<span><span class="co">## 10: 3.321030e-02    1974  1184.1425</span></span>
<span><span class="co">## 11: 2.618012e-02     921   921.0000</span></span>
<span><span class="co">## 12: 1.289936e-02     723   443.7522</span></span>
<span><span class="co">## 13: 2.813839e-02     992   992.0000</span></span>
<span><span class="co">## 14: 9.831307e-03     340   340.0000</span></span>
<span><span class="co">## 15: 6.977011e-02   18819  3639.8662</span></span>
<span><span class="co">## 16: 4.237077e-02    3320  1545.2004</span></span>
<span><span class="co">## 17: 1.152255e-02  304323 14082.0778</span></span>
<span><span class="co">## 18: 2.795244e-03   12720  2936.7950</span></span>
<span><span class="co">## 19: 2.699309e-04     282   282.0000</span></span>
<span><span class="co">## 20: 2.519370e-03   10363  2644.1278</span></span>
<span><span class="co">## 21: 3.116633e-03   16051  3278.9512</span></span>
<span><span class="co">## 22: 1.246723e-02  621580 19809.5298</span></span>
<span><span class="co">## 23: 2.334265e-03    8905  2448.2679</span></span>
<span><span class="co">## 24: 1.065326e-03    1987  1113.9160</span></span>
<span><span class="co">## 25: 6.397536e-03   68589  6902.0999</span></span>
<span><span class="co">## 26: 5.148319e-02    4551  1702.4167</span></span>
<span><span class="co">## 27: 1.690099e-02     520   520.0000</span></span>
<span><span class="co">## 28: 5.414158e-02   25138  4072.5086</span></span>
<span><span class="co">## 29: 1.063317e-02     363   324.5971</span></span>
<span><span class="co">## 30: 4.984702e-03 1569011 29703.8157</span></span>
<span><span class="co">## 31: 1.726719e-03  140176  9489.7012</span></span>
<span><span class="co">## 32: 1.286871e-04    1205   703.1226</span></span>
<span><span class="co">## 33: 3.785269e-04    6108  2068.9487</span></span>
<span><span class="co">## 34: 1.657975e-04     906   906.0000</span></span>
<span><span class="co">## 35: 7.787002e-04   28948  4259.2590</span></span>
<span><span class="co">## 36: 5.276477e-04   12802  2884.6110</span></span>
<span><span class="co">## 37: 5.335825e-03 3409364 38909.0413</span></span>
<span><span class="co">## 38: 9.260448e-05     506   506.0000</span></span>
<span><span class="co">## 39: 4.836562e-04    9158  2644.2357</span></span>
<span><span class="co">## 40: 1.556098e-04    1109   850.3061</span></span>
<span><span class="co">## 41: 2.417239e-03  276121 13374.0340</span></span>
<span><span class="co">## 42: 4.421815e-04    8686  2417.0707</span></span>
<span><span class="co">## 43: 1.981278e-02  129775  9000.3551</span></span>
<span><span class="co">## 44: 8.516278e-03   15614  3233.1708</span></span>
<span><span class="co">## 45: 4.110224e-03    4523  1534.0176</span></span>
<span><span class="co">## 46: 2.512005e-03     935   935.0000</span></span>
<span><span class="co">## 47: 4.819278e-03    4594  1802.6239</span></span>
<span><span class="co">## 48: 1.472502e-03     774   547.3488</span></span>
<span><span class="co">## 49: 2.088633e-02  192228 11153.6480</span></span>
<span><span class="co">## 50: 1.839233e-03     945   684.0392</span></span>
<span><span class="co">## 51: 9.722212e-03   20794  3717.3376</span></span>
<span><span class="co">## 52: 2.791640e-03    1431  1039.6301</span></span>
<span><span class="co">## 53: 4.198681e-02   52178  5774.8481</span></span>
<span><span class="co">## 54: 1.004616e-02     954   954.0000</span></span>
<span><span class="co">## 55: 3.722673e-02   23296  4092.9694</span></span>
<span><span class="co">## 56: 3.271727e-02   17910  3417.7254</span></span>
<span><span class="co">## 57: 1.621253e-02  151512  9943.4628</span></span>
<span><span class="co">## 58: 3.894104e-03    5975  2040.7973</span></span>
<span><span class="co">## 59: 2.518591e-03    2620  1315.4777</span></span>
<span><span class="co">## 60: 1.472705e-03     768   768.0000</span></span>
<span><span class="co">## 61: 3.111574e-03    4877  1626.7694</span></span>
<span><span class="co">## 62: 4.282354e-03    6753  2246.9635</span></span>
<span><span class="co">## 63: 1.752272e-02  311876 14222.5941</span></span>
<span><span class="co">## 64: 1.311840e-03     684   684.0000</span></span>
<span><span class="co">## 65: 3.778042e-03    5544  1979.2913</span></span>
<span><span class="co">## 66: 8.096318e-03   28585  4331.7748</span></span>
<span><span class="co">## 67: 2.051498e-03    1877  1070.6232</span></span>
<span><span class="co">##          prop_se     est     est_se</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
<p>If we want to summarize a select all that apply variable, we can set
<code>summarize_vartype</code> to checkbox.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'race'</span>,</span>
<span>                   summarize_by <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="va">test_data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                   summarize_var <span class="op">=</span> <span class="st">'race'</span>,</span>
<span>                                   summarize_by <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                                   summarize_vartype <span class="op">=</span> <span class="st">'checkbox'</span>,</span>
<span>                                   weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                   wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                   se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     mode_type                                      race count        prop</span></span>
<span><span class="co">##  1:         1                 African American or Black   251 0.050371262</span></span>
<span><span class="co">##  2:         1          American Indian or Alaska Native   107 0.021473008</span></span>
<span><span class="co">##  3:         1                                     Asian   768 0.154124022</span></span>
<span><span class="co">##  4:         1 Native Hawaiian or other Pacific Islander    11 0.002207506</span></span>
<span><span class="co">##  5:         1                                     White  3345 0.671282360</span></span>
<span><span class="co">##  6:         1                                Other race   198 0.039735099</span></span>
<span><span class="co">##  7:         1                      Prefer not to answer   303 0.060806743</span></span>
<span><span class="co">##  8:         2          American Indian or Alaska Native     6 0.016042781</span></span>
<span><span class="co">##  9:         2                                     Asian    48 0.128342246</span></span>
<span><span class="co">## 10:         2                                     White   307 0.820855615</span></span>
<span><span class="co">## 11:         2                                Other race     2 0.005347594</span></span>
<span><span class="co">## 12:         2                      Prefer not to answer    11 0.029411765</span></span>
<span><span class="co">## 13:         3                 African American or Black     2 0.222222222</span></span>
<span><span class="co">## 14:         3          American Indian or Alaska Native     1 0.111111111</span></span>
<span><span class="co">## 15:         3                                     Asian     1 0.111111111</span></span>
<span><span class="co">## 16:         3                                     White     5 0.555555556</span></span>
<span><span class="co">## 17:         4                 African American or Black     3 0.061224490</span></span>
<span><span class="co">## 18:         4          American Indian or Alaska Native    15 0.306122449</span></span>
<span><span class="co">## 19:         4                                     Asian     2 0.040816327</span></span>
<span><span class="co">## 20:         4                                     White    24 0.489795918</span></span>
<span><span class="co">## 21:         4                      Prefer not to answer     5 0.102040816</span></span>
<span><span class="co">## 22:         5          American Indian or Alaska Native     1 0.200000000</span></span>
<span><span class="co">## 23:         5                                     Asian     1 0.200000000</span></span>
<span><span class="co">## 24:         5                                     White     2 0.400000000</span></span>
<span><span class="co">## 25:         5                      Prefer not to answer     1 0.200000000</span></span>
<span><span class="co">## 26:         6                 African American or Black     6 0.050000000</span></span>
<span><span class="co">## 27:         6          American Indian or Alaska Native     1 0.008333333</span></span>
<span><span class="co">## 28:         6                                     Asian    28 0.233333333</span></span>
<span><span class="co">## 29:         6                                     White    73 0.608333333</span></span>
<span><span class="co">## 30:         6                                Other race     1 0.008333333</span></span>
<span><span class="co">## 31:         6                      Prefer not to answer    11 0.091666667</span></span>
<span><span class="co">## 32:         7                 African American or Black     5 0.060240964</span></span>
<span><span class="co">## 33:         7                                     Asian    34 0.409638554</span></span>
<span><span class="co">## 34:         7 Native Hawaiian or other Pacific Islander     1 0.012048193</span></span>
<span><span class="co">## 35:         7                                     White    29 0.349397590</span></span>
<span><span class="co">## 36:         7                                Other race     1 0.012048193</span></span>
<span><span class="co">## 37:         7                      Prefer not to answer    13 0.156626506</span></span>
<span><span class="co">## 38:         8                 African American or Black   234 0.024064171</span></span>
<span><span class="co">## 39:         8          American Indian or Alaska Native    86 0.008844097</span></span>
<span><span class="co">## 40:         8                                     Asian  1468 0.150966680</span></span>
<span><span class="co">## 41:         8 Native Hawaiian or other Pacific Islander   114 0.011723571</span></span>
<span><span class="co">## 42:         8                                     White  7113 0.731489099</span></span>
<span><span class="co">## 43:         8                                Other race    99 0.010180995</span></span>
<span><span class="co">## 44:         8                      Prefer not to answer   610 0.062731386</span></span>
<span><span class="co">## 45:        10                                     White     1 0.500000000</span></span>
<span><span class="co">## 46:        10                      Prefer not to answer     1 0.500000000</span></span>
<span><span class="co">## 47:        11                 African American or Black     5 0.100000000</span></span>
<span><span class="co">## 48:        11          American Indian or Alaska Native     2 0.040000000</span></span>
<span><span class="co">## 49:        11                                     Asian    17 0.340000000</span></span>
<span><span class="co">## 50:        11                                     White    17 0.340000000</span></span>
<span><span class="co">## 51:        11                      Prefer not to answer     9 0.180000000</span></span>
<span><span class="co">## 52:        12                                     Asian     5 0.714285714</span></span>
<span><span class="co">## 53:        12                                     White     2 0.285714286</span></span>
<span><span class="co">## 54:        13                 African American or Black   100 0.103519669</span></span>
<span><span class="co">## 55:        13          American Indian or Alaska Native    25 0.025879917</span></span>
<span><span class="co">## 56:        13                                     Asian   149 0.154244306</span></span>
<span><span class="co">## 57:        13 Native Hawaiian or other Pacific Islander     2 0.002070393</span></span>
<span><span class="co">## 58:        13                                     White   576 0.596273292</span></span>
<span><span class="co">## 59:        13                                Other race    56 0.057971014</span></span>
<span><span class="co">## 60:        13                      Prefer not to answer    58 0.060041408</span></span>
<span><span class="co">## 61:        14                                     Asian     3 0.111111111</span></span>
<span><span class="co">## 62:        14                                     White    20 0.740740741</span></span>
<span><span class="co">## 63:        14                      Prefer not to answer     4 0.148148148</span></span>
<span><span class="co">##     mode_type                                      race count        prop</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     mode_type                                      race count         prop</span></span>
<span><span class="co">##  1:         1                 African American or Black   251 0.0519512011</span></span>
<span><span class="co">##  2:         1          American Indian or Alaska Native   107 0.0219408924</span></span>
<span><span class="co">##  3:         1                                     Asian   768 0.1533670063</span></span>
<span><span class="co">##  4:         1 Native Hawaiian or other Pacific Islander    11 0.0024829898</span></span>
<span><span class="co">##  5:         1                                     White  3345 0.6718269033</span></span>
<span><span class="co">##  6:         1                                Other race   198 0.0377041703</span></span>
<span><span class="co">##  7:         1                      Prefer not to answer   303 0.0607268367</span></span>
<span><span class="co">##  8:         2          American Indian or Alaska Native     6 0.0102773425</span></span>
<span><span class="co">##  9:         2                                     Asian    48 0.1393272350</span></span>
<span><span class="co">## 10:         2                                     White   307 0.8110978638</span></span>
<span><span class="co">## 11:         2                                Other race     2 0.0081895946</span></span>
<span><span class="co">## 12:         2                      Prefer not to answer    11 0.0311079642</span></span>
<span><span class="co">## 13:         3                 African American or Black     2 0.3379158647</span></span>
<span><span class="co">## 14:         3          American Indian or Alaska Native     1 0.2532306846</span></span>
<span><span class="co">## 15:         3                                     Asian     1 0.0775364311</span></span>
<span><span class="co">## 16:         3                                     White     5 0.3313170195</span></span>
<span><span class="co">## 17:         4                 African American or Black     3 0.0604071856</span></span>
<span><span class="co">## 18:         4          American Indian or Alaska Native    15 0.2513053892</span></span>
<span><span class="co">## 19:         4                                     Asian     2 0.0535089820</span></span>
<span><span class="co">## 20:         4                                     White    24 0.5092694611</span></span>
<span><span class="co">## 21:         4                      Prefer not to answer     5 0.1255089820</span></span>
<span><span class="co">## 22:         5          American Indian or Alaska Native     1 0.2186948854</span></span>
<span><span class="co">## 23:         5                                     Asian     1 0.2061287478</span></span>
<span><span class="co">## 24:         5                                     White     2 0.4058641975</span></span>
<span><span class="co">## 25:         5                      Prefer not to answer     1 0.1693121693</span></span>
<span><span class="co">## 26:         6                 African American or Black     6 0.0487740014</span></span>
<span><span class="co">## 27:         6          American Indian or Alaska Native     1 0.0060280482</span></span>
<span><span class="co">## 28:         6                                     Asian    28 0.2651809301</span></span>
<span><span class="co">## 29:         6                                     White    73 0.5838164637</span></span>
<span><span class="co">## 30:         6                                Other race     1 0.0097335248</span></span>
<span><span class="co">## 31:         6                      Prefer not to answer    11 0.0864670319</span></span>
<span><span class="co">## 32:         7                 African American or Black     5 0.0612305632</span></span>
<span><span class="co">## 33:         7                                     Asian    34 0.3980606602</span></span>
<span><span class="co">## 34:         7 Native Hawaiian or other Pacific Islander     1 0.0128958659</span></span>
<span><span class="co">## 35:         7                                     White    29 0.3366812985</span></span>
<span><span class="co">## 36:         7                                Other race     1 0.0236589539</span></span>
<span><span class="co">## 37:         7                      Prefer not to answer    13 0.1674726583</span></span>
<span><span class="co">## 38:         8                 African American or Black   234 0.0236711337</span></span>
<span><span class="co">## 39:         8          American Indian or Alaska Native    86 0.0087625109</span></span>
<span><span class="co">## 40:         8                                     Asian  1468 0.1528297944</span></span>
<span><span class="co">## 41:         8 Native Hawaiian or other Pacific Islander   114 0.0115648346</span></span>
<span><span class="co">## 42:         8                                     White  7113 0.7283770436</span></span>
<span><span class="co">## 43:         8                                Other race    99 0.0112141873</span></span>
<span><span class="co">## 44:         8                      Prefer not to answer   610 0.0635804955</span></span>
<span><span class="co">## 45:        10                                     White     1 0.4252100840</span></span>
<span><span class="co">## 46:        10                      Prefer not to answer     1 0.5747899160</span></span>
<span><span class="co">## 47:        11                 African American or Black     5 0.0861290323</span></span>
<span><span class="co">## 48:        11          American Indian or Alaska Native     2 0.0338709677</span></span>
<span><span class="co">## 49:        11                                     Asian    17 0.3191756272</span></span>
<span><span class="co">## 50:        11                                     White    17 0.3621146953</span></span>
<span><span class="co">## 51:        11                      Prefer not to answer     9 0.1987096774</span></span>
<span><span class="co">## 52:        12                                     Asian     5 0.6417958656</span></span>
<span><span class="co">## 53:        12                                     White     2 0.3582041344</span></span>
<span><span class="co">## 54:        13                 African American or Black   100 0.1106632274</span></span>
<span><span class="co">## 55:        13          American Indian or Alaska Native    25 0.0260516059</span></span>
<span><span class="co">## 56:        13                                     Asian   149 0.1600454443</span></span>
<span><span class="co">## 57:        13 Native Hawaiian or other Pacific Islander     2 0.0007338196</span></span>
<span><span class="co">## 58:        13                                     White   576 0.5933042501</span></span>
<span><span class="co">## 59:        13                                Other race    56 0.0514158877</span></span>
<span><span class="co">## 60:        13                      Prefer not to answer    58 0.0577857651</span></span>
<span><span class="co">## 61:        14                                     Asian     3 0.1065921788</span></span>
<span><span class="co">## 62:        14                                     White    20 0.7535940410</span></span>
<span><span class="co">## 63:        14                      Prefer not to answer     4 0.1398137803</span></span>
<span><span class="co">##     mode_type                                      race count         prop</span></span>
<span><span class="co">##          prop_se     est     est_se</span></span>
<span><span class="co">##  1: 0.0039135676  129617  9371.8975</span></span>
<span><span class="co">##  2: 0.0025457540   54742  5993.1948</span></span>
<span><span class="co">##  3: 0.0062380159  382647 15830.8104</span></span>
<span><span class="co">##  4: 0.0008435027    6195  1965.6087</span></span>
<span><span class="co">##  5: 0.0075829943 1676192 32913.0946</span></span>
<span><span class="co">##  6: 0.0032730709   94071  7766.3382</span></span>
<span><span class="co">##  7: 0.0041614975  151512 10006.6615</span></span>
<span><span class="co">##  8: 0.0066705307    1974  1184.2006</span></span>
<span><span class="co">##  9: 0.0220212114   26761  4223.5084</span></span>
<span><span class="co">## 10: 0.0200102087  155790 10077.6666</span></span>
<span><span class="co">## 11: 0.0063242181    1573  1121.8635</span></span>
<span><span class="co">## 12: 0.0113591486    5975  2041.2234</span></span>
<span><span class="co">## 13: 0.1986555603    1229   905.7454</span></span>
<span><span class="co">## 14: 0.2062052313     921   921.0000</span></span>
<span><span class="co">## 15: 0.0780955046     282   282.0000</span></span>
<span><span class="co">## 16: 0.1766944428    1205   703.1601</span></span>
<span><span class="co">## 17: 0.0473231901    1261   740.3252</span></span>
<span><span class="co">## 18: 0.0898743324    5246  1597.2108</span></span>
<span><span class="co">## 19: 0.0501735321    1117   792.0122</span></span>
<span><span class="co">## 20: 0.0883485978   10631  2576.0573</span></span>
<span><span class="co">## 21: 0.0778037247    2620  1315.5853</span></span>
<span><span class="co">## 22: 0.2306702310     992   992.0000</span></span>
<span><span class="co">## 23: 0.2222702184     935   935.0000</span></span>
<span><span class="co">## 24: 0.2508999427    1841  1301.9391</span></span>
<span><span class="co">## 25: 0.1937807326     768   768.0000</span></span>
<span><span class="co">## 26: 0.0259368649    2751  1384.0878</span></span>
<span><span class="co">## 27: 0.0065600158     340   340.0000</span></span>
<span><span class="co">## 28: 0.0514001081   14957  3201.0174</span></span>
<span><span class="co">## 29: 0.0533733744   32929  4596.8792</span></span>
<span><span class="co">## 30: 0.0105496451     549   549.0000</span></span>
<span><span class="co">## 31: 0.0301671848    4877  1627.1277</span></span>
<span><span class="co">## 32: 0.0294968753    2469  1198.2454</span></span>
<span><span class="co">## 33: 0.0641481145   16051  3281.0272</span></span>
<span><span class="co">## 34: 0.0130877913     520   520.0000</span></span>
<span><span class="co">## 35: 0.0612054817   13576  2937.5137</span></span>
<span><span class="co">## 36: 0.0237436408     954   954.0000</span></span>
<span><span class="co">## 37: 0.0512408715    6753  2247.4613</span></span>
<span><span class="co">## 38: 0.0018366535  116112  8752.8037</span></span>
<span><span class="co">## 39: 0.0011257140   42982  5325.5094</span></span>
<span><span class="co">## 40: 0.0043609869  749663 22304.3628</span></span>
<span><span class="co">## 41: 0.0012870265   56728  6096.7034</span></span>
<span><span class="co">## 42: 0.0051034654 3572846 47455.2016</span></span>
<span><span class="co">## 43: 0.0013132708   55008  6222.7103</span></span>
<span><span class="co">## 44: 0.0029617241  311876 14409.5931</span></span>
<span><span class="co">## 45: 0.3456445313     506   506.0000</span></span>
<span><span class="co">## 46: 0.3456445313     684   684.0000</span></span>
<span><span class="co">## 47: 0.0417857331    2403  1121.8892</span></span>
<span><span class="co">## 48: 0.0260170786     945   684.0564</span></span>
<span><span class="co">## 49: 0.0770995186    8905  2449.0935</span></span>
<span><span class="co">## 50: 0.0807176332   10103  2732.0317</span></span>
<span><span class="co">## 51: 0.0674104855    5544  1979.6650</span></span>
<span><span class="co">## 52: 0.2183667764    1987  1113.9830</span></span>
<span><span class="co">## 53: 0.2183667764    1109   850.3225</span></span>
<span><span class="co">## 54: 0.0124258017   54742  6169.0586</span></span>
<span><span class="co">## 55: 0.0062111642   12887  2931.8737</span></span>
<span><span class="co">## 56: 0.0144840078   79170  7422.9806</span></span>
<span><span class="co">## 57: 0.0006973119     363   324.5994</span></span>
<span><span class="co">## 58: 0.0184312764  293491 13961.4327</span></span>
<span><span class="co">## 59: 0.0083564884   25434  3991.8927</span></span>
<span><span class="co">## 60: 0.0090336084   28585  4336.8548</span></span>
<span><span class="co">## 61: 0.0807452217    1431  1039.6558</span></span>
<span><span class="co">## 62: 0.0827610341   10117  2631.8673</span></span>
<span><span class="co">## 63: 0.0827610341    1877  1070.6844</span></span>
<span><span class="co">##          prop_se     est     est_se</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
<p><code>summarize_by</code> can be used with an unlimited amount of
variables. To use more than one <code>summarize_by</code> variable pass
a list to the argument.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                   summarize_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'race'</span>, <span class="st">'ethnicity'</span><span class="op">)</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'hh'</span> <span class="op">=</span> <span class="va">hh</span>,</span>
<span>                               <span class="st">'person'</span> <span class="op">=</span> <span class="va">person</span>,</span>
<span>                               <span class="st">'day'</span> <span class="op">=</span> <span class="va">day</span>,</span>
<span>                               <span class="st">'trip'</span> <span class="op">=</span> <span class="va">trip</span>,</span>
<span>                               <span class="st">'vehicle'</span> <span class="op">=</span> <span class="va">vehicle</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_ethnicity_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                             summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                                             summarize_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'race'</span>, <span class="st">'ethnicity'</span><span class="op">)</span>,</span>
<span>                                             summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                             weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                             wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                             se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mode_by_race_ethnicity_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                          race                                   ethnicity</span></span>
<span><span class="co">##  1: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  2: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  3: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  4: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  5: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  6: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  7: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  8: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  9: African American or Black                                Puerto Rican</span></span>
<span><span class="co">## 10: African American or Black Another Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##     mode_type count        prop     prop_se    est    est_se</span></span>
<span><span class="co">##  1:         1   173 0.378706293 0.025556563  92766 7920.4716</span></span>
<span><span class="co">##  2:         3     2 0.005017248 0.003688597   1229  905.7243</span></span>
<span><span class="co">##  3:         4     2 0.003600661 0.002593898    882  635.9449</span></span>
<span><span class="co">##  4:         6     3 0.008483191 0.005047282   2078 1241.9804</span></span>
<span><span class="co">##  5:         7     1 0.001612541 0.001612226    395  395.0000</span></span>
<span><span class="co">##  6:         8   207 0.423694148 0.025957360 103786 8289.1748</span></span>
<span><span class="co">##  7:        11     3 0.005952114 0.003622216   1458  889.1873</span></span>
<span><span class="co">##  8:        13    75 0.172933804 0.020192600  42361 5448.6115</span></span>
<span><span class="co">##  9:         6     1 1.000000000 0.000000000    609  609.0000</span></span>
<span><span class="co">## 10:         1    35 0.636811186 0.081696434  15393 3240.6602</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="calculating-trip-rates">Calculating trip rates<a class="anchor" aria-label="anchor" href="#calculating-trip-rates"></a>
</h3>
<p><code>hts_summary</code> can also be used to calculate trip
rates.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_triprate.html">hts_prep_triprate</a></span><span class="op">(</span>summarize_by <span class="op">=</span> <span class="st">'employment'</span>,</span>
<span>                       variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                       trip_name <span class="op">=</span> <span class="st">'trip'</span>,</span>
<span>                       day_name <span class="op">=</span> <span class="st">'day'</span>,</span>
<span>                       hts_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'hh'</span> <span class="op">=</span> <span class="va">hh</span>,</span>
<span>                                       <span class="st">'person'</span> <span class="op">=</span> <span class="va">person</span>,</span>
<span>                                       <span class="st">'day'</span> <span class="op">=</span> <span class="va">day</span>,</span>
<span>                                       <span class="st">'trip'</span> <span class="op">=</span> <span class="va">trip</span>,</span>
<span>                                       <span class="st">'vehicle'</span> <span class="op">=</span> <span class="va">vehicle</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">trip_rate_by_employment_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">num</span>, </span>
<span>                                              summarize_var <span class="op">=</span> <span class="st">'num_trips_wtd'</span>,</span>
<span>                                              summarize_by <span class="op">=</span> <span class="st">'employment'</span>,</span>
<span>                                              summarize_vartype <span class="op">=</span> <span class="st">'numeric'</span>,</span>
<span>                                              weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                              wtname <span class="op">=</span> <span class="st">'day_weight'</span>,</span>
<span>                                              se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    employment count min      max     mean    mean_se   median</span></span>
<span><span class="co">## 1:          1  2043   0 65.38043 4.140200 0.09026934 2.852713</span></span>
<span><span class="co">## 2:          2   244   0 60.70732 4.183628 0.26654290 2.560976</span></span>
<span><span class="co">## 3:          3   281   0 52.65060 5.210643 0.34255543 3.580769</span></span>
<span><span class="co">## 4:          5   914   0 65.47059 3.429423 0.12996342 2.181070</span></span>
<span><span class="co">## 5:          6   215   0 63.47727 3.341959 0.25411564 2.196911</span></span>
<span><span class="co">## 6:          7    35   0 29.84018 3.432427 0.68787476 1.920398</span></span>
<span><span class="co">## 7:          8    27   0 26.14286 4.076049 0.60438358 2.784161</span></span>
<span><span class="co">## 8:        995   547   0 61.30769 2.419237 0.12986732 1.450284</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="labeling-values">Labeling Values<a class="anchor" aria-label="anchor" href="#labeling-values"></a>
</h3>
<p>To label values we can use <code>factorize_column</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span><span class="op">$</span><span class="va">employment</span> <span class="op">=</span>  <span class="fu"><a href="../reference/factorize_column.html">factorize_column</a></span><span class="op">(</span></span>
<span>  <span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span><span class="op">$</span><span class="va">employment</span>,</span>
<span>  <span class="st">'employment'</span>,</span>
<span>  <span class="va">value_labels</span>,</span>
<span>  variable_colname <span class="op">=</span> <span class="st">'variable'</span>,</span>
<span>  value_colname <span class="op">=</span> <span class="st">'value'</span>,</span>
<span>  value_label_colname <span class="op">=</span> <span class="st">'label'</span>,</span>
<span>  value_order_colname <span class="op">=</span> <span class="st">'val_order'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                                             employment</span></span>
<span><span class="co">## 1:                                           Employed full-time (35+ hours/week, paid)</span></span>
<span><span class="co">## 2:                                 Employed part-time (fewer than 35 hours/week, paid)</span></span>
<span><span class="co">## 3:                                                                       Self-employed</span></span>
<span><span class="co">## 4: Not employed and not looking for work (e.g., retired, stay-at-home parent, student)</span></span>
<span><span class="co">## 5:                                                     Unemployed and looking for work</span></span>
<span><span class="co">## 6:                                                          Unpaid volunteer or intern</span></span>
<span><span class="co">## 7:               Employed, but not currently working (e.g., on leave, furloughed 100%)</span></span>
<span><span class="co">## 8:                                                                    Missing Response</span></span>
<span><span class="co">##    count min      max     mean    mean_se   median</span></span>
<span><span class="co">## 1:  2043   0 65.38043 4.140200 0.09026934 2.852713</span></span>
<span><span class="co">## 2:   244   0 60.70732 4.183628 0.26654290 2.560976</span></span>
<span><span class="co">## 3:   281   0 52.65060 5.210643 0.34255543 3.580769</span></span>
<span><span class="co">## 4:   914   0 65.47059 3.429423 0.12996342 2.181070</span></span>
<span><span class="co">## 5:   215   0 63.47727 3.341959 0.25411564 2.196911</span></span>
<span><span class="co">## 6:    35   0 29.84018 3.432427 0.68787476 1.920398</span></span>
<span><span class="co">## 7:    27   0 26.14286 4.076049 0.60438358 2.784161</span></span>
<span><span class="co">## 8:   547   0 61.30769 2.419237 0.12986732 1.450284</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="creating-visuals-using-hts_summary-output">Creating Visuals using hts_summary output<a class="anchor" aria-label="anchor" href="#creating-visuals-using-hts_summary-output"></a>
</h3>
<p><code>hts_summary</code> creates outputs that can easily be used to
create visuals.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>  <span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mean</span>, y <span class="op">=</span> <span class="va">employment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">'identity'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_errorbar</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="op">(</span><span class="va">mean</span> <span class="op">-</span> <span class="va">mean_se</span><span class="op">)</span>, </span>
<span>        xmax <span class="op">=</span> <span class="op">(</span><span class="va">mean</span> <span class="op">+</span> <span class="va">mean_se</span><span class="op">)</span>,</span>
<span>        width <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">'Mean Trip Rate'</span>,</span>
<span>       y <span class="op">=</span> <span class="st">'Employment'</span><span class="op">)</span>  <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="va">x</span>, width <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span>
<span>                   limits <span class="op">=</span> <span class="va">rev</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting_started_files/figure-html/ggplot_example-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="summarizing-a-new-variable">Summarizing a new variable<a class="anchor" aria-label="anchor" href="#summarizing-a-new-variable"></a>
</h3>
<p>To summarize a new variable with <code>hts_summary</code> it must
first be added to the <code>variable_list</code> and
<code>value_labels</code>. In this example we are creating a new
variable called <code>hh_size</code> that we want to summarize.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_data</span><span class="op">$</span><span class="va">hh</span><span class="op">[</span>, <span class="va">hh_size</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">num_people</span> <span class="op">&lt;</span> <span class="fl">4</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">variable_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">variable_list</span>,</span>
<span>                      <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="st">'hh_size'</span>,</span>
<span>                                 is_checkbox <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                 hh <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                 person <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                 day <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                 trip <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                 vehicle <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                 description <span class="op">=</span> <span class="st">'Household size'</span>,</span>
<span>                                 data_type <span class="op">=</span> <span class="st">'integer/categorical'</span>,</span>
<span>                                 shared_name <span class="op">=</span> <span class="st">'hh_size'</span><span class="op">)</span></span>
<span>                      <span class="op">)</span></span>
<span></span>
<span><span class="va">value_labels</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">value_labels</span>,</span>
<span>                     <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'hh_size'</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                                value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>                                label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Small household'</span>, <span class="st">'Large household'</span><span class="op">)</span>,</span>
<span>                                val_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">214</span><span class="op">:</span><span class="fl">215</span><span class="op">)</span><span class="op">)</span></span>
<span>                      <span class="op">)</span></span>
<span></span>
<span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'hh_size'</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="va">test_data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">hh_size_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                              summarize_var <span class="op">=</span> <span class="st">'hh_size'</span>,</span>
<span>                              summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                              weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              wtname <span class="op">=</span> <span class="st">'hh_weight'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/factorize_df.html">factorize_df</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">hh_size_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="va">value_labels</span>, value_label_colname <span class="op">=</span> <span class="st">'label'</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##            hh_size count      prop    est</span></span>
<span><span class="co">## 1: Small household   875 0.8728126 436374</span></span>
<span><span class="co">## 2: Large household   125 0.1271874  63589</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by RSG Inc., Ashley Asmus, Erika Redding, Jacob Moore, James Clark.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
