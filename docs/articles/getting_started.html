<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="travelSurveyTools">
<title>Getting Started • travelSurveyTools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="travelSurveyTools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">travelSurveyTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting Started</h1>
            
      
      
      <div class="d-none name"><code>getting_started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="about-travelsurveytools">About TravelSurveyTools<a class="anchor" aria-label="anchor" href="#about-travelsurveytools"></a>
</h2>
<p>The <code>travelSurveyTools</code> package provides tools for R users
to aid use of data from household travel surveys. Some possible uses
include creating custom cross tabs, labeling data, and calculating trip
rates.</p>
</div>
<div class="section level2">
<h2 id="data-assumptions">Data Assumptions<a class="anchor" aria-label="anchor" href="#data-assumptions"></a>
</h2>
<p><code>travelSurveyTools</code> assumes the the data have the
structure shown below. If this does not reflect the structure of your
data</p>
<div class="section level3">
<h3 id="hts_data">hts_data<a class="anchor" aria-label="anchor" href="#hts_data"></a>
</h3>
<p>hts_data is a list of five core tables:</p>
<div class="section level4">
<h4 id="hh">hh<a class="anchor" aria-label="anchor" href="#hh"></a>
</h4>
<p>Household dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>survey variables asked on a household level</li>
<li>hh_weight: household weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="person">person<a class="anchor" aria-label="anchor" href="#person"></a>
</h4>
<p>Person dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>person_id: 10 digit person ID</li>
<li>survey variables asked on a person level</li>
<li>person_weight: person weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="day">day<a class="anchor" aria-label="anchor" href="#day"></a>
</h4>
<p>Day dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>person_id: 10 digit person ID</li>
<li>day_id: 12 digit day ID</li>
<li>survey variable asked on a day level</li>
<li>day_weight: day weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="trip">trip<a class="anchor" aria-label="anchor" href="#trip"></a>
</h4>
<p>Trip dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>person_id: 10 digit person ID</li>
<li>day_id: 12 digit day ID</li>
<li>trip_id: 13 digit trip ID</li>
<li>survey variables asked on a trip level</li>
<li>trip_weight: trip weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="vehicle">vehicle<a class="anchor" aria-label="anchor" href="#vehicle"></a>
</h4>
<p>Vehicle dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>vehicle_id: 10 digit vehicle ID</li>
<li>survey responses asked on a vehicle level</li>
<li>hh_weight: household weight</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="codebook">Codebook<a class="anchor" aria-label="anchor" href="#codebook"></a>
</h3>
<p>In addition to data from the household travel survey. The codebook is
also required. The codebook is assumed to be in two parts:</p>
<div class="section level4">
<h4 id="variable_list">variable_list<a class="anchor" aria-label="anchor" href="#variable_list"></a>
</h4>
<p>A dataset containing information about all variables existing in the
hh, person, day, trip, and vehicle tables. The variables are as
follows:</p>
<ul>
<li>variable: Name of the variable</li>
<li>is_checkbox: The variable is a ‘Select all that Apply’ question</li>
<li>hh: The variable exists in the hh table</li>
<li>person: The variable exists in the person table</li>
<li>day: The variable exists in the day table</li>
<li>trip: The variable exists in the trip table</li>
<li>vehicle: The variable exists in the vehicle table</li>
<li>location: The variable exists in the location table</li>
<li>data_type: Data type of the variable</li>
<li>description: A description of the variable</li>
<li>logic: Conditions where the variable should have a value</li>
<li>shared_name: the shared name of checkbox variable or the variable
name for non-checkbox variables</li>
</ul>
</div>
<div class="section level4">
<h4 id="value_labels">value_labels<a class="anchor" aria-label="anchor" href="#value_labels"></a>
</h4>
<p>A dataset containing the values for all variables found in
variable_list The variables are as follows:</p>
<ul>
<li>variable: Name of the variable</li>
<li>value: The numeric value of the variable</li>
<li>label: What the numeric value of the variable represents</li>
<li>label_value: value concatenated with the label (e.g., 11 85 or
older)</li>
<li>val_order: order for each variable label to appear in</li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="using-travelsurveytools">Using travelSurveyTools<a class="anchor" aria-label="anchor" href="#using-travelsurveytools"></a>
</h2>
<div class="section level3">
<h3 id="prepping-the-data">Prepping the Data<a class="anchor" aria-label="anchor" href="#prepping-the-data"></a>
</h3>
<p>In order to create summaries of our data we first need to prepare our
data. We can do this by using <code>hts_prep_data</code>. This will
return a categorical (cat) and numeric (num) (if applicable) prepped
data table that can be used to create summaries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">travelSurveyTools</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://gdfe.co/srvyr/" class="external-link">srvyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"test_data"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"variable_list"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'hh'</span> <span class="op">=</span> <span class="va">hh</span>,</span>
<span>                               <span class="st">'person'</span> <span class="op">=</span> <span class="va">person</span>,</span>
<span>                               <span class="st">'day'</span> <span class="op">=</span> <span class="va">day</span>,</span>
<span>                               <span class="st">'trip'</span> <span class="op">=</span> <span class="va">trip</span>,</span>
<span>                               <span class="st">'vehicle'</span> <span class="op">=</span> <span class="va">vehicle</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Numeric variables will be automatically binned in
<code>hts_prep_data</code> to create categorical summaries. Here we can
make a categorical summary of a numeric variable using
<code>hts_summary</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     speed_mph count        prop</span></span>
<span><span class="co">## 1:  1 or less   575 0.038244097</span></span>
<span><span class="co">## 2:        1-9  6537 0.434785500</span></span>
<span><span class="co">## 3:       9-17  3661 0.243498503</span></span>
<span><span class="co">## 4:      17-25  2249 0.149584303</span></span>
<span><span class="co">## 5:      25-33  1012 0.067309611</span></span>
<span><span class="co">## 6:      33-41   533 0.035450615</span></span>
<span><span class="co">## 7:      41-43    76 0.005054872</span></span>
<span><span class="co">## 8: 43 or more   392 0.026072498</span></span></code></pre>
<p>Additionally, for numeric variables we can create numeric
summaries.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_num_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">num</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'numeric'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_num_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##    count min      max     mean   median</span></span>
<span><span class="co">## 1: 15035   0 109.2184 12.89507 9.728796</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="using-weighted-data">Using Weighted Data<a class="anchor" aria-label="anchor" href="#using-weighted-data"></a>
</h3>
<p>Additionally, we can use weighted data by setting
<code>weighted = TRUE</code> and specifying the name of the weight to be
used (<code>wtname</code>).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                wtname <span class="op">=</span> <span class="st">'trip_weight'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     speed_mph count        prop</span></span>
<span><span class="co">## 1:  1 or less   575 0.038244097</span></span>
<span><span class="co">## 2:        1-9  6537 0.434785500</span></span>
<span><span class="co">## 3:       9-17  3661 0.243498503</span></span>
<span><span class="co">## 4:      17-25  2249 0.149584303</span></span>
<span><span class="co">## 5:      25-33  1012 0.067309611</span></span>
<span><span class="co">## 6:      33-41   533 0.035450615</span></span>
<span><span class="co">## 7:      41-43    76 0.005054872</span></span>
<span><span class="co">## 8: 43 or more   392 0.026072498</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     speed_mph count        prop     est</span></span>
<span><span class="co">## 1:  1 or less   575 0.038596067  291500</span></span>
<span><span class="co">## 2:        1-9  6537 0.433679180 3275398</span></span>
<span><span class="co">## 3:       9-17  3661 0.243523176 1839229</span></span>
<span><span class="co">## 4:      17-25  2249 0.151377218 1143289</span></span>
<span><span class="co">## 5:      25-33  1012 0.067742784  511633</span></span>
<span><span class="co">## 6:      33-41   533 0.034100916  257550</span></span>
<span><span class="co">## 7:      41-43    76 0.005215169   39388</span></span>
<span><span class="co">## 8: 43 or more   392 0.025765490  194596</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="calculating-standard-errors">Calculating Standard Errors<a class="anchor" aria-label="anchor" href="#calculating-standard-errors"></a>
</h3>
<p>Additionally, by specifying <code>se = TRUE</code> we can calculate
standard errors.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     speed_mph count        prop</span></span>
<span><span class="co">## 1:  1 or less   575 0.038244097</span></span>
<span><span class="co">## 2:        1-9  6537 0.434785500</span></span>
<span><span class="co">## 3:       9-17  3661 0.243498503</span></span>
<span><span class="co">## 4:      17-25  2249 0.149584303</span></span>
<span><span class="co">## 5:      25-33  1012 0.067309611</span></span>
<span><span class="co">## 6:      33-41   533 0.035450615</span></span>
<span><span class="co">## 7:      41-43    76 0.005054872</span></span>
<span><span class="co">## 8: 43 or more   392 0.026072498</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     speed_mph count        prop      prop_se     est    est_se</span></span>
<span><span class="co">## 1:  1 or less   575 0.038596067 0.0018091628  291500 13731.043</span></span>
<span><span class="co">## 2:        1-9  6537 0.433679180 0.0046545746 3275398 38298.012</span></span>
<span><span class="co">## 3:       9-17  3661 0.243523176 0.0040290132 1839229 31595.081</span></span>
<span><span class="co">## 4:      17-25  2249 0.151377218 0.0033752879 1143289 26070.445</span></span>
<span><span class="co">## 5:      25-33  1012 0.067742784 0.0023796356  511633 18152.124</span></span>
<span><span class="co">## 6:      33-41   533 0.034100916 0.0016840894  257550 12764.269</span></span>
<span><span class="co">## 7:      41-43    76 0.005215169 0.0006874633   39388  5196.226</span></span>
<span><span class="co">## 8: 43 or more   392 0.025765490 0.0014748922  194596 11170.619</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="summarizing-two-variables">Summarizing Two Variables<a class="anchor" aria-label="anchor" href="#summarizing-two-variables"></a>
</h3>
<p>If we want summarize a variable by another variable (e.g., mode type
by a person’s race, mode_type by a person’s ethnicity) we can use the
<code>summarize_by</code> argument.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                   summarize_by <span class="op">=</span> <span class="st">'race'</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'hh'</span> <span class="op">=</span> <span class="va">hh</span>,</span>
<span>                               <span class="st">'person'</span> <span class="op">=</span> <span class="va">person</span>,</span>
<span>                               <span class="st">'day'</span> <span class="op">=</span> <span class="va">day</span>,</span>
<span>                               <span class="st">'trip'</span> <span class="op">=</span> <span class="va">trip</span>,</span>
<span>                               <span class="st">'vehicle'</span> <span class="op">=</span> <span class="va">vehicle</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                   summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                                   summarize_by <span class="op">=</span> <span class="st">'race'</span>,</span>
<span>                                   summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                   weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                   wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                   se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##  1:                 African American or Black         1   146 0.2997946612</span></span>
<span><span class="co">##  2:                 African American or Black         3     6 0.0123203285</span></span>
<span><span class="co">##  3:                 African American or Black         4     2 0.0041067762</span></span>
<span><span class="co">##  4:                 African American or Black         6     9 0.0184804928</span></span>
<span><span class="co">##  5:                 African American or Black         7     7 0.0143737166</span></span>
<span><span class="co">##  6:                 African American or Black         8   198 0.4065708419</span></span>
<span><span class="co">##  7:                 African American or Black        10     1 0.0020533881</span></span>
<span><span class="co">##  8:                 African American or Black        13    56 0.1149897331</span></span>
<span><span class="co">##  9:                 African American or Black       995    62 0.1273100616</span></span>
<span><span class="co">## 10:          American Indian or Alaska Native         1    15 0.1724137931</span></span>
<span><span class="co">## 11:          American Indian or Alaska Native         2     6 0.0689655172</span></span>
<span><span class="co">## 12:          American Indian or Alaska Native         3     1 0.0114942529</span></span>
<span><span class="co">## 13:          American Indian or Alaska Native         4     3 0.0344827586</span></span>
<span><span class="co">## 14:          American Indian or Alaska Native         5     1 0.0114942529</span></span>
<span><span class="co">## 15:          American Indian or Alaska Native         6     1 0.0114942529</span></span>
<span><span class="co">## 16:          American Indian or Alaska Native         8    58 0.6666666667</span></span>
<span><span class="co">## 17:          American Indian or Alaska Native        13     2 0.0229885057</span></span>
<span><span class="co">## 18:                                     Asian         1   738 0.2703296703</span></span>
<span><span class="co">## 19:                                     Asian         2    52 0.0190476190</span></span>
<span><span class="co">## 20:                                     Asian         3     4 0.0014652015</span></span>
<span><span class="co">## 21:                                     Asian         5     2 0.0007326007</span></span>
<span><span class="co">## 22:                                     Asian         6    17 0.0062271062</span></span>
<span><span class="co">## 23:                                     Asian         7     8 0.0029304029</span></span>
<span><span class="co">## 24:                                     Asian         8  1621 0.5937728938</span></span>
<span><span class="co">## 25:                                     Asian        11    36 0.0131868132</span></span>
<span><span class="co">## 26:                                     Asian        12     2 0.0007326007</span></span>
<span><span class="co">## 27:                                     Asian        13   170 0.0622710623</span></span>
<span><span class="co">## 28:                                     Asian        14     7 0.0025641026</span></span>
<span><span class="co">## 29:                                     Asian       995    73 0.0267399267</span></span>
<span><span class="co">## 30: Native Hawaiian or other Pacific Islander         1     4 0.1481481481</span></span>
<span><span class="co">## 31: Native Hawaiian or other Pacific Islander         7     1 0.0370370370</span></span>
<span><span class="co">## 32: Native Hawaiian or other Pacific Islander         8    21 0.7777777778</span></span>
<span><span class="co">## 33: Native Hawaiian or other Pacific Islander       995     1 0.0370370370</span></span>
<span><span class="co">## 34:                                     White         1  2355 0.2591899626</span></span>
<span><span class="co">## 35:                                     White         2   238 0.0261941448</span></span>
<span><span class="co">## 36:                                     White         3     6 0.0006603566</span></span>
<span><span class="co">## 37:                                     White         4    12 0.0013207132</span></span>
<span><span class="co">## 38:                                     White         5     1 0.0001100594</span></span>
<span><span class="co">## 39:                                     White         6    31 0.0034118424</span></span>
<span><span class="co">## 40:                                     White         7    49 0.0053929122</span></span>
<span><span class="co">## 41:                                     White         8  5781 0.6362535769</span></span>
<span><span class="co">## 42:                                     White        11    29 0.0031917235</span></span>
<span><span class="co">## 43:                                     White        12     6 0.0006603566</span></span>
<span><span class="co">## 44:                                     White        13   351 0.0386308607</span></span>
<span><span class="co">## 45:                                     White        14    22 0.0024213075</span></span>
<span><span class="co">## 46:                                     White       995   205 0.0225621836</span></span>
<span><span class="co">## 47:                               Two or more         1   298 0.3197424893</span></span>
<span><span class="co">## 48:                               Two or more         2    31 0.0332618026</span></span>
<span><span class="co">## 49:                               Two or more         4     6 0.0064377682</span></span>
<span><span class="co">## 50:                               Two or more         6    10 0.0107296137</span></span>
<span><span class="co">## 51:                               Two or more         7     3 0.0032188841</span></span>
<span><span class="co">## 52:                               Two or more         8   486 0.5214592275</span></span>
<span><span class="co">## 53:                               Two or more        11     2 0.0021459227</span></span>
<span><span class="co">## 54:                               Two or more        13    57 0.0611587983</span></span>
<span><span class="co">## 55:                               Two or more        14     1 0.0010729614</span></span>
<span><span class="co">## 56:                               Two or more       995    38 0.0407725322</span></span>
<span><span class="co">## 57:                                Other race         1    68 0.2281879195</span></span>
<span><span class="co">## 58:                                Other race         2     2 0.0067114094</span></span>
<span><span class="co">## 59:                                Other race         3     1 0.0033557047</span></span>
<span><span class="co">## 60:                                Other race         5     1 0.0033557047</span></span>
<span><span class="co">## 61:                                Other race         6     2 0.0067114094</span></span>
<span><span class="co">## 62:                                Other race         7     2 0.0067114094</span></span>
<span><span class="co">## 63:                                Other race         8   207 0.6946308725</span></span>
<span><span class="co">## 64:                                Other race        10     1 0.0033557047</span></span>
<span><span class="co">## 65:                                Other race        11     3 0.0100671141</span></span>
<span><span class="co">## 66:                                Other race        13     9 0.0302013423</span></span>
<span><span class="co">## 67:                                Other race        14     1 0.0033557047</span></span>
<span><span class="co">## 68:                                Other race       995     1 0.0033557047</span></span>
<span><span class="co">## 69:                      Prefer not to answer         1   335 0.3067765568</span></span>
<span><span class="co">## 70:                      Prefer not to answer         2    30 0.0274725275</span></span>
<span><span class="co">## 71:                      Prefer not to answer         4     1 0.0009157509</span></span>
<span><span class="co">## 72:                      Prefer not to answer         6     7 0.0064102564</span></span>
<span><span class="co">## 73:                      Prefer not to answer         7     6 0.0054945055</span></span>
<span><span class="co">## 74:                      Prefer not to answer         8   602 0.5512820513</span></span>
<span><span class="co">## 75:                      Prefer not to answer        11    10 0.0091575092</span></span>
<span><span class="co">## 76:                      Prefer not to answer        12     2 0.0018315018</span></span>
<span><span class="co">## 77:                      Prefer not to answer        13    51 0.0467032967</span></span>
<span><span class="co">## 78:                      Prefer not to answer        14     3 0.0027472527</span></span>
<span><span class="co">## 79:                      Prefer not to answer       995    45 0.0412087912</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##  1:                 African American or Black         1   146 0.2833781746</span></span>
<span><span class="co">##  2:                 African American or Black         3     6 0.0094980635</span></span>
<span><span class="co">##  3:                 African American or Black         4     2 0.0036587038</span></span>
<span><span class="co">##  4:                 African American or Black         6     9 0.0121585495</span></span>
<span><span class="co">##  5:                 African American or Black         7     7 0.0128354526</span></span>
<span><span class="co">##  6:                 African American or Black         8   198 0.4373479110</span></span>
<span><span class="co">##  7:                 African American or Black        10     1 0.0033031155</span></span>
<span><span class="co">##  8:                 African American or Black        13    56 0.1216968845</span></span>
<span><span class="co">##  9:                 African American or Black       995    62 0.1161231449</span></span>
<span><span class="co">## 10:          American Indian or Alaska Native         1    15 0.1974696041</span></span>
<span><span class="co">## 11:          American Indian or Alaska Native         2     6 0.0400602723</span></span>
<span><span class="co">## 12:          American Indian or Alaska Native         3     1 0.0202899304</span></span>
<span><span class="co">## 13:          American Indian or Alaska Native         4     3 0.0235633378</span></span>
<span><span class="co">## 14:          American Indian or Alaska Native         5     1 0.0024680453</span></span>
<span><span class="co">## 15:          American Indian or Alaska Native         6     1 0.0193806505</span></span>
<span><span class="co">## 16:          American Indian or Alaska Native         8    58 0.6717759534</span></span>
<span><span class="co">## 17:          American Indian or Alaska Native        13     2 0.0249922062</span></span>
<span><span class="co">## 18:                                     Asian         1   738 0.2709798598</span></span>
<span><span class="co">## 19:                                     Asian         2    52 0.0184360043</span></span>
<span><span class="co">## 20:                                     Asian         3     4 0.0014247932</span></span>
<span><span class="co">## 21:                                     Asian         5     2 0.0007731039</span></span>
<span><span class="co">## 22:                                     Asian         6    17 0.0065739430</span></span>
<span><span class="co">## 23:                                     Asian         7     8 0.0021547437</span></span>
<span><span class="co">## 24:                                     Asian         8  1621 0.5913549871</span></span>
<span><span class="co">## 25:                                     Asian        11    36 0.0116945676</span></span>
<span><span class="co">## 26:                                     Asian        12     2 0.0003737522</span></span>
<span><span class="co">## 27:                                     Asian        13   170 0.0653057015</span></span>
<span><span class="co">## 28:                                     Asian        14     7 0.0023997671</span></span>
<span><span class="co">## 29:                                     Asian       995    73 0.0285287767</span></span>
<span><span class="co">## 30: Native Hawaiian or other Pacific Islander         1     4 0.1291936433</span></span>
<span><span class="co">## 31: Native Hawaiian or other Pacific Islander         7     1 0.0436138905</span></span>
<span><span class="co">## 32: Native Hawaiian or other Pacific Islander         8    21 0.7842848735</span></span>
<span><span class="co">## 33: Native Hawaiian or other Pacific Islander       995     1 0.0429075927</span></span>
<span><span class="co">## 34:                                     White         1  2355 0.2594362966</span></span>
<span><span class="co">## 35:                                     White         2   238 0.0245521612</span></span>
<span><span class="co">## 36:                                     White         3     6 0.0010643381</span></span>
<span><span class="co">## 37:                                     White         4    12 0.0012790864</span></span>
<span><span class="co">## 38:                                     White         5     1 0.0001231194</span></span>
<span><span class="co">## 39:                                     White         6    31 0.0037034243</span></span>
<span><span class="co">## 40:                                     White         7    49 0.0056438130</span></span>
<span><span class="co">## 41:                                     White         8  5781 0.6347583917</span></span>
<span><span class="co">## 42:                                     White        11    29 0.0033753973</span></span>
<span><span class="co">## 43:                                     White        12     6 0.0007743623</span></span>
<span><span class="co">## 44:                                     White        13   351 0.0400750526</span></span>
<span><span class="co">## 45:                                     White        14    22 0.0023469235</span></span>
<span><span class="co">## 46:                                     White       995   205 0.0228676335</span></span>
<span><span class="co">## 47:                               Two or more         1   298 0.3126455742</span></span>
<span><span class="co">## 48:                               Two or more         2    31 0.0319984514</span></span>
<span><span class="co">## 49:                               Two or more         4     6 0.0062069589</span></span>
<span><span class="co">## 50:                               Two or more         6    10 0.0094282654</span></span>
<span><span class="co">## 51:                               Two or more         7     3 0.0013571148</span></span>
<span><span class="co">## 52:                               Two or more         8   486 0.5261733782</span></span>
<span><span class="co">## 53:                               Two or more        11     2 0.0013760512</span></span>
<span><span class="co">## 54:                               Two or more        13    57 0.0681082241</span></span>
<span><span class="co">## 55:                               Two or more        14     1 0.0007258986</span></span>
<span><span class="co">## 56:                               Two or more       995    38 0.0419800830</span></span>
<span><span class="co">## 57:                                Other race         1    68 0.2323740485</span></span>
<span><span class="co">## 58:                                Other race         2     2 0.0101936395</span></span>
<span><span class="co">## 59:                                Other race         3     1 0.0052948827</span></span>
<span><span class="co">## 60:                                Other race         5     1 0.0034859078</span></span>
<span><span class="co">## 61:                                Other race         6     2 0.0090448745</span></span>
<span><span class="co">## 62:                                Other race         7     2 0.0080017430</span></span>
<span><span class="co">## 63:                                Other race         8   207 0.6911868592</span></span>
<span><span class="co">## 64:                                Other race        10     1 0.0020334462</span></span>
<span><span class="co">## 65:                                Other race        11     3 0.0049053589</span></span>
<span><span class="co">## 66:                                Other race        13     9 0.0274977388</span></span>
<span><span class="co">## 67:                                Other race        14     1 0.0047337044</span></span>
<span><span class="co">## 68:                                Other race       995     1 0.0012477965</span></span>
<span><span class="co">## 69:                      Prefer not to answer         1   335 0.3054086719</span></span>
<span><span class="co">## 70:                      Prefer not to answer         2    30 0.0320972220</span></span>
<span><span class="co">## 71:                      Prefer not to answer         4     1 0.0003938309</span></span>
<span><span class="co">## 72:                      Prefer not to answer         6     7 0.0050475397</span></span>
<span><span class="co">## 73:                      Prefer not to answer         7     6 0.0062019341</span></span>
<span><span class="co">## 74:                      Prefer not to answer         8   602 0.5485360509</span></span>
<span><span class="co">## 75:                      Prefer not to answer        11    10 0.0071576064</span></span>
<span><span class="co">## 76:                      Prefer not to answer        12     2 0.0026285506</span></span>
<span><span class="co">## 77:                      Prefer not to answer        13    51 0.0485152754</span></span>
<span><span class="co">## 78:                      Prefer not to answer        14     3 0.0006088121</span></span>
<span><span class="co">## 79:                      Prefer not to answer       995    45 0.0434045059</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##          prop_se     est     est_se</span></span>
<span><span class="co">##  1: 0.0234687720   66145  6376.9579</span></span>
<span><span class="co">##  2: 0.0045022896    2217  1054.2367</span></span>
<span><span class="co">##  3: 0.0035250133     854   824.5439</span></span>
<span><span class="co">##  4: 0.0047264678    2838  1106.2444</span></span>
<span><span class="co">##  5: 0.0060509229    2996  1421.6027</span></span>
<span><span class="co">##  6: 0.0263961006  102084  8316.6518</span></span>
<span><span class="co">##  7: 0.0032969390     771   771.0000</span></span>
<span><span class="co">##  8: 0.0176656865   28406  4407.8285</span></span>
<span><span class="co">##  9: 0.0165432306   27105  4085.3028</span></span>
<span><span class="co">## 10: 0.0509370755    7601  2185.3872</span></span>
<span><span class="co">## 11: 0.0172849748    1542   662.1665</span></span>
<span><span class="co">## 12: 0.0200446154     781   781.0000</span></span>
<span><span class="co">## 13: 0.0191960125     907   747.4497</span></span>
<span><span class="co">## 14: 0.0024823327      95    95.0000</span></span>
<span><span class="co">## 15: 0.0191641602     746   746.0000</span></span>
<span><span class="co">## 16: 0.0591888934   25858  4113.3865</span></span>
<span><span class="co">## 17: 0.0181764028     962   706.5006</span></span>
<span><span class="co">## 18: 0.0098165289  370488 15432.1286</span></span>
<span><span class="co">## 19: 0.0028967163   25206  3990.1727</span></span>
<span><span class="co">## 20: 0.0007779163    1948  1064.1078</span></span>
<span><span class="co">## 21: 0.0006818806    1057   932.6673</span></span>
<span><span class="co">## 22: 0.0018333236    8988  2514.1969</span></span>
<span><span class="co">## 23: 0.0009184436    2946  1256.5048</span></span>
<span><span class="co">## 24: 0.0108526487  808510 22166.8778</span></span>
<span><span class="co">## 25: 0.0023410399   15989  3216.3905</span></span>
<span><span class="co">## 26: 0.0003615032     511   494.2913</span></span>
<span><span class="co">## 27: 0.0055083035   89287  7761.1131</span></span>
<span><span class="co">## 28: 0.0010244254    3281  1401.8481</span></span>
<span><span class="co">## 29: 0.0037485044   39005  5192.9653</span></span>
<span><span class="co">## 30: 0.0720199776    2195  1316.3076</span></span>
<span><span class="co">## 31: 0.0426623863     741   741.0000</span></span>
<span><span class="co">## 32: 0.0871191335   13325  3142.9172</span></span>
<span><span class="co">## 33: 0.0420024696     729   729.0000</span></span>
<span><span class="co">## 34: 0.0052972447 1186349 26399.8331</span></span>
<span><span class="co">## 35: 0.0018435264  112272  8482.0491</span></span>
<span><span class="co">## 36: 0.0004424597    4867  2024.1818</span></span>
<span><span class="co">## 37: 0.0004102564    5849  1876.4708</span></span>
<span><span class="co">## 38: 0.0001231175     563   563.0000</span></span>
<span><span class="co">## 39: 0.0007402465   16935  3388.5176</span></span>
<span><span class="co">## 40: 0.0009107528   25808  4171.2191</span></span>
<span><span class="co">## 41: 0.0058194896 2902620 36947.1458</span></span>
<span><span class="co">## 42: 0.0006978522   15435  3193.9582</span></span>
<span><span class="co">## 43: 0.0003707955    3541  1696.0954</span></span>
<span><span class="co">## 44: 0.0023825741  183255 11019.7669</span></span>
<span><span class="co">## 45: 0.0005982994   10732  2737.8349</span></span>
<span><span class="co">## 46: 0.0018073181  104569  8316.2724</span></span>
<span><span class="co">## 47: 0.0174664936  148592  9930.0737</span></span>
<span><span class="co">## 48: 0.0065075536   15208  3138.9053</span></span>
<span><span class="co">## 49: 0.0028205365    2950  1344.0506</span></span>
<span><span class="co">## 50: 0.0033602107    4481  1602.8141</span></span>
<span><span class="co">## 51: 0.0008690064     645   412.8248</span></span>
<span><span class="co">## 52: 0.0188331919  250076 12819.7938</span></span>
<span><span class="co">## 53: 0.0009763951     654   464.0060</span></span>
<span><span class="co">## 54: 0.0098454437   32370  4853.0539</span></span>
<span><span class="co">## 55: 0.0007259125     345   345.0000</span></span>
<span><span class="co">## 56: 0.0077499675   19952  3763.7078</span></span>
<span><span class="co">## 57: 0.0282172813   35197  4870.6765</span></span>
<span><span class="co">## 58: 0.0072057646    1544  1097.7295</span></span>
<span><span class="co">## 59: 0.0052788052     802   802.0000</span></span>
<span><span class="co">## 60: 0.0034816429     528   528.0000</span></span>
<span><span class="co">## 61: 0.0063697618    1370   969.2030</span></span>
<span><span class="co">## 62: 0.0059919642    1212   911.2358</span></span>
<span><span class="co">## 63: 0.0308116056  104692  8373.0922</span></span>
<span><span class="co">## 64: 0.0020339135     308   308.0000</span></span>
<span><span class="co">## 65: 0.0040838658     743   619.5947</span></span>
<span><span class="co">## 66: 0.0107307187    4165  1646.9584</span></span>
<span><span class="co">## 67: 0.0047219948     717   717.0000</span></span>
<span><span class="co">## 68: 0.0012490631     189   189.0000</span></span>
<span><span class="co">## 69: 0.0158953559  169055 10456.3448</span></span>
<span><span class="co">## 70: 0.0063898004   17767  3597.8422</span></span>
<span><span class="co">## 71: 0.0003939242     218   218.0000</span></span>
<span><span class="co">## 72: 0.0023550813    2794  1306.4556</span></span>
<span><span class="co">## 73: 0.0027005341    3433  1499.1951</span></span>
<span><span class="co">## 74: 0.0172056215  303635 13888.1934</span></span>
<span><span class="co">## 75: 0.0027357248    3962  1518.6874</span></span>
<span><span class="co">## 76: 0.0018865202    1455  1045.7321</span></span>
<span><span class="co">## 77: 0.0075710397   26855  4295.1524</span></span>
<span><span class="co">## 78: 0.0003754133     337   207.5867</span></span>
<span><span class="co">## 79: 0.0071456884   24026  4042.1333</span></span>
<span><span class="co">##          prop_se     est     est_se</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
<p><code>summarize_by</code> can be used with an unlimited amount of
variables. To use more than one <code>summarize_by</code> variable pass
a list to the argument.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                   summarize_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'race'</span>, <span class="st">'ethnicity'</span><span class="op">)</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'hh'</span> <span class="op">=</span> <span class="va">hh</span>,</span>
<span>                               <span class="st">'person'</span> <span class="op">=</span> <span class="va">person</span>,</span>
<span>                               <span class="st">'day'</span> <span class="op">=</span> <span class="va">day</span>,</span>
<span>                               <span class="st">'trip'</span> <span class="op">=</span> <span class="va">trip</span>,</span>
<span>                               <span class="st">'vehicle'</span> <span class="op">=</span> <span class="va">vehicle</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_ethnicity_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                             summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                                             summarize_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'race'</span>, <span class="st">'ethnicity'</span><span class="op">)</span>,</span>
<span>                                             summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                             weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                             wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                             se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mode_by_race_ethnicity_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                          race                                  ethnicity</span></span>
<span><span class="co">##  1: African American or Black Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  2: African American or Black Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  3: African American or Black Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  4: African American or Black Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  5: African American or Black Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  6: African American or Black Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  7: African American or Black Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  8: African American or Black Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  9: African American or Black         Mexican, Mexican American, Chicano</span></span>
<span><span class="co">## 10: African American or Black         Mexican, Mexican American, Chicano</span></span>
<span><span class="co">##     mode_type count        prop     prop_se   est    est_se</span></span>
<span><span class="co">##  1:         1    90 0.234234181 0.025626160 39323 4832.6785</span></span>
<span><span class="co">##  2:         3     2 0.004783207 0.003446115   803  579.0889</span></span>
<span><span class="co">##  3:         4     2 0.005086997 0.004896995   854  824.5439</span></span>
<span><span class="co">##  4:         6     4 0.007392229 0.004627275  1241  778.6525</span></span>
<span><span class="co">##  5:         7     5 0.012628143 0.006726073  2120 1135.6683</span></span>
<span><span class="co">##  6:         8   179 0.546459057 0.030972856 91739 7884.0218</span></span>
<span><span class="co">##  7:        13    24 0.073415972 0.016791110 12325 2933.9364</span></span>
<span><span class="co">##  8:       995    43 0.116000214 0.019718403 19474 3509.1793</span></span>
<span><span class="co">##  9:         3     4 0.746962493 0.203291194  1414  881.0363</span></span>
<span><span class="co">## 10:         8     2 0.253037507 0.203291194   479  419.9017</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="calculating-trip-rates">Calculating trip rates<a class="anchor" aria-label="anchor" href="#calculating-trip-rates"></a>
</h3>
<p><code>hts_summary</code> can also be used to calculate trip
rates.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_triprate.html">hts_prep_triprate</a></span><span class="op">(</span>summarize_by <span class="op">=</span> <span class="st">'employment'</span>,</span>
<span>                       variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                       trip_name <span class="op">=</span> <span class="st">'trip'</span>,</span>
<span>                       day_name <span class="op">=</span> <span class="st">'day'</span>,</span>
<span>                       hts_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'hh'</span> <span class="op">=</span> <span class="va">hh</span>,</span>
<span>                                       <span class="st">'person'</span> <span class="op">=</span> <span class="va">person</span>,</span>
<span>                                       <span class="st">'day'</span> <span class="op">=</span> <span class="va">day</span>,</span>
<span>                                       <span class="st">'trip'</span> <span class="op">=</span> <span class="va">trip</span>,</span>
<span>                                       <span class="st">'vehicle'</span> <span class="op">=</span> <span class="va">vehicle</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">trip_rate_by_employment_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">num</span>, </span>
<span>                                              summarize_var <span class="op">=</span> <span class="st">'num_trips_wtd'</span>,</span>
<span>                                              summarize_by <span class="op">=</span> <span class="st">'employment'</span>,</span>
<span>                                              summarize_vartype <span class="op">=</span> <span class="st">'numeric'</span>,</span>
<span>                                              weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                              wtname <span class="op">=</span> <span class="st">'day_weight'</span>,</span>
<span>                                              se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    employment count min      max     mean   mean_se   median</span></span>
<span><span class="co">## 1:          1  2012   0 59.17021 3.817292 0.0871695 2.478363</span></span>
<span><span class="co">## 2:          2   307   0 54.24561 3.795345 0.2380826 2.414773</span></span>
<span><span class="co">## 3:          3   189   0 54.81752 4.128966 0.2921698 3.361946</span></span>
<span><span class="co">## 4:          5   899   0 57.84615 3.629484 0.1354622 2.154110</span></span>
<span><span class="co">## 5:          6   181   0 48.29293 3.411580 0.2988906 1.842215</span></span>
<span><span class="co">## 6:          7    37   0 44.70815 3.686618 0.7769508 2.448465</span></span>
<span><span class="co">## 7:          8    24   0 24.23790 2.513073 0.6037672 1.613707</span></span>
<span><span class="co">## 8:        995   568   0 58.38776 2.000315 0.1028051 1.146023</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="labeling-values">Labeling Values<a class="anchor" aria-label="anchor" href="#labeling-values"></a>
</h3>
<p>To label values we can use <code>factorize_column</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span><span class="op">$</span><span class="va">employment</span> <span class="op">=</span>  <span class="fu"><a href="../reference/factorize_column.html">factorize_column</a></span><span class="op">(</span></span>
<span>  <span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span><span class="op">$</span><span class="va">employment</span>,</span>
<span>  <span class="st">'employment'</span>,</span>
<span>  <span class="va">value_labels</span>,</span>
<span>  variable_colname <span class="op">=</span> <span class="st">'variable'</span>,</span>
<span>  value_colname <span class="op">=</span> <span class="st">'value'</span>,</span>
<span>  value_label_colname <span class="op">=</span> <span class="st">'label'</span>,</span>
<span>  value_order_colname <span class="op">=</span> <span class="st">'val_order'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                                             employment</span></span>
<span><span class="co">## 1:                                           Employed full-time (35+ hours/week, paid)</span></span>
<span><span class="co">## 2:                                 Employed part-time (fewer than 35 hours/week, paid)</span></span>
<span><span class="co">## 3:                                                                       Self-employed</span></span>
<span><span class="co">## 4: Not employed and not looking for work (e.g., retired, stay-at-home parent, student)</span></span>
<span><span class="co">## 5:                                                     Unemployed and looking for work</span></span>
<span><span class="co">## 6:                                                          Unpaid volunteer or intern</span></span>
<span><span class="co">## 7:               Employed, but not currently working (e.g., on leave, furloughed 100%)</span></span>
<span><span class="co">## 8:                                                                    Missing Response</span></span>
<span><span class="co">##    count min      max     mean   mean_se   median</span></span>
<span><span class="co">## 1:  2012   0 59.17021 3.817292 0.0871695 2.478363</span></span>
<span><span class="co">## 2:   307   0 54.24561 3.795345 0.2380826 2.414773</span></span>
<span><span class="co">## 3:   189   0 54.81752 4.128966 0.2921698 3.361946</span></span>
<span><span class="co">## 4:   899   0 57.84615 3.629484 0.1354622 2.154110</span></span>
<span><span class="co">## 5:   181   0 48.29293 3.411580 0.2988906 1.842215</span></span>
<span><span class="co">## 6:    37   0 44.70815 3.686618 0.7769508 2.448465</span></span>
<span><span class="co">## 7:    24   0 24.23790 2.513073 0.6037672 1.613707</span></span>
<span><span class="co">## 8:   568   0 58.38776 2.000315 0.1028051 1.146023</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="creating-visuals-using-hts_summary-output">Creating Visuals using hts_summary output<a class="anchor" aria-label="anchor" href="#creating-visuals-using-hts_summary-output"></a>
</h3>
<p><code>hts_summary</code> creates outputs that can easily be used to
create visuals.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>  <span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mean</span>, y <span class="op">=</span> <span class="va">employment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">'identity'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_errorbar</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="op">(</span><span class="va">mean</span> <span class="op">-</span> <span class="va">mean_se</span><span class="op">)</span>, </span>
<span>        xmax <span class="op">=</span> <span class="op">(</span><span class="va">mean</span> <span class="op">+</span> <span class="va">mean_se</span><span class="op">)</span>,</span>
<span>        width <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">'Mean Trip Rate'</span>,</span>
<span>       y <span class="op">=</span> <span class="st">'Employment'</span><span class="op">)</span>  <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="va">x</span>, width <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span>
<span>                   limits <span class="op">=</span> <span class="va">rev</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting_started_files/figure-html/ggplot_example-1.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by James Clark.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
