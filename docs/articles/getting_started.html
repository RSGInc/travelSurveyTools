<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="travelSurveyTools">
<title>Getting Started • travelSurveyTools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="travelSurveyTools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">travelSurveyTools</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting Started</h1>
            
      
      
      <div class="d-none name"><code>getting_started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="about-travelsurveytools">About TravelSurveyTools<a class="anchor" aria-label="anchor" href="#about-travelsurveytools"></a>
</h2>
<p>The <code>travelSurveyTools</code> package provides tools for R users
to aid use of data from household travel surveys. Some possible uses
include creating custom cross tabs, labeling data, and calculating trip
rates.</p>
</div>
<div class="section level2">
<h2 id="data-assumptions">Data Assumptions<a class="anchor" aria-label="anchor" href="#data-assumptions"></a>
</h2>
<p><code>travelSurveyTools</code> assumes the the data have the
structure shown below. If this does not reflect the structure of your
data</p>
<div class="section level3">
<h3 id="hts_data">hts_data<a class="anchor" aria-label="anchor" href="#hts_data"></a>
</h3>
<p>hts_data is a list of five core tables:</p>
<div class="section level4">
<h4 id="hh">hh<a class="anchor" aria-label="anchor" href="#hh"></a>
</h4>
<p>Household dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>survey variables asked on a household level</li>
<li>hh_weight: household weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="person">person<a class="anchor" aria-label="anchor" href="#person"></a>
</h4>
<p>Person dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>person_id: 10 digit person ID</li>
<li>survey variables asked on a person level</li>
<li>person_weight: person weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="day">day<a class="anchor" aria-label="anchor" href="#day"></a>
</h4>
<p>Day dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>person_id: 10 digit person ID</li>
<li>day_id: 12 digit day ID</li>
<li>survey variable asked on a day level</li>
<li>day_weight: day weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="trip">trip<a class="anchor" aria-label="anchor" href="#trip"></a>
</h4>
<p>Trip dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>person_id: 10 digit person ID</li>
<li>day_id: 12 digit day ID</li>
<li>trip_id: 13 digit trip ID</li>
<li>survey variables asked on a trip level</li>
<li>trip_weight: trip weight</li>
</ul>
</div>
<div class="section level4">
<h4 id="vehicle">vehicle<a class="anchor" aria-label="anchor" href="#vehicle"></a>
</h4>
<p>Vehicle dataset</p>
<ul>
<li>hh_id: 8 digit household ID</li>
<li>vehicle_id: 10 digit vehicle ID</li>
<li>survey responses asked on a vehicle level</li>
<li>hh_weight: household weight</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="codebook">Codebook<a class="anchor" aria-label="anchor" href="#codebook"></a>
</h3>
<p>In addition to data from the household travel survey. The codebook is
also required. The codebook is assumed to be in two parts:</p>
<div class="section level4">
<h4 id="variable_list">variable_list<a class="anchor" aria-label="anchor" href="#variable_list"></a>
</h4>
<p>A dataset containing information about all variables existing in the
hh, person, day, trip, and vehicle tables. The variables are as
follows:</p>
<ul>
<li>variable: Name of the variable</li>
<li>is_checkbox: The variable is a ‘Select all that Apply’ question</li>
<li>hh: The variable exists in the hh table</li>
<li>person: The variable exists in the person table</li>
<li>day: The variable exists in the day table</li>
<li>trip: The variable exists in the trip table</li>
<li>vehicle: The variable exists in the vehicle table</li>
<li>location: The variable exists in the location table</li>
<li>data_type: Data type of the variable</li>
<li>description: A description of the variable</li>
<li>logic: Conditions where the variable should have a value</li>
<li>shared_name: the shared name of checkbox variable or the variable
name for non-checkbox variables</li>
</ul>
</div>
<div class="section level4">
<h4 id="value_labels">value_labels<a class="anchor" aria-label="anchor" href="#value_labels"></a>
</h4>
<p>A dataset containing the values for all variables found in
variable_list The variables are as follows:</p>
<ul>
<li>variable: Name of the variable</li>
<li>value: The numeric value of the variable</li>
<li>label: What the numeric value of the variable represents</li>
<li>label_value: value concatenated with the label (e.g., 11 85 or
older)</li>
<li>val_order: order for each variable label to appear in</li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="using-travelsurveytools">Using travelSurveyTools<a class="anchor" aria-label="anchor" href="#using-travelsurveytools"></a>
</h2>
<div class="section level3">
<h3 id="prepping-the-data">Prepping the Data<a class="anchor" aria-label="anchor" href="#prepping-the-data"></a>
</h3>
<p>In order to create summaries of our data we first need to prepare our
data. We can do this by using <code>hts_prep_data</code>. This will
return a categorical (cat) and numeric (num) (if applicable) prepped
data table that can be used to create summaries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">travelSurveyTools</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://gdfe.co/srvyr/" class="external-link">srvyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"test_data"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"variable_list"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="va">test_data</span><span class="op">)</span></span></code></pre></div>
<p>Numeric variables will be automatically binned in
<code>hts_prep_data</code> to create categorical summaries. Here we can
make a categorical summary of a numeric variable using
<code>hts_summary</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     speed_mph count        prop</span></span>
<span><span class="co">## 1:  1 or less   575 0.038244097</span></span>
<span><span class="co">## 2:        1-9  6537 0.434785500</span></span>
<span><span class="co">## 3:       9-17  3661 0.243498503</span></span>
<span><span class="co">## 4:      17-25  2249 0.149584303</span></span>
<span><span class="co">## 5:      25-33  1012 0.067309611</span></span>
<span><span class="co">## 6:      33-41   533 0.035450615</span></span>
<span><span class="co">## 7:      41-43    76 0.005054872</span></span>
<span><span class="co">## 8: 43 or more   392 0.026072498</span></span></code></pre>
<p>Additionally, for numeric variables we can create numeric
summaries.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_num_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">num</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'numeric'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_num_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##    count min      max     mean   median</span></span>
<span><span class="co">## 1: 15035   0 109.2184 12.89507 9.728796</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="using-weighted-data">Using Weighted Data<a class="anchor" aria-label="anchor" href="#using-weighted-data"></a>
</h3>
<p>Additionally, we can use weighted data by setting
<code>weighted = TRUE</code> and specifying the name of the weight to be
used (<code>wtname</code>).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                wtname <span class="op">=</span> <span class="st">'trip_weight'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     speed_mph count        prop</span></span>
<span><span class="co">## 1:  1 or less   575 0.038244097</span></span>
<span><span class="co">## 2:        1-9  6537 0.434785500</span></span>
<span><span class="co">## 3:       9-17  3661 0.243498503</span></span>
<span><span class="co">## 4:      17-25  2249 0.149584303</span></span>
<span><span class="co">## 5:      25-33  1012 0.067309611</span></span>
<span><span class="co">## 6:      33-41   533 0.035450615</span></span>
<span><span class="co">## 7:      41-43    76 0.005054872</span></span>
<span><span class="co">## 8: 43 or more   392 0.026072498</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     speed_mph count        prop     est</span></span>
<span><span class="co">## 1:  1 or less   575 0.038596067  291500</span></span>
<span><span class="co">## 2:        1-9  6537 0.433679180 3275398</span></span>
<span><span class="co">## 3:       9-17  3661 0.243523176 1839229</span></span>
<span><span class="co">## 4:      17-25  2249 0.151377218 1143289</span></span>
<span><span class="co">## 5:      25-33  1012 0.067742784  511633</span></span>
<span><span class="co">## 6:      33-41   533 0.034100916  257550</span></span>
<span><span class="co">## 7:      41-43    76 0.005215169   39388</span></span>
<span><span class="co">## 8: 43 or more   392 0.025765490  194596</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="calculating-standard-errors">Calculating Standard Errors<a class="anchor" aria-label="anchor" href="#calculating-standard-errors"></a>
</h3>
<p>Additionally, by specifying <code>se = TRUE</code> we can calculate
standard errors.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speed_cat_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                summarize_var <span class="op">=</span> <span class="st">'speed_mph'</span>,</span>
<span>                                summarize_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                                summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">speed_cat_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##     speed_mph count        prop</span></span>
<span><span class="co">## 1:  1 or less   575 0.038244097</span></span>
<span><span class="co">## 2:        1-9  6537 0.434785500</span></span>
<span><span class="co">## 3:       9-17  3661 0.243498503</span></span>
<span><span class="co">## 4:      17-25  2249 0.149584303</span></span>
<span><span class="co">## 5:      25-33  1012 0.067309611</span></span>
<span><span class="co">## 6:      33-41   533 0.035450615</span></span>
<span><span class="co">## 7:      41-43    76 0.005054872</span></span>
<span><span class="co">## 8: 43 or more   392 0.026072498</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##     speed_mph count        prop      prop_se     est    est_se</span></span>
<span><span class="co">## 1:  1 or less   575 0.038596067 0.0018091628  291500 13731.043</span></span>
<span><span class="co">## 2:        1-9  6537 0.433679180 0.0046545746 3275398 38298.012</span></span>
<span><span class="co">## 3:       9-17  3661 0.243523176 0.0040290132 1839229 31595.081</span></span>
<span><span class="co">## 4:      17-25  2249 0.151377218 0.0033752879 1143289 26070.445</span></span>
<span><span class="co">## 5:      25-33  1012 0.067742784 0.0023796356  511633 18152.124</span></span>
<span><span class="co">## 6:      33-41   533 0.034100916 0.0016840894  257550 12764.269</span></span>
<span><span class="co">## 7:      41-43    76 0.005215169 0.0006874633   39388  5196.226</span></span>
<span><span class="co">## 8: 43 or more   392 0.025765490 0.0014748922  194596 11170.619</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="summarizing-two-variables">Summarizing Two Variables<a class="anchor" aria-label="anchor" href="#summarizing-two-variables"></a>
</h3>
<p>If we want summarize a variable by another variable (e.g., mode type
by a person’s race, mode_type by a person’s ethnicity) we can use the
<code>summarize_by</code> argument.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                   summarize_by <span class="op">=</span> <span class="st">'race'</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="va">test_data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                   summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                                   summarize_by <span class="op">=</span> <span class="st">'race'</span>,</span>
<span>                                   summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                   weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                   wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                   se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">mode_by_race_summary</span><span class="op">$</span><span class="va">summary</span></span></code></pre></div>
<pre><code><span><span class="co">## $unwtd</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##  1:                 African American or Black         1   146 0.3435294118</span></span>
<span><span class="co">##  2:                 African American or Black         3     6 0.0141176471</span></span>
<span><span class="co">##  3:                 African American or Black         4     2 0.0047058824</span></span>
<span><span class="co">##  4:                 African American or Black         6     9 0.0211764706</span></span>
<span><span class="co">##  5:                 African American or Black         7     7 0.0164705882</span></span>
<span><span class="co">##  6:                 African American or Black         8   198 0.4658823529</span></span>
<span><span class="co">##  7:                 African American or Black        10     1 0.0023529412</span></span>
<span><span class="co">##  8:                 African American or Black        13    56 0.1317647059</span></span>
<span><span class="co">##  9:          American Indian or Alaska Native         1    15 0.1724137931</span></span>
<span><span class="co">## 10:          American Indian or Alaska Native         2     6 0.0689655172</span></span>
<span><span class="co">## 11:          American Indian or Alaska Native         3     1 0.0114942529</span></span>
<span><span class="co">## 12:          American Indian or Alaska Native         4     3 0.0344827586</span></span>
<span><span class="co">## 13:          American Indian or Alaska Native         5     1 0.0114942529</span></span>
<span><span class="co">## 14:          American Indian or Alaska Native         6     1 0.0114942529</span></span>
<span><span class="co">## 15:          American Indian or Alaska Native         8    58 0.6666666667</span></span>
<span><span class="co">## 16:          American Indian or Alaska Native        13     2 0.0229885057</span></span>
<span><span class="co">## 17:                                     Asian         1   738 0.2777568686</span></span>
<span><span class="co">## 18:                                     Asian         2    52 0.0195709447</span></span>
<span><span class="co">## 19:                                     Asian         3     4 0.0015054573</span></span>
<span><span class="co">## 20:                                     Asian         5     2 0.0007527286</span></span>
<span><span class="co">## 21:                                     Asian         6    17 0.0063981935</span></span>
<span><span class="co">## 22:                                     Asian         7     8 0.0030109146</span></span>
<span><span class="co">## 23:                                     Asian         8  1621 0.6100865638</span></span>
<span><span class="co">## 24:                                     Asian        11    36 0.0135491155</span></span>
<span><span class="co">## 25:                                     Asian        12     2 0.0007527286</span></span>
<span><span class="co">## 26:                                     Asian        13   170 0.0639819345</span></span>
<span><span class="co">## 27:                                     Asian        14     7 0.0026345502</span></span>
<span><span class="co">## 28: Native Hawaiian or other Pacific Islander         1     4 0.1538461538</span></span>
<span><span class="co">## 29: Native Hawaiian or other Pacific Islander         7     1 0.0384615385</span></span>
<span><span class="co">## 30: Native Hawaiian or other Pacific Islander         8    21 0.8076923077</span></span>
<span><span class="co">## 31:                                     White         1  2355 0.2651728409</span></span>
<span><span class="co">## 32:                                     White         2   238 0.0267987839</span></span>
<span><span class="co">## 33:                                     White         3     6 0.0006755996</span></span>
<span><span class="co">## 34:                                     White         4    12 0.0013511992</span></span>
<span><span class="co">## 35:                                     White         5     1 0.0001125999</span></span>
<span><span class="co">## 36:                                     White         6    31 0.0034905979</span></span>
<span><span class="co">## 37:                                     White         7    49 0.0055173967</span></span>
<span><span class="co">## 38:                                     White         8  5781 0.6509402094</span></span>
<span><span class="co">## 39:                                     White        11    29 0.0032653980</span></span>
<span><span class="co">## 40:                                     White        12     6 0.0006755996</span></span>
<span><span class="co">## 41:                                     White        13   351 0.0395225763</span></span>
<span><span class="co">## 42:                                     White        14    22 0.0024771985</span></span>
<span><span class="co">## 43:                               Two or more         1   298 0.3333333333</span></span>
<span><span class="co">## 44:                               Two or more         2    31 0.0346756152</span></span>
<span><span class="co">## 45:                               Two or more         4     6 0.0067114094</span></span>
<span><span class="co">## 46:                               Two or more         6    10 0.0111856823</span></span>
<span><span class="co">## 47:                               Two or more         7     3 0.0033557047</span></span>
<span><span class="co">## 48:                               Two or more         8   486 0.5436241611</span></span>
<span><span class="co">## 49:                               Two or more        11     2 0.0022371365</span></span>
<span><span class="co">## 50:                               Two or more        13    57 0.0637583893</span></span>
<span><span class="co">## 51:                               Two or more        14     1 0.0011185682</span></span>
<span><span class="co">## 52:                                Other race         1    68 0.2289562290</span></span>
<span><span class="co">## 53:                                Other race         2     2 0.0067340067</span></span>
<span><span class="co">## 54:                                Other race         3     1 0.0033670034</span></span>
<span><span class="co">## 55:                                Other race         5     1 0.0033670034</span></span>
<span><span class="co">## 56:                                Other race         6     2 0.0067340067</span></span>
<span><span class="co">## 57:                                Other race         7     2 0.0067340067</span></span>
<span><span class="co">## 58:                                Other race         8   207 0.6969696970</span></span>
<span><span class="co">## 59:                                Other race        10     1 0.0033670034</span></span>
<span><span class="co">## 60:                                Other race        11     3 0.0101010101</span></span>
<span><span class="co">## 61:                                Other race        13     9 0.0303030303</span></span>
<span><span class="co">## 62:                                Other race        14     1 0.0033670034</span></span>
<span><span class="co">## 63:                      Prefer not to answer         1   335 0.3199617956</span></span>
<span><span class="co">## 64:                      Prefer not to answer         2    30 0.0286532951</span></span>
<span><span class="co">## 65:                      Prefer not to answer         4     1 0.0009551098</span></span>
<span><span class="co">## 66:                      Prefer not to answer         6     7 0.0066857689</span></span>
<span><span class="co">## 67:                      Prefer not to answer         7     6 0.0057306590</span></span>
<span><span class="co">## 68:                      Prefer not to answer         8   602 0.5749761223</span></span>
<span><span class="co">## 69:                      Prefer not to answer        11    10 0.0095510984</span></span>
<span><span class="co">## 70:                      Prefer not to answer        12     2 0.0019102197</span></span>
<span><span class="co">## 71:                      Prefer not to answer        13    51 0.0487106017</span></span>
<span><span class="co">## 72:                      Prefer not to answer        14     3 0.0028653295</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $wtd</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##  1:                 African American or Black         1   146 0.3206082080</span></span>
<span><span class="co">##  2:                 African American or Black         3     6 0.0107459127</span></span>
<span><span class="co">##  3:                 African American or Black         4     2 0.0041393818</span></span>
<span><span class="co">##  4:                 African American or Black         6     9 0.0137559316</span></span>
<span><span class="co">##  5:                 African American or Black         7     7 0.0145217657</span></span>
<span><span class="co">##  6:                 African American or Black         8   198 0.4948063845</span></span>
<span><span class="co">##  7:                 African American or Black        10     1 0.0037370765</span></span>
<span><span class="co">##  8:                 African American or Black        13    56 0.1376853391</span></span>
<span><span class="co">##  9:          American Indian or Alaska Native         1    15 0.1974696041</span></span>
<span><span class="co">## 10:          American Indian or Alaska Native         2     6 0.0400602723</span></span>
<span><span class="co">## 11:          American Indian or Alaska Native         3     1 0.0202899304</span></span>
<span><span class="co">## 12:          American Indian or Alaska Native         4     3 0.0235633378</span></span>
<span><span class="co">## 13:          American Indian or Alaska Native         5     1 0.0024680453</span></span>
<span><span class="co">## 14:          American Indian or Alaska Native         6     1 0.0193806505</span></span>
<span><span class="co">## 15:          American Indian or Alaska Native         8    58 0.6717759534</span></span>
<span><span class="co">## 16:          American Indian or Alaska Native        13     2 0.0249922062</span></span>
<span><span class="co">## 17:                                     Asian         1   738 0.2789376086</span></span>
<span><span class="co">## 18:                                     Asian         2    52 0.0189774065</span></span>
<span><span class="co">## 19:                                     Asian         3     4 0.0014666344</span></span>
<span><span class="co">## 20:                                     Asian         5     2 0.0007958073</span></span>
<span><span class="co">## 21:                                     Asian         6    17 0.0067669971</span></span>
<span><span class="co">## 22:                                     Asian         7     8 0.0022180211</span></span>
<span><span class="co">## 23:                                     Asian         8  1621 0.6087210541</span></span>
<span><span class="co">## 24:                                     Asian        11    36 0.0120379970</span></span>
<span><span class="co">## 25:                                     Asian        12     2 0.0003847280</span></span>
<span><span class="co">## 26:                                     Asian        13   170 0.0672235059</span></span>
<span><span class="co">## 27:                                     Asian        14     7 0.0024702400</span></span>
<span><span class="co">## 28: Native Hawaiian or other Pacific Islander         1     4 0.1349855482</span></span>
<span><span class="co">## 29: Native Hawaiian or other Pacific Islander         7     1 0.0455691532</span></span>
<span><span class="co">## 30: Native Hawaiian or other Pacific Islander         8    21 0.8194452986</span></span>
<span><span class="co">## 31:                                     White         1  2355 0.2655078324</span></span>
<span><span class="co">## 32:                                     White         2   238 0.0251267505</span></span>
<span><span class="co">## 33:                                     White         3     6 0.0010892466</span></span>
<span><span class="co">## 34:                                     White         4    12 0.0013090206</span></span>
<span><span class="co">## 35:                                     White         5     1 0.0001260008</span></span>
<span><span class="co">## 36:                                     White         6    31 0.0037900948</span></span>
<span><span class="co">## 37:                                     White         7    49 0.0057758941</span></span>
<span><span class="co">## 38:                                     White         8  5781 0.6496135155</span></span>
<span><span class="co">## 39:                                     White        11    29 0.0034543911</span></span>
<span><span class="co">## 40:                                     White        12     6 0.0007924845</span></span>
<span><span class="co">## 41:                                     White        13   351 0.0410129210</span></span>
<span><span class="co">## 42:                                     White        14    22 0.0024018481</span></span>
<span><span class="co">## 43:                               Two or more         1   298 0.3263455892</span></span>
<span><span class="co">## 44:                               Two or more         2    31 0.0334006119</span></span>
<span><span class="co">## 45:                               Two or more         4     6 0.0064789456</span></span>
<span><span class="co">## 46:                               Two or more         6    10 0.0098414086</span></span>
<span><span class="co">## 47:                               Two or more         7     3 0.0014165830</span></span>
<span><span class="co">## 48:                               Two or more         8   486 0.5492301036</span></span>
<span><span class="co">## 49:                               Two or more        11     2 0.0014363493</span></span>
<span><span class="co">## 50:                               Two or more        13    57 0.0710927016</span></span>
<span><span class="co">## 51:                               Two or more        14     1 0.0007577072</span></span>
<span><span class="co">## 52:                                Other race         1    68 0.2326643663</span></span>
<span><span class="co">## 53:                                Other race         2     2 0.0102063750</span></span>
<span><span class="co">## 54:                                Other race         3     1 0.0053014979</span></span>
<span><span class="co">## 55:                                Other race         5     1 0.0034902630</span></span>
<span><span class="co">## 56:                                Other race         6     2 0.0090561747</span></span>
<span><span class="co">## 57:                                Other race         7     2 0.0080117400</span></span>
<span><span class="co">## 58:                                Other race         8   207 0.6920503973</span></span>
<span><span class="co">## 59:                                Other race        10     1 0.0020359867</span></span>
<span><span class="co">## 60:                                Other race        11     3 0.0049114875</span></span>
<span><span class="co">## 61:                                Other race        13     9 0.0275320932</span></span>
<span><span class="co">## 62:                                Other race        14     1 0.0047396185</span></span>
<span><span class="co">## 63:                      Prefer not to answer         1   335 0.3192662664</span></span>
<span><span class="co">## 64:                      Prefer not to answer         2    30 0.0335535995</span></span>
<span><span class="co">## 65:                      Prefer not to answer         4     1 0.0004117006</span></span>
<span><span class="co">## 66:                      Prefer not to answer         6     7 0.0052765665</span></span>
<span><span class="co">## 67:                      Prefer not to answer         7     6 0.0064833403</span></span>
<span><span class="co">## 68:                      Prefer not to answer         8   602 0.5734252924</span></span>
<span><span class="co">## 69:                      Prefer not to answer        11    10 0.0074823752</span></span>
<span><span class="co">## 70:                      Prefer not to answer        12     2 0.0027478183</span></span>
<span><span class="co">## 71:                      Prefer not to answer        13    51 0.0507166046</span></span>
<span><span class="co">## 72:                      Prefer not to answer        14     3 0.0006364363</span></span>
<span><span class="co">##                                          race mode_type count         prop</span></span>
<span><span class="co">##          prop_se     est     est_se</span></span>
<span><span class="co">##  1: 0.0259537611   66145  6376.2732</span></span>
<span><span class="co">##  2: 0.0050918410    2217  1054.2330</span></span>
<span><span class="co">##  3: 0.0039870468     854   824.5438</span></span>
<span><span class="co">##  4: 0.0053457674    2838  1106.2381</span></span>
<span><span class="co">##  5: 0.0068402244    2996  1421.5977</span></span>
<span><span class="co">##  6: 0.0282676793  102084  8315.3979</span></span>
<span><span class="co">##  7: 0.0037292003     771   771.0000</span></span>
<span><span class="co">##  8: 0.0198052743   28406  4407.6486</span></span>
<span><span class="co">##  9: 0.0509371268    7601  2185.3628</span></span>
<span><span class="co">## 10: 0.0172849923    1542   662.1635</span></span>
<span><span class="co">## 11: 0.0200446356     781   781.0000</span></span>
<span><span class="co">## 12: 0.0191960318     907   747.4494</span></span>
<span><span class="co">## 13: 0.0024823352      95    95.0000</span></span>
<span><span class="co">## 14: 0.0191641795     746   746.0000</span></span>
<span><span class="co">## 15: 0.0591889530   25858  4113.2269</span></span>
<span><span class="co">## 16: 0.0181764211     962   706.5000</span></span>
<span><span class="co">## 17: 0.0100467368  370488 15423.1820</span></span>
<span><span class="co">## 18: 0.0029809671   25206  3990.0163</span></span>
<span><span class="co">## 19: 0.0008007467    1948  1064.1053</span></span>
<span><span class="co">## 20: 0.0007018961    1057   932.6670</span></span>
<span><span class="co">## 21: 0.0018869627    8988  2514.1670</span></span>
<span><span class="co">## 22: 0.0009453916    2946  1256.4991</span></span>
<span><span class="co">## 23: 0.0109229308  808510 22137.1754</span></span>
<span><span class="co">## 24: 0.0024093640   15989  3216.3137</span></span>
<span><span class="co">## 25: 0.0003721183     511   494.2912</span></span>
<span><span class="co">## 26: 0.0056638533   89287  7760.0861</span></span>
<span><span class="co">## 27: 0.0010544753    3281  1401.8417</span></span>
<span><span class="co">## 28: 0.0749889884    2195  1316.3052</span></span>
<span><span class="co">## 29: 0.0445310760     741   741.0000</span></span>
<span><span class="co">## 30: 0.0837539211   13325  3142.8635</span></span>
<span><span class="co">## 31: 0.0053989102 1186349 26346.1038</span></span>
<span><span class="co">## 32: 0.0018861324  112272  8480.5606</span></span>
<span><span class="co">## 33: 0.0004528082    4867  2024.1720</span></span>
<span><span class="co">## 34: 0.0004198524    5849  1876.4544</span></span>
<span><span class="co">## 35: 0.0001259987     563   563.0000</span></span>
<span><span class="co">## 36: 0.0007575376   16935  3388.4358</span></span>
<span><span class="co">## 37: 0.0009320051   25808  4171.0624</span></span>
<span><span class="co">## 38: 0.0058333760 2902620 36716.7654</span></span>
<span><span class="co">## 39: 0.0007141565   15435  3193.8863</span></span>
<span><span class="co">## 40: 0.0003794695    3541  1696.0896</span></span>
<span><span class="co">## 41: 0.0024371289  183255 11016.7078</span></span>
<span><span class="co">## 42: 0.0006122842   10732  2737.7953</span></span>
<span><span class="co">## 43: 0.0180401259  148592  9927.8437</span></span>
<span><span class="co">## 44: 0.0067877296   15208  3138.8343</span></span>
<span><span class="co">## 45: 0.0029437491    2950  1344.0455</span></span>
<span><span class="co">## 46: 0.0035068104    4481  1602.8031</span></span>
<span><span class="co">## 47: 0.0009070981     645   412.8242</span></span>
<span><span class="co">## 48: 0.0191501600  250076 12814.8919</span></span>
<span><span class="co">## 49: 0.0010191795     654   464.0056</span></span>
<span><span class="co">## 50: 0.0102582575   32370  4852.8413</span></span>
<span><span class="co">## 51: 0.0007577207     345   345.0000</span></span>
<span><span class="co">## 52: 0.0282510583   35197  4870.4252</span></span>
<span><span class="co">## 53: 0.0072147507    1544  1097.7284</span></span>
<span><span class="co">## 54: 0.0052853959     802   802.0000</span></span>
<span><span class="co">## 55: 0.0034859978     528   528.0000</span></span>
<span><span class="co">## 56: 0.0063777152    1370   969.2020</span></span>
<span><span class="co">## 57: 0.0059994472    1212   911.2351</span></span>
<span><span class="co">## 58: 0.0308378894  104692  8371.7820</span></span>
<span><span class="co">## 59: 0.0020364613     308   308.0000</span></span>
<span><span class="co">## 60: 0.0040889752     743   619.5944</span></span>
<span><span class="co">## 61: 0.0107440950    4165  1646.9495</span></span>
<span><span class="co">## 62: 0.0047278937     717   717.0000</span></span>
<span><span class="co">## 63: 0.0164453303  169055 10453.6018</span></span>
<span><span class="co">## 64: 0.0066740647   17767  3597.7574</span></span>
<span><span class="co">## 65: 0.0004118019     218   218.0000</span></span>
<span><span class="co">## 66: 0.0024616726    2794  1306.4509</span></span>
<span><span class="co">## 67: 0.0028226612    3433  1499.1887</span></span>
<span><span class="co">## 68: 0.0174747900  303635 13881.5190</span></span>
<span><span class="co">## 69: 0.0028594361    3962  1518.6785</span></span>
<span><span class="co">## 70: 0.0019719853    1455  1045.7311</span></span>
<span><span class="co">## 71: 0.0079047276   26855  4294.9876</span></span>
<span><span class="co">## 72: 0.0003924639     337   207.5863</span></span>
<span><span class="co">##          prop_se     est     est_se</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $weight_name</span></span>
<span><span class="co">## [1] "trip_weight"</span></span></code></pre>
<p><code>summarize_by</code> can be used with an unlimited amount of
variables. To use more than one <code>summarize_by</code> variable pass
a list to the argument.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_data.html">hts_prep_data</a></span><span class="op">(</span>summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                   summarize_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'race'</span>, <span class="st">'ethnicity'</span><span class="op">)</span>,</span>
<span>                   variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                   data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'hh'</span> <span class="op">=</span> <span class="va">hh</span>,</span>
<span>                               <span class="st">'person'</span> <span class="op">=</span> <span class="va">person</span>,</span>
<span>                               <span class="st">'day'</span> <span class="op">=</span> <span class="va">day</span>,</span>
<span>                               <span class="st">'trip'</span> <span class="op">=</span> <span class="va">trip</span>,</span>
<span>                               <span class="st">'vehicle'</span> <span class="op">=</span> <span class="va">vehicle</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_by_race_ethnicity_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">cat</span>, </span>
<span>                                             summarize_var <span class="op">=</span> <span class="st">'mode_type'</span>,</span>
<span>                                             summarize_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'race'</span>, <span class="st">'ethnicity'</span><span class="op">)</span>,</span>
<span>                                             summarize_vartype <span class="op">=</span> <span class="st">'categorical'</span>,</span>
<span>                                             weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                             wtname <span class="op">=</span> <span class="st">'trip_weight'</span>,</span>
<span>                                             se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mode_by_race_ethnicity_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                          race                                   ethnicity</span></span>
<span><span class="co">##  1: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  2: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  3: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  4: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  5: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  6: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  7: African American or Black  Not of Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##  8: African American or Black          Mexican, Mexican American, Chicano</span></span>
<span><span class="co">##  9: African American or Black          Mexican, Mexican American, Chicano</span></span>
<span><span class="co">## 10: African American or Black Another Hispanic, Latino, or Spanish origin</span></span>
<span><span class="co">##     mode_type count        prop     prop_se   est    est_se</span></span>
<span><span class="co">##  1:         1    90 0.264970857 0.028499372 39323 4832.3611</span></span>
<span><span class="co">##  2:         3     2 0.005410869 0.003897870   803  579.0884</span></span>
<span><span class="co">##  3:         4     2 0.005754523 0.005537463   854  824.5438</span></span>
<span><span class="co">##  4:         6     4 0.008362252 0.005232930  1241  778.6512</span></span>
<span><span class="co">##  5:         7     5 0.014285233 0.007603062  2120 1135.6655</span></span>
<span><span class="co">##  6:         8   179 0.618166504 0.031974249 91739 7882.9544</span></span>
<span><span class="co">##  7:        13    24 0.083049762 0.018892303 12325 2933.8872</span></span>
<span><span class="co">##  8:         3     4 0.746962493 0.203291398  1414  881.0349</span></span>
<span><span class="co">##  9:         8     2 0.253037507 0.203291398   479  419.9015</span></span>
<span><span class="co">## 10:         1     2 0.182176268 0.159601009   740  697.3863</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="calculating-trip-rates">Calculating trip rates<a class="anchor" aria-label="anchor" href="#calculating-trip-rates"></a>
</h3>
<p><code>hts_summary</code> can also be used to calculate trip
rates.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_prep_triprate.html">hts_prep_triprate</a></span><span class="op">(</span>summarize_by <span class="op">=</span> <span class="st">'employment'</span>,</span>
<span>                       variables_dt <span class="op">=</span> <span class="va">variable_list</span>,</span>
<span>                       trip_name <span class="op">=</span> <span class="st">'trip'</span>,</span>
<span>                       day_name <span class="op">=</span> <span class="st">'day'</span>,</span>
<span>                       hts_data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'hh'</span> <span class="op">=</span> <span class="va">hh</span>,</span>
<span>                                       <span class="st">'person'</span> <span class="op">=</span> <span class="va">person</span>,</span>
<span>                                       <span class="st">'day'</span> <span class="op">=</span> <span class="va">day</span>,</span>
<span>                                       <span class="st">'trip'</span> <span class="op">=</span> <span class="va">trip</span>,</span>
<span>                                       <span class="st">'vehicle'</span> <span class="op">=</span> <span class="va">vehicle</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">trip_rate_by_employment_summary</span> <span class="op">=</span> <span class="fu"><a href="../reference/hts_summary.html">hts_summary</a></span><span class="op">(</span>prepped_dt <span class="op">=</span> <span class="va">DT</span><span class="op">$</span><span class="va">num</span>, </span>
<span>                                              summarize_var <span class="op">=</span> <span class="st">'num_trips_wtd'</span>,</span>
<span>                                              summarize_by <span class="op">=</span> <span class="st">'employment'</span>,</span>
<span>                                              summarize_vartype <span class="op">=</span> <span class="st">'numeric'</span>,</span>
<span>                                              weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                              wtname <span class="op">=</span> <span class="st">'day_weight'</span>,</span>
<span>                                              se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    employment count min      max     mean   mean_se   median</span></span>
<span><span class="co">## 1:          1  2012   0 59.17021 3.817292 0.0871695 2.478363</span></span>
<span><span class="co">## 2:          2   307   0 54.24561 3.795345 0.2380826 2.414773</span></span>
<span><span class="co">## 3:          3   189   0 54.81752 4.128966 0.2921698 3.361946</span></span>
<span><span class="co">## 4:          5   899   0 57.84615 3.629484 0.1354622 2.154110</span></span>
<span><span class="co">## 5:          6   181   0 48.29293 3.411580 0.2988906 1.842215</span></span>
<span><span class="co">## 6:          7    37   0 44.70815 3.686618 0.7769508 2.448465</span></span>
<span><span class="co">## 7:          8    24   0 24.23790 2.513073 0.6037672 1.613707</span></span>
<span><span class="co">## 8:        995   568   0 58.38776 2.000315 0.1028051 1.146023</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="labeling-values">Labeling Values<a class="anchor" aria-label="anchor" href="#labeling-values"></a>
</h3>
<p>To label values we can use <code>factorize_column</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span><span class="op">$</span><span class="va">employment</span> <span class="op">=</span>  <span class="fu"><a href="../reference/factorize_column.html">factorize_column</a></span><span class="op">(</span></span>
<span>  <span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span><span class="op">$</span><span class="va">employment</span>,</span>
<span>  <span class="st">'employment'</span>,</span>
<span>  <span class="va">value_labels</span>,</span>
<span>  variable_colname <span class="op">=</span> <span class="st">'variable'</span>,</span>
<span>  value_colname <span class="op">=</span> <span class="st">'value'</span>,</span>
<span>  value_label_colname <span class="op">=</span> <span class="st">'label'</span>,</span>
<span>  value_order_colname <span class="op">=</span> <span class="st">'val_order'</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span></span></code></pre></div>
<pre><code><span><span class="co">##                                                                             employment</span></span>
<span><span class="co">## 1:                                           Employed full-time (35+ hours/week, paid)</span></span>
<span><span class="co">## 2:                                 Employed part-time (fewer than 35 hours/week, paid)</span></span>
<span><span class="co">## 3:                                                                       Self-employed</span></span>
<span><span class="co">## 4: Not employed and not looking for work (e.g., retired, stay-at-home parent, student)</span></span>
<span><span class="co">## 5:                                                     Unemployed and looking for work</span></span>
<span><span class="co">## 6:                                                          Unpaid volunteer or intern</span></span>
<span><span class="co">## 7:               Employed, but not currently working (e.g., on leave, furloughed 100%)</span></span>
<span><span class="co">## 8:                                                                    Missing Response</span></span>
<span><span class="co">##    count min      max     mean   mean_se   median</span></span>
<span><span class="co">## 1:  2012   0 59.17021 3.817292 0.0871695 2.478363</span></span>
<span><span class="co">## 2:   307   0 54.24561 3.795345 0.2380826 2.414773</span></span>
<span><span class="co">## 3:   189   0 54.81752 4.128966 0.2921698 3.361946</span></span>
<span><span class="co">## 4:   899   0 57.84615 3.629484 0.1354622 2.154110</span></span>
<span><span class="co">## 5:   181   0 48.29293 3.411580 0.2988906 1.842215</span></span>
<span><span class="co">## 6:    37   0 44.70815 3.686618 0.7769508 2.448465</span></span>
<span><span class="co">## 7:    24   0 24.23790 2.513073 0.6037672 1.613707</span></span>
<span><span class="co">## 8:   568   0 58.38776 2.000315 0.1028051 1.146023</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="creating-visuals-using-hts_summary-output">Creating Visuals using hts_summary output<a class="anchor" aria-label="anchor" href="#creating-visuals-using-hts_summary-output"></a>
</h3>
<p><code>hts_summary</code> creates outputs that can easily be used to
create visuals.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>  <span class="va">trip_rate_by_employment_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">wtd</span>, </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mean</span>, y <span class="op">=</span> <span class="va">employment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">'identity'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_errorbar</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="op">(</span><span class="va">mean</span> <span class="op">-</span> <span class="va">mean_se</span><span class="op">)</span>, </span>
<span>        xmax <span class="op">=</span> <span class="op">(</span><span class="va">mean</span> <span class="op">+</span> <span class="va">mean_se</span><span class="op">)</span>,</span>
<span>        width <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">'Mean Trip Rate'</span>,</span>
<span>       y <span class="op">=</span> <span class="st">'Employment'</span><span class="op">)</span>  <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="va">x</span>, width <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span>
<span>                   limits <span class="op">=</span> <span class="va">rev</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting_started_files/figure-html/ggplot_example-1.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by James Clark.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
